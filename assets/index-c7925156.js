var jo=Object.defineProperty;var Bo=(p,s,l)=>s in p?jo(p,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[s]=l;var an=(p,s,l)=>(Bo(p,typeof s!="symbol"?s+"":s,l),l);import{_ as Bt,m as It,x as lt,aj as No,s as Po,u as mn,ak as zo,al as Do,w as vn,am as Ao,an as Fo,ao as Uo,ap as Vo,F as An,E as Mt,aq as Wo,ar as ne,as as xt,ac as ut,at as Fn,ad as Ho,a0 as gt,a1 as kt,ab as gn,au as dn,av as Un,aw as ot,a4 as Ke,ax as Go,a2 as Vn,V as Ko,ay as qo,az as Xo,aA as Yo,aB as hn,a5 as ft,aC as wt,aD as Rn,aa as mt,aE as Ln,Z as Zo,ag as Jo}from"./index-87c8c1a3.js";import{d as pn,e as it,b as Wn,a as Qo,v as er,u as tr,f as nr,c as or,E as rr,j as sr}from"./preview-5f7a21b2.js";import{I as ar}from"./types-c26e2409.js";import{b as ir,h as Ut,g as st,_ as yn,E as Hn,j as lr}from"./useCached-b8300fff.js";import{z as me,A as _t,r as D,y as Rt,t as Ft,e as ht,u as k,ag as Gn,v as W,k as E,J as ie,D as J,l as L,F as ye,G as fe,L as ae,a2 as Ue,B as bn,R as ur,h as jn,m as j,K as tt,M as _n,O as rt,a8 as Lt,C as R,ah as cr,ai as Kn,af as vt,E as we,P as St,n as Vt,o as xn,H as Ye,aj as dr,aa as pr,w as nt,ak as fr,al as mr,am as bt,U as qn,X as jt,a5 as Xn,an as vr,T as $t,ao as gr,a as Yn,ap as hr,aq as yr,ac as br,ad as _r}from"./vue-d746028e.js";import{a as xr,c as kr,g as Cr}from"./xgplayer-2fc91dd5.js";const wr=me({inheritAttrs:!1});function Sr(p,s,l,f,h,y){return _t(p.$slots,"default")}var Ir=Bt(wr,[["render",Sr],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Mr=me({name:"ElCollectionItem",inheritAttrs:!1});function Er(p,s,l,f,h,y){return _t(p.$slots,"default")}var Or=Bt(Mr,[["render",Er],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const Tr="data-el-collection-item",$r=p=>{const s=`El${p}Collection`,l=`${s}Item`,f=Symbol(s),h=Symbol(l),y={...Ir,name:s,setup(){const n=D(null),i=new Map;Rt(f,{itemMap:i,getItems:()=>{const t=k(n);if(!t)return[];const r=Array.from(t.querySelectorAll(`[${Tr}]`));return[...i.values()].sort((a,c)=>r.indexOf(a.ref)-r.indexOf(c.ref))},collectionRef:n})}},_={...Or,name:l,setup(n,{attrs:i}){const e=D(null),t=Ft(f,void 0);Rt(h,{collectionItemRef:e}),ht(()=>{const r=k(e);r&&t.itemMap.set(r,{ref:r,...i})}),Gn(()=>{const r=k(e);t.itemMap.delete(r)})}};return{COLLECTION_INJECTION_KEY:f,COLLECTION_ITEM_INJECTION_KEY:h,ElCollection:y,ElCollectionItem:_}},ln=It({trigger:pn.trigger,effect:{...it.effect,default:"light"},type:{type:lt(String)},placement:{type:lt(String),default:"bottom"},popperOptions:{type:lt(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:lt([Number,String]),default:0},maxHeight:{type:lt([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:lt(Object)},teleported:it.teleported});It({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:No}});It({onKeydown:{type:lt(Function)}});$r("Dropdown");const Rr=It({trigger:pn.trigger,placement:ln.placement,disabled:pn.disabled,visible:it.visible,transition:it.transition,popperOptions:ln.popperOptions,tabindex:ln.tabindex,content:it.content,popperStyle:it.popperStyle,popperClass:it.popperClass,enterable:{...it.enterable,default:!0},effect:{...it.effect,default:"light"},teleported:it.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),Lr={"update:visible":p=>Po(p),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},jr="onUpdate:visible",Br=me({name:"ElPopover"}),Nr=me({...Br,props:Rr,emits:Lr,setup(p,{expose:s,emit:l}){const f=p,h=W(()=>f[jr]),y=mn("popover"),_=D(),n=W(()=>{var d;return(d=k(_))==null?void 0:d.popperRef}),i=W(()=>[{width:zo(f.width)},f.popperStyle]),e=W(()=>[y.b(),f.popperClass,{[y.m("plain")]:!!f.content}]),t=W(()=>f.transition===`${y.namespace.value}-fade-in-linear`),r=()=>{var d;(d=_.value)==null||d.hide()},o=()=>{l("before-enter")},a=()=>{l("before-leave")},c=()=>{l("after-enter")},u=()=>{l("update:visible",!1),l("after-leave")};return s({popperRef:n,hide:r}),(d,v)=>(E(),ie(k(Wn),bn({ref_key:"tooltipRef",ref:_},d.$attrs,{trigger:d.trigger,placement:d.placement,disabled:d.disabled,visible:d.visible,transition:d.transition,"popper-options":d.popperOptions,tabindex:d.tabindex,content:d.content,offset:d.offset,"show-after":d.showAfter,"hide-after":d.hideAfter,"auto-close":d.autoClose,"show-arrow":d.showArrow,"aria-label":d.title,effect:d.effect,enterable:d.enterable,"popper-class":k(e),"popper-style":k(i),teleported:d.teleported,persistent:d.persistent,"gpu-acceleration":k(t),"onUpdate:visible":k(h),onBeforeShow:o,onBeforeHide:a,onShow:c,onHide:u}),{content:J(()=>[d.title?(E(),L("div",{key:0,class:ye(k(y).e("title")),role:"title"},fe(d.title),3)):ae("v-if",!0),_t(d.$slots,"default",{},()=>[Ue(fe(d.content),1)])]),default:J(()=>[d.$slots.reference?_t(d.$slots,"reference",{key:0}):ae("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Pr=Bt(Nr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const Bn=(p,s)=>{const l=s.arg||s.value,f=l==null?void 0:l.popperRef;f&&(f.triggerRef=p)};var zr={mounted(p,s){Bn(p,s)},updated(p,s){Bn(p,s)}};const Dr="popover",Ar=Do(zr,Dr),Fr=vn(Pr,{directive:Ar}),Ur=It({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:p=>p>=0&&p<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:lt(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:lt([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:lt(Function),default:p=>`${p}%`}}),Vr=["aria-valuenow"],Wr={viewBox:"0 0 100 100"},Hr=["d","stroke","stroke-linecap","stroke-width"],Gr=["d","stroke","opacity","stroke-linecap","stroke-width"],Kr={key:0},qr=me({name:"ElProgress"}),Xr=me({...qr,props:Ur,setup(p){const s=p,l={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},f=mn("progress"),h=W(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:b(s.percentage)})),y=W(()=>(s.strokeWidth/s.width*100).toFixed(1)),_=W(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(y.value)/2}`,10):0),n=W(()=>{const g=_.value,C=s.type==="dashboard";return`
          M 50 50
          m 0 ${C?"":"-"}${g}
          a ${g} ${g} 0 1 1 0 ${C?"-":""}${g*2}
          a ${g} ${g} 0 1 1 0 ${C?"":"-"}${g*2}
          `}),i=W(()=>2*Math.PI*_.value),e=W(()=>s.type==="dashboard"?.75:1),t=W(()=>`${-1*i.value*(1-e.value)/2}px`),r=W(()=>({strokeDasharray:`${i.value*e.value}px, ${i.value}px`,strokeDashoffset:t.value})),o=W(()=>({strokeDasharray:`${i.value*e.value*(s.percentage/100)}px, ${i.value}px`,strokeDashoffset:t.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),a=W(()=>{let g;return s.color?g=b(s.percentage):g=l[s.status]||l.default,g}),c=W(()=>s.status==="warning"?Ao:s.type==="line"?s.status==="success"?Fo:Uo:s.status==="success"?Vo:An),u=W(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),d=W(()=>s.format(s.percentage));function v(g){const C=100/g.length;return g.map((x,w)=>jn(x)?{color:x,percentage:(w+1)*C}:x).sort((x,w)=>x.percentage-w.percentage)}const b=g=>{var C;const{color:I}=s;if(ur(I))return I(g);if(jn(I))return I;{const x=v(I);for(const w of x)if(w.percentage>g)return w.color;return(C=x[x.length-1])==null?void 0:C.color}};return(g,C)=>(E(),L("div",{class:ye([k(f).b(),k(f).m(g.type),k(f).is(g.status),{[k(f).m("without-text")]:!g.showText,[k(f).m("text-inside")]:g.textInside}]),role:"progressbar","aria-valuenow":g.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[g.type==="line"?(E(),L("div",{key:0,class:ye(k(f).b("bar"))},[j("div",{class:ye(k(f).be("bar","outer")),style:tt({height:`${g.strokeWidth}px`})},[j("div",{class:ye([k(f).be("bar","inner"),{[k(f).bem("bar","inner","indeterminate")]:g.indeterminate},{[k(f).bem("bar","inner","striped")]:g.striped},{[k(f).bem("bar","inner","striped-flow")]:g.stripedFlow}]),style:tt(k(h))},[(g.showText||g.$slots.default)&&g.textInside?(E(),L("div",{key:0,class:ye(k(f).be("bar","innerText"))},[_t(g.$slots,"default",{percentage:g.percentage},()=>[j("span",null,fe(k(d)),1)])],2)):ae("v-if",!0)],6)],6)],2)):(E(),L("div",{key:1,class:ye(k(f).b("circle")),style:tt({height:`${g.width}px`,width:`${g.width}px`})},[(E(),L("svg",Wr,[j("path",{class:ye(k(f).be("circle","track")),d:k(n),stroke:`var(${k(f).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":g.strokeLinecap,"stroke-width":k(y),fill:"none",style:tt(k(r))},null,14,Hr),j("path",{class:ye(k(f).be("circle","path")),d:k(n),stroke:k(a),fill:"none",opacity:g.percentage?1:0,"stroke-linecap":g.strokeLinecap,"stroke-width":k(y),style:tt(k(o))},null,14,Gr)]))],6)),(g.showText||g.$slots.default)&&!g.textInside?(E(),L("div",{key:2,class:ye(k(f).e("text")),style:tt({fontSize:`${k(u)}px`})},[_t(g.$slots,"default",{percentage:g.percentage},()=>[g.status?(E(),ie(k(Mt),{key:1},{default:J(()=>[(E(),ie(_n(k(c))))]),_:1})):(E(),L("span",Kr,fe(k(d)),1))])],6)):ae("v-if",!0)],10,Vr))}});var Yr=Bt(Xr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Zr=vn(Yr),Jr=It({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Wo,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),Qr=me({name:"ElText"}),es=me({...Qr,props:Jr,setup(p){const s=p,l=ir(),f=mn("text"),h=W(()=>[f.b(),f.m(s.type),f.m(l.value),f.is("truncated",s.truncated)]);return(y,_)=>(E(),ie(_n(y.tag),{class:ye(k(h))},{default:J(()=>[_t(y.$slots,"default")]),_:3},8,["class"]))}});var ts=Bt(es,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const ns=vn(ts),Zn=(p,s,l)=>{switch(s){case ne.SYSTEM:case ne.TEXT:return`${p}:${l}`;case ne.IMAGE:return`${p}: [图片]`;case ne.FILE:return`${p}: [文件]`;case ne.VOICE:return`${p}: [语音]`;case ne.VIDEO:return`${p}: [视频]`;case ne.EMOJI:return`${p}: [表情]`;default:return""}},os={class:"chat-message"},rs=["onClick"],ss={class:"message-info"},as={style:{"white-space":"nowrap"}},is={class:"person"},ls={key:0,class:"tag"},us={class:"message-message"},cs={class:"message-time"},ds=me({__name:"index",setup(p){const s=xt(),l=ut(),f=W(()=>l.currentSession),h=W(()=>s.sessionList.map(_=>{var e,t,r,o,a,c,u,d;const n=(r=(t=Array.from(((e=s.messageMap.get(_.roomId))==null?void 0:e.values())||[]))==null?void 0:t.slice(-1))==null?void 0:r[0];let i="";if(n){const v=Ut(n.fromUser.uid);i=((o=n.message)==null?void 0:o.type)===ne.RECALL?`${v.value.name}:'撤回了一条消息'`:Zn(v.value.name,(a=n.message)==null?void 0:a.type,((u=(c=n.message)==null?void 0:c.body)==null?void 0:u.content)||((d=n.message)==null?void 0:d.body))}return{..._,tag:_.hot_Flag===ar.Yes?"官方":"",lastMsg:i||_.text||"欢迎使用MallChat",lastMsgTime:Fn(_==null?void 0:_.activeTime)}})),y=(_,n)=>{l.currentSession.roomId=_,l.currentSession.type=n};return(_,n)=>{const i=Qo,e=Ho;return E(),L("div",os,[(E(!0),L(rt,null,Lt(h.value,(t,r)=>(E(),L("div",{key:r,class:ye(["chat-message-item ",{active:f.value.roomId===t.roomId}]),onClick:o=>y(t.roomId,t.type)},[R(e,{value:t.unreadCount,max:999,hidden:t.unreadCount<1,class:"item"},{default:J(()=>[R(i,{shape:"circle",size:38,src:t.avatar},null,8,["src"])]),_:2},1032,["value","hidden"]),j("div",ss,[j("div",as,[j("span",is,fe(t.name),1),t.tag?(E(),L("span",ls,fe(t.tag),1)):ae("",!0)]),j("div",us,fe(t.lastMsg),1)]),j("span",cs,fe(t.lastMsgTime),1)],10,rs))),128))])}}});const ps=gt(ds,[["__scopeId","data-v-176a5711"]]),fs={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ms=j("path",{fill:"currentColor",d:"m174.72 855.68l135.296-45.12l23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160S128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8l-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512C64 299.904 256 96 512 96s448 203.904 448 416s-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"},null,-1),vs=j("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4z"},null,-1),gs=[ms,vs];function hs(p,s){return E(),L("svg",fs,gs)}const ys={name:"ep-chat-dot-round",render:hs};var Jn={exports:{}};const bs=xr(cr);(function(p,s){(function(l,f){p.exports=f(bs)})(typeof self<"u"?self:kr,l=>(()=>{var f={9662:(n,i,e)=>{var t=e(614),r=e(6330),o=TypeError;n.exports=function(a){if(t(a))return a;throw o(r(a)+" is not a function")}},6077:(n,i,e)=>{var t=e(614),r=String,o=TypeError;n.exports=function(a){if(typeof a=="object"||t(a))return a;throw o("Can't set "+r(a)+" as a prototype")}},1223:(n,i,e)=>{var t=e(5112),r=e(30),o=e(3070).f,a=t("unscopables"),c=Array.prototype;c[a]==null&&o(c,a,{configurable:!0,value:r(null)}),n.exports=function(u){c[a][u]=!0}},9670:(n,i,e)=>{var t=e(111),r=String,o=TypeError;n.exports=function(a){if(t(a))return a;throw o(r(a)+" is not an object")}},8533:(n,i,e)=>{var t=e(2092).forEach,r=e(9341),o=r("forEach");n.exports=o?[].forEach:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}},1318:(n,i,e)=>{var t=e(5656),r=e(1400),o=e(6244),a=function(c){return function(u,d,v){var b,g=t(u),C=o(g),I=r(v,C);if(c&&d!=d){for(;C>I;)if(b=g[I++],b!=b)return!0}else for(;C>I;I++)if((c||I in g)&&g[I]===d)return c||I||0;return!c&&-1}};n.exports={includes:a(!0),indexOf:a(!1)}},2092:(n,i,e)=>{var t=e(9974),r=e(1702),o=e(8361),a=e(7908),c=e(6244),u=e(5417),d=r([].push),v=function(b){var g=b==1,C=b==2,I=b==3,x=b==4,w=b==6,T=b==7,z=b==5||w;return function(q,F,Z,V){for(var Q,le,O=a(q),N=o(O),re=t(F,Z),xe=c(N),S=0,P=V||u,G=g?P(q,xe):C||T?P(q,0):void 0;xe>S;S++)if((z||S in N)&&(Q=N[S],le=re(Q,S,O),b))if(g)G[S]=le;else if(le)switch(b){case 3:return!0;case 5:return Q;case 6:return S;case 2:d(G,Q)}else switch(b){case 4:return!1;case 7:d(G,Q)}return w?-1:I||x?x:G}};n.exports={forEach:v(0),map:v(1),filter:v(2),some:v(3),every:v(4),find:v(5),findIndex:v(6),filterReject:v(7)}},1194:(n,i,e)=>{var t=e(7293),r=e(5112),o=e(7392),a=r("species");n.exports=function(c){return o>=51||!t(function(){var u=[],d=u.constructor={};return d[a]=function(){return{foo:1}},u[c](Boolean).foo!==1})}},9341:(n,i,e)=>{var t=e(7293);n.exports=function(r,o){var a=[][r];return!!a&&t(function(){a.call(null,o||function(){return 1},1)})}},3658:(n,i,e)=>{var t=e(9781),r=e(3157),o=TypeError,a=Object.getOwnPropertyDescriptor,c=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(u){return u instanceof TypeError}}();n.exports=c?function(u,d){if(r(u)&&!a(u,"length").writable)throw o("Cannot set read only .length");return u.length=d}:function(u,d){return u.length=d}},206:(n,i,e)=>{var t=e(1702);n.exports=t([].slice)},7475:(n,i,e)=>{var t=e(3157),r=e(4411),o=e(111),a=e(5112),c=a("species"),u=Array;n.exports=function(d){var v;return t(d)&&(v=d.constructor,r(v)&&(v===u||t(v.prototype))?v=void 0:o(v)&&(v=v[c],v===null&&(v=void 0))),v===void 0?u:v}},5417:(n,i,e)=>{var t=e(7475);n.exports=function(r,o){return new(t(r))(o===0?0:o)}},4326:(n,i,e)=>{var t=e(1702),r=t({}.toString),o=t("".slice);n.exports=function(a){return o(r(a),8,-1)}},648:(n,i,e)=>{var t=e(1694),r=e(614),o=e(4326),a=e(5112),c=a("toStringTag"),u=Object,d=o(function(){return arguments}())=="Arguments",v=function(b,g){try{return b[g]}catch{}};n.exports=t?o:function(b){var g,C,I;return b===void 0?"Undefined":b===null?"Null":typeof(C=v(g=u(b),c))=="string"?C:d?o(g):(I=o(g))=="Object"&&r(g.callee)?"Arguments":I}},9920:(n,i,e)=>{var t=e(2597),r=e(3887),o=e(1236),a=e(3070);n.exports=function(c,u,d){for(var v=r(u),b=a.f,g=o.f,C=0;C<v.length;C++){var I=v[C];t(c,I)||d&&t(d,I)||b(c,I,g(u,I))}}},4964:(n,i,e)=>{var t=e(5112),r=t("match");n.exports=function(o){var a=/./;try{"/./"[o](a)}catch{try{return a[r]=!1,"/./"[o](a)}catch{}}return!1}},8880:(n,i,e)=>{var t=e(9781),r=e(3070),o=e(9114);n.exports=t?function(a,c,u){return r.f(a,c,o(1,u))}:function(a,c,u){return a[c]=u,a}},9114:n=>{n.exports=function(i,e){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:e}}},6135:(n,i,e)=>{var t=e(4948),r=e(3070),o=e(9114);n.exports=function(a,c,u){var d=t(c);d in a?r.f(a,d,o(0,u)):a[d]=u}},8052:(n,i,e)=>{var t=e(614),r=e(3070),o=e(6339),a=e(3072);n.exports=function(c,u,d,v){v||(v={});var b=v.enumerable,g=v.name!==void 0?v.name:u;if(t(d)&&o(d,g,v),v.global)b?c[u]=d:a(u,d);else{try{v.unsafe?c[u]&&(b=!0):delete c[u]}catch{}b?c[u]=d:r.f(c,u,{value:d,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return c}},3072:(n,i,e)=>{var t=e(7854),r=Object.defineProperty;n.exports=function(o,a){try{r(t,o,{value:a,configurable:!0,writable:!0})}catch{t[o]=a}return a}},5117:(n,i,e)=>{var t=e(6330),r=TypeError;n.exports=function(o,a){if(!delete o[a])throw r("Cannot delete property "+t(a)+" of "+t(o))}},9781:(n,i,e)=>{var t=e(7293);n.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(n,i,e)=>{var t=e(7854),r=e(111),o=t.document,a=r(o)&&r(o.createElement);n.exports=function(c){return a?o.createElement(c):{}}},7207:n=>{var i=TypeError,e=9007199254740991;n.exports=function(t){if(t>e)throw i("Maximum allowed index exceeded");return t}},8113:(n,i,e)=>{var t=e(5005);n.exports=t("navigator","userAgent")||""},7392:(n,i,e)=>{var t,r,o=e(7854),a=e(8113),c=o.process,u=o.Deno,d=c&&c.versions||u&&u.version,v=d&&d.v8;v&&(t=v.split("."),r=t[0]>0&&t[0]<4?1:+(t[0]+t[1])),!r&&a&&(t=a.match(/Edge\/(\d+)/),(!t||t[1]>=74)&&(t=a.match(/Chrome\/(\d+)/),t&&(r=+t[1]))),n.exports=r},748:n=>{n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7762:(n,i,e)=>{var t=e(9781),r=e(7293),o=e(9670),a=e(30),c=e(6277),u=Error.prototype.toString,d=r(function(){if(t){var v=a(Object.defineProperty({},"name",{get:function(){return this===v}}));if(u.call(v)!=="true")return!0}return u.call({message:1,name:2})!=="2: 1"||u.call({})!=="Error"});n.exports=d?function(){var v=o(this),b=c(v.name,"Error"),g=c(v.message);return b?g?b+": "+g:b:g}:u},2109:(n,i,e)=>{var t=e(7854),r=e(1236).f,o=e(8880),a=e(8052),c=e(3072),u=e(9920),d=e(4705);n.exports=function(v,b){var g,C,I,x,w,T,z=v.target,q=v.global,F=v.stat;if(C=q?t:F?t[z]||c(z,{}):(t[z]||{}).prototype,C)for(I in b){if(w=b[I],v.dontCallGetSet?(T=r(C,I),x=T&&T.value):x=C[I],g=d(q?I:z+(F?".":"#")+I,v.forced),!g&&x!==void 0){if(typeof w==typeof x)continue;u(w,x)}(v.sham||x&&x.sham)&&o(w,"sham",!0),a(C,I,w,v)}}},7293:n=>{n.exports=function(i){try{return!!i()}catch{return!0}}},2104:(n,i,e)=>{var t=e(4374),r=Function.prototype,o=r.apply,a=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(t?a.bind(o):function(){return a.apply(o,arguments)})},9974:(n,i,e)=>{var t=e(1702),r=e(9662),o=e(4374),a=t(t.bind);n.exports=function(c,u){return r(c),u===void 0?c:o?a(c,u):function(){return c.apply(u,arguments)}}},4374:(n,i,e)=>{var t=e(7293);n.exports=!t(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")})},6916:(n,i,e)=>{var t=e(4374),r=Function.prototype.call;n.exports=t?r.bind(r):function(){return r.apply(r,arguments)}},6530:(n,i,e)=>{var t=e(9781),r=e(2597),o=Function.prototype,a=t&&Object.getOwnPropertyDescriptor,c=r(o,"name"),u=c&&(function(){}).name==="something",d=c&&(!t||t&&a(o,"name").configurable);n.exports={EXISTS:c,PROPER:u,CONFIGURABLE:d}},1702:(n,i,e)=>{var t=e(4374),r=Function.prototype,o=r.bind,a=r.call,c=t&&o.bind(a,a);n.exports=t?function(u){return u&&c(u)}:function(u){return u&&function(){return a.apply(u,arguments)}}},5005:(n,i,e)=>{var t=e(7854),r=e(614),o=function(a){return r(a)?a:void 0};n.exports=function(a,c){return arguments.length<2?o(t[a]):t[a]&&t[a][c]}},8173:(n,i,e)=>{var t=e(9662),r=e(8554);n.exports=function(o,a){var c=o[a];return r(c)?void 0:t(c)}},7854:(n,i,e)=>{var t=function(r){return r&&r.Math==Math&&r};n.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof e.g=="object"&&e.g)||function(){return this}()||Function("return this")()},2597:(n,i,e)=>{var t=e(1702),r=e(7908),o=t({}.hasOwnProperty);n.exports=Object.hasOwn||function(a,c){return o(r(a),c)}},3501:n=>{n.exports={}},490:(n,i,e)=>{var t=e(5005);n.exports=t("document","documentElement")},4664:(n,i,e)=>{var t=e(9781),r=e(7293),o=e(317);n.exports=!t&&!r(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},8361:(n,i,e)=>{var t=e(1702),r=e(7293),o=e(4326),a=Object,c=t("".split);n.exports=r(function(){return!a("z").propertyIsEnumerable(0)})?function(u){return o(u)=="String"?c(u,""):a(u)}:a},9587:(n,i,e)=>{var t=e(614),r=e(111),o=e(7674);n.exports=function(a,c,u){var d,v;return o&&t(d=c.constructor)&&d!==u&&r(v=d.prototype)&&v!==u.prototype&&o(a,v),a}},2788:(n,i,e)=>{var t=e(1702),r=e(614),o=e(5465),a=t(Function.toString);r(o.inspectSource)||(o.inspectSource=function(c){return a(c)}),n.exports=o.inspectSource},9909:(n,i,e)=>{var t,r,o,a=e(4811),c=e(7854),u=e(1702),d=e(111),v=e(8880),b=e(2597),g=e(5465),C=e(6200),I=e(3501),x="Object already initialized",w=c.TypeError,T=c.WeakMap,z=function(O){return o(O)?r(O):t(O,{})},q=function(O){return function(N){var re;if(!d(N)||(re=r(N)).type!==O)throw w("Incompatible receiver, "+O+" required");return re}};if(a||g.state){var F=g.state||(g.state=new T),Z=u(F.get),V=u(F.has),Q=u(F.set);t=function(O,N){if(V(F,O))throw w(x);return N.facade=O,Q(F,O,N),N},r=function(O){return Z(F,O)||{}},o=function(O){return V(F,O)}}else{var le=C("state");I[le]=!0,t=function(O,N){if(b(O,le))throw w(x);return N.facade=O,v(O,le,N),N},r=function(O){return b(O,le)?O[le]:{}},o=function(O){return b(O,le)}}n.exports={set:t,get:r,has:o,enforce:z,getterFor:q}},3157:(n,i,e)=>{var t=e(4326);n.exports=Array.isArray||function(r){return t(r)=="Array"}},614:n=>{n.exports=function(i){return typeof i=="function"}},4411:(n,i,e)=>{var t=e(1702),r=e(7293),o=e(614),a=e(648),c=e(5005),u=e(2788),d=function(){},v=[],b=c("Reflect","construct"),g=/^\s*(?:class|function)\b/,C=t(g.exec),I=!g.exec(d),x=function(T){if(!o(T))return!1;try{return b(d,v,T),!0}catch{return!1}},w=function(T){if(!o(T))return!1;switch(a(T)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return I||!!C(g,u(T))}catch{return!0}};w.sham=!0,n.exports=!b||r(function(){var T;return x(x.call)||!x(Object)||!x(function(){T=!0})||T})?w:x},4705:(n,i,e)=>{var t=e(7293),r=e(614),o=/#|\.prototype\./,a=function(b,g){var C=u[c(b)];return C==v||C!=d&&(r(g)?t(g):!!g)},c=a.normalize=function(b){return String(b).replace(o,".").toLowerCase()},u=a.data={},d=a.NATIVE="N",v=a.POLYFILL="P";n.exports=a},8554:n=>{n.exports=function(i){return i==null}},111:(n,i,e)=>{var t=e(614),r=typeof document=="object"&&document.all,o=typeof r>"u"&&r!==void 0;n.exports=o?function(a){return typeof a=="object"?a!==null:t(a)||a===r}:function(a){return typeof a=="object"?a!==null:t(a)}},1913:n=>{n.exports=!1},7850:(n,i,e)=>{var t=e(111),r=e(4326),o=e(5112),a=o("match");n.exports=function(c){var u;return t(c)&&((u=c[a])!==void 0?!!u:r(c)=="RegExp")}},2190:(n,i,e)=>{var t=e(5005),r=e(614),o=e(7976),a=e(3307),c=Object;n.exports=a?function(u){return typeof u=="symbol"}:function(u){var d=t("Symbol");return r(d)&&o(d.prototype,c(u))}},6244:(n,i,e)=>{var t=e(7466);n.exports=function(r){return t(r.length)}},6339:(n,i,e)=>{var t=e(7293),r=e(614),o=e(2597),a=e(9781),c=e(6530).CONFIGURABLE,u=e(2788),d=e(9909),v=d.enforce,b=d.get,g=Object.defineProperty,C=a&&!t(function(){return g(function(){},"length",{value:8}).length!==8}),I=String(String).split("String"),x=n.exports=function(w,T,z){String(T).slice(0,7)==="Symbol("&&(T="["+String(T).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),z&&z.getter&&(T="get "+T),z&&z.setter&&(T="set "+T),(!o(w,"name")||c&&w.name!==T)&&(a?g(w,"name",{value:T,configurable:!0}):w.name=T),C&&z&&o(z,"arity")&&w.length!==z.arity&&g(w,"length",{value:z.arity});try{z&&o(z,"constructor")&&z.constructor?a&&g(w,"prototype",{writable:!1}):w.prototype&&(w.prototype=void 0)}catch{}var q=v(w);return o(q,"source")||(q.source=I.join(typeof T=="string"?T:"")),w};Function.prototype.toString=x(function(){return r(this)&&b(this).source||u(this)},"toString")},4758:n=>{var i=Math.ceil,e=Math.floor;n.exports=Math.trunc||function(t){var r=+t;return(r>0?e:i)(r)}},6277:(n,i,e)=>{var t=e(1340);n.exports=function(r,o){return r===void 0?arguments.length<2?"":o:t(r)}},3929:(n,i,e)=>{var t=e(7850),r=TypeError;n.exports=function(o){if(t(o))throw r("The method doesn't accept regular expressions");return o}},30:(n,i,e)=>{var t,r=e(9670),o=e(6048),a=e(748),c=e(3501),u=e(490),d=e(317),v=e(6200),b=">",g="<",C="prototype",I="script",x=v("IE_PROTO"),w=function(){},T=function(Z){return g+I+b+Z+g+"/"+I+b},z=function(Z){Z.write(T("")),Z.close();var V=Z.parentWindow.Object;return Z=null,V},q=function(){var Z,V=d("iframe"),Q="java"+I+":";return V.style.display="none",u.appendChild(V),V.src=String(Q),Z=V.contentWindow.document,Z.open(),Z.write(T("document.F=Object")),Z.close(),Z.F},F=function(){try{t=new ActiveXObject("htmlfile")}catch{}F=typeof document<"u"?document.domain&&t?z(t):q():z(t);for(var Z=a.length;Z--;)delete F[C][a[Z]];return F()};c[x]=!0,n.exports=Object.create||function(Z,V){var Q;return Z!==null?(w[C]=r(Z),Q=new w,w[C]=null,Q[x]=Z):Q=F(),V===void 0?Q:o.f(Q,V)}},6048:(n,i,e)=>{var t=e(9781),r=e(3353),o=e(3070),a=e(9670),c=e(5656),u=e(1956);i.f=t&&!r?Object.defineProperties:function(d,v){a(d);for(var b,g=c(v),C=u(v),I=C.length,x=0;I>x;)o.f(d,b=C[x++],g[b]);return d}},3070:(n,i,e)=>{var t=e(9781),r=e(4664),o=e(3353),a=e(9670),c=e(4948),u=TypeError,d=Object.defineProperty,v=Object.getOwnPropertyDescriptor,b="enumerable",g="configurable",C="writable";i.f=t?o?function(I,x,w){if(a(I),x=c(x),a(w),typeof I=="function"&&x==="prototype"&&"value"in w&&C in w&&!w[C]){var T=v(I,x);T&&T[C]&&(I[x]=w.value,w={configurable:g in w?w[g]:T[g],enumerable:b in w?w[b]:T[b],writable:!1})}return d(I,x,w)}:d:function(I,x,w){if(a(I),x=c(x),a(w),r)try{return d(I,x,w)}catch{}if("get"in w||"set"in w)throw u("Accessors not supported");return"value"in w&&(I[x]=w.value),I}},1236:(n,i,e)=>{var t=e(9781),r=e(6916),o=e(5296),a=e(9114),c=e(5656),u=e(4948),d=e(2597),v=e(4664),b=Object.getOwnPropertyDescriptor;i.f=t?b:function(g,C){if(g=c(g),C=u(C),v)try{return b(g,C)}catch{}if(d(g,C))return a(!r(o.f,g,C),g[C])}},8006:(n,i,e)=>{var t=e(6324),r=e(748),o=r.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(a){return t(a,o)}},5181:(n,i)=>{i.f=Object.getOwnPropertySymbols},7976:(n,i,e)=>{var t=e(1702);n.exports=t({}.isPrototypeOf)},6324:(n,i,e)=>{var t=e(1702),r=e(2597),o=e(5656),a=e(1318).indexOf,c=e(3501),u=t([].push);n.exports=function(d,v){var b,g=o(d),C=0,I=[];for(b in g)!r(c,b)&&r(g,b)&&u(I,b);for(;v.length>C;)r(g,b=v[C++])&&(~a(I,b)||u(I,b));return I}},1956:(n,i,e)=>{var t=e(6324),r=e(748);n.exports=Object.keys||function(o){return t(o,r)}},5296:(n,i)=>{var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,r=t&&!e.call({1:2},1);i.f=r?function(o){var a=t(this,o);return!!a&&a.enumerable}:e},7674:(n,i,e)=>{var t=e(1702),r=e(9670),o=e(6077);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,c=!1,u={};try{a=t(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),a(u,[]),c=u instanceof Array}catch{}return function(d,v){return r(d),o(v),c?a(d,v):d.__proto__=v,d}}():void 0)},288:(n,i,e)=>{var t=e(1694),r=e(648);n.exports=t?{}.toString:function(){return"[object "+r(this)+"]"}},2140:(n,i,e)=>{var t=e(6916),r=e(614),o=e(111),a=TypeError;n.exports=function(c,u){var d,v;if(u==="string"&&r(d=c.toString)&&!o(v=t(d,c))||r(d=c.valueOf)&&!o(v=t(d,c))||u!=="string"&&r(d=c.toString)&&!o(v=t(d,c)))return v;throw a("Can't convert object to primitive value")}},3887:(n,i,e)=>{var t=e(5005),r=e(1702),o=e(8006),a=e(5181),c=e(9670),u=r([].concat);n.exports=t("Reflect","ownKeys")||function(d){var v=o.f(c(d)),b=a.f;return b?u(v,b(d)):v}},7066:(n,i,e)=>{var t=e(9670);n.exports=function(){var r=t(this),o="";return r.hasIndices&&(o+="d"),r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.unicodeSets&&(o+="v"),r.sticky&&(o+="y"),o}},4706:(n,i,e)=>{var t=e(6916),r=e(2597),o=e(7976),a=e(7066),c=RegExp.prototype;n.exports=function(u){var d=u.flags;return d!==void 0||"flags"in c||r(u,"flags")||!o(c,u)?d:t(a,u)}},4488:(n,i,e)=>{var t=e(8554),r=TypeError;n.exports=function(o){if(t(o))throw r("Can't call method on "+o);return o}},7152:(n,i,e)=>{var t=e(7854),r=e(2104),o=e(614),a=e(8113),c=e(206),u=e(8053),d=/MSIE .\./.test(a),v=t.Function,b=function(g){return d?function(C,I){var x=u(arguments.length,1)>2,w=o(C)?C:v(C),T=x?c(arguments,2):void 0;return g(x?function(){r(w,this,T)}:w,I)}:g};n.exports={setTimeout:b(t.setTimeout),setInterval:b(t.setInterval)}},6200:(n,i,e)=>{var t=e(2309),r=e(9711),o=t("keys");n.exports=function(a){return o[a]||(o[a]=r(a))}},5465:(n,i,e)=>{var t=e(7854),r=e(3072),o="__core-js_shared__",a=t[o]||r(o,{});n.exports=a},2309:(n,i,e)=>{var t=e(1913),r=e(5465);(n.exports=function(o,a){return r[o]||(r[o]=a!==void 0?a:{})})("versions",[]).push({version:"3.25.0",mode:t?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},3111:(n,i,e)=>{var t=e(1702),r=e(4488),o=e(1340),a=e(1361),c=t("".replace),u="["+a+"]",d=RegExp("^"+u+u+"*"),v=RegExp(u+u+"*$"),b=function(g){return function(C){var I=o(r(C));return 1&g&&(I=c(I,d,"")),2&g&&(I=c(I,v,"")),I}};n.exports={start:b(1),end:b(2),trim:b(3)}},6293:(n,i,e)=>{var t=e(7392),r=e(7293);n.exports=!!Object.getOwnPropertySymbols&&!r(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&t&&t<41})},863:(n,i,e)=>{var t=e(1702);n.exports=t(1 .valueOf)},1400:(n,i,e)=>{var t=e(9303),r=Math.max,o=Math.min;n.exports=function(a,c){var u=t(a);return u<0?r(u+c,0):o(u,c)}},5656:(n,i,e)=>{var t=e(8361),r=e(4488);n.exports=function(o){return t(r(o))}},9303:(n,i,e)=>{var t=e(4758);n.exports=function(r){var o=+r;return o!==o||o===0?0:t(o)}},7466:(n,i,e)=>{var t=e(9303),r=Math.min;n.exports=function(o){return o>0?r(t(o),9007199254740991):0}},7908:(n,i,e)=>{var t=e(4488),r=Object;n.exports=function(o){return r(t(o))}},7593:(n,i,e)=>{var t=e(6916),r=e(111),o=e(2190),a=e(8173),c=e(2140),u=e(5112),d=TypeError,v=u("toPrimitive");n.exports=function(b,g){if(!r(b)||o(b))return b;var C,I=a(b,v);if(I){if(g===void 0&&(g="default"),C=t(I,b,g),!r(C)||o(C))return C;throw d("Can't convert object to primitive value")}return g===void 0&&(g="number"),c(b,g)}},4948:(n,i,e)=>{var t=e(7593),r=e(2190);n.exports=function(o){var a=t(o,"string");return r(a)?a:a+""}},1694:(n,i,e)=>{var t=e(5112),r=t("toStringTag"),o={};o[r]="z",n.exports=String(o)==="[object z]"},1340:(n,i,e)=>{var t=e(648),r=String;n.exports=function(o){if(t(o)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return r(o)}},6330:n=>{var i=String;n.exports=function(e){try{return i(e)}catch{return"Object"}}},9711:(n,i,e)=>{var t=e(1702),r=0,o=Math.random(),a=t(1 .toString);n.exports=function(c){return"Symbol("+(c===void 0?"":c)+")_"+a(++r+o,36)}},3307:(n,i,e)=>{var t=e(6293);n.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(n,i,e)=>{var t=e(9781),r=e(7293);n.exports=t&&r(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:n=>{var i=TypeError;n.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},4811:(n,i,e)=>{var t=e(7854),r=e(614),o=t.WeakMap;n.exports=r(o)&&/native code/.test(String(o))},5112:(n,i,e)=>{var t=e(7854),r=e(2309),o=e(2597),a=e(9711),c=e(6293),u=e(3307),d=r("wks"),v=t.Symbol,b=v&&v.for,g=u?v:v&&v.withoutSetter||a;n.exports=function(C){if(!o(d,C)||!c&&typeof d[C]!="string"){var I="Symbol."+C;c&&o(v,C)?d[C]=v[C]:d[C]=u&&b?b(I):g(I)}return d[C]}},1361:n=>{n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},9554:(n,i,e)=>{var t=e(2109),r=e(8533);t({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},6699:(n,i,e)=>{var t=e(2109),r=e(1318).includes,o=e(7293),a=e(1223),c=o(function(){return!Array(1).includes()});t({target:"Array",proto:!0,forced:c},{includes:function(u){return r(this,u,arguments.length>1?arguments[1]:void 0)}}),a("includes")},2772:(n,i,e)=>{var t=e(2109),r=e(1702),o=e(1318).indexOf,a=e(9341),c=r([].indexOf),u=!!c&&1/c([1],1,-0)<0,d=a("indexOf");t({target:"Array",proto:!0,forced:u||!d},{indexOf:function(v){var b=arguments.length>1?arguments[1]:void 0;return u?c(this,v,b)||0:o(this,v,b)}})},561:(n,i,e)=>{var t=e(2109),r=e(7908),o=e(1400),a=e(9303),c=e(6244),u=e(3658),d=e(7207),v=e(5417),b=e(6135),g=e(5117),C=e(1194),I=C("splice"),x=Math.max,w=Math.min;t({target:"Array",proto:!0,forced:!I},{splice:function(T,z){var q,F,Z,V,Q,le,O=r(this),N=c(O),re=o(T,N),xe=arguments.length;for(xe===0?q=F=0:xe===1?(q=0,F=N-re):(q=xe-2,F=w(x(a(z),0),N-re)),d(N+q-F),Z=v(O,F),V=0;V<F;V++)Q=re+V,Q in O&&b(Z,V,O[Q]);if(Z.length=F,q<F){for(V=re;V<N-F;V++)Q=V+F,le=V+q,Q in O?O[le]=O[Q]:g(O,le);for(V=N;V>N-F+q;V--)g(O,V-1)}else if(q>F)for(V=N-F;V>re;V--)Q=V+F-1,le=V+q-1,Q in O?O[le]=O[Q]:g(O,le);for(V=0;V<q;V++)O[V+re]=arguments[V+2];return u(O,N-F+q),Z}})},3710:(n,i,e)=>{var t=e(1702),r=e(8052),o=Date.prototype,a="Invalid Date",c="toString",u=t(o[c]),d=t(o.getTime);String(new Date(NaN))!=a&&r(o,c,function(){var v=d(this);return v===v?u(this):a})},6647:(n,i,e)=>{var t=e(8052),r=e(7762),o=Error.prototype;o.toString!==r&&t(o,"toString",r)},9653:(n,i,e)=>{var t=e(9781),r=e(7854),o=e(1702),a=e(4705),c=e(8052),u=e(2597),d=e(9587),v=e(7976),b=e(2190),g=e(7593),C=e(7293),I=e(8006).f,x=e(1236).f,w=e(3070).f,T=e(863),z=e(3111).trim,q="Number",F=r[q],Z=F.prototype,V=r.TypeError,Q=o("".slice),le=o("".charCodeAt),O=function(G){var X=g(G,"number");return typeof X=="bigint"?X:N(X)},N=function(G){var X,K,be,Ee,he,Oe,je,ct,Se=g(G,"number");if(b(Se))throw V("Cannot convert a Symbol value to a number");if(typeof Se=="string"&&Se.length>2){if(Se=z(Se),X=le(Se,0),X===43||X===45){if(K=le(Se,2),K===88||K===120)return NaN}else if(X===48){switch(le(Se,1)){case 66:case 98:be=2,Ee=49;break;case 79:case 111:be=8,Ee=55;break;default:return+Se}for(he=Q(Se,2),Oe=he.length,je=0;je<Oe;je++)if(ct=le(he,je),ct<48||ct>Ee)return NaN;return parseInt(he,be)}}return+Se};if(a(q,!F(" 0o1")||!F("0b1")||F("+0x1"))){for(var re,xe=function(G){var X=arguments.length<1?0:F(O(G)),K=this;return v(Z,K)&&C(function(){T(K)})?d(Object(X),K,xe):X},S=t?I(F):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),P=0;S.length>P;P++)u(F,re=S[P])&&!u(xe,re)&&w(xe,re,x(F,re));xe.prototype=Z,Z.constructor=xe,c(r,q,xe,{constructor:!0})}},1539:(n,i,e)=>{var t=e(1694),r=e(8052),o=e(288);t||r(Object.prototype,"toString",o,{unsafe:!0})},9714:(n,i,e)=>{var t=e(6530).PROPER,r=e(8052),o=e(9670),a=e(1340),c=e(7293),u=e(4706),d="toString",v=RegExp.prototype,b=v[d],g=c(function(){return b.call({source:"a",flags:"b"})!="/a/b"}),C=t&&b.name!=d;(g||C)&&r(RegExp.prototype,d,function(){var I=o(this),x=a(I.source),w=a(u(I));return"/"+x+"/"+w},{unsafe:!0})},2023:(n,i,e)=>{var t=e(2109),r=e(1702),o=e(3929),a=e(4488),c=e(1340),u=e(4964),d=r("".indexOf);t({target:"String",proto:!0,forced:!u("includes")},{includes:function(v){return!!~d(c(a(this)),c(o(v)),arguments.length>1?arguments[1]:void 0)}})},6815:(n,i,e)=>{var t=e(2109),r=e(7854),o=e(7152).setInterval;t({global:!0,bind:!0,forced:r.setInterval!==o},{setInterval:o})},8417:(n,i,e)=>{var t=e(2109),r=e(7854),o=e(7152).setTimeout;t({global:!0,bind:!0,forced:r.setTimeout!==o},{setTimeout:o})},2564:(n,i,e)=>{e(6815),e(8417)},3744:(n,i)=>{i.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[o,a]of t)r[o]=a;return r}},7203:n=>{n.exports=l}},h={};function y(n){var i=h[n];if(i!==void 0)return i.exports;var e=h[n]={exports:{}};return f[n](e,e.exports,y),e.exports}y.d=(n,i)=>{for(var e in i)y.o(i,e)&&!y.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},y.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),y.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),y.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},y.p="";var _={};return(()=>{if(y.r(_),y.d(_,{ContextMenu:()=>Cn,ContextMenuGroup:()=>wn,ContextMenuItem:()=>yt,ContextMenuSeparator:()=>ue,MenuBar:()=>Io,default:()=>Eo}),typeof window<"u"){var n=window.document.currentScript,i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(y.p=i[1])}var e=y(7203),t=null;function r(m){t&&a(),t=m}function o(m){m===t&&(t=null)}function a(){t&&(t.closeMenu(),t=null)}y(6647),y(3710),y(1539),y(9714);var c={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultAdjustPadding:{x:0,y:10}};function u(m,M){var $=m.offsetTop;return m.offsetParent!=null&&m.offsetParent!=M&&($-=m.offsetParent.scrollTop,$+=u(m.offsetParent,M)),$}function d(m,M){var $=m.offsetLeft;return m.offsetParent!=null&&m.offsetParent!=M&&($-=m.offsetParent.scrollLeft,$+=d(m.offsetParent,M)),$}function v(m,M,$,U){return{x:d(m,U)+M,y:u(m,U)+$}}var b="mx-menu-default-container",g="mx-menu-container-",C=0;function I(m){var M=m.getContainer,$=m.zIndex;if(M){var U=typeof M=="function"?M():M;if(U){var pe=U.getAttribute("id");return pe||(pe=g+C++,U.setAttribute("id",pe)),U.style.zIndex=($==null?void 0:$.toString())||c.defaultZindex.toString(),{eleId:pe,container:U,isNew:!1}}}var ge=document.getElementById(b);return ge||(ge=document.createElement("div"),ge.setAttribute("id",b),ge.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(ge)),ge.style.zIndex=($==null?void 0:$.toString())||c.defaultZindex.toString(),{eleId:b,container:ge,isNew:!0}}function x(m){return typeof m=="number"?"".concat(m,"px"):m}var w=(0,e.defineComponent)({props:{vnode:{type:[Object,Function],default:null},data:{type:Object,default:null}},setup:function(m){var M=(0,e.toRefs)(m),$=M.vnode,U=M.data;return function(){return typeof $.value=="function"?$.value(U.value):$.value}}});function T(m,M,$){return M in m?Object.defineProperty(m,M,{value:$,enumerable:!0,configurable:!0,writable:!0}):m[M]=$,m}function z(m,M){var $=Object.keys(m);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(m);M&&(U=U.filter(function(pe){return Object.getOwnPropertyDescriptor(m,pe).enumerable})),$.push.apply($,U)}return $}function q(m){for(var M=1;M<arguments.length;M++){var $=arguments[M]!=null?arguments[M]:{};M%2?z(Object($),!0).forEach(function(U){T(m,U,$[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors($)):z(Object($)).forEach(function(U){Object.defineProperty(m,U,Object.getOwnPropertyDescriptor($,U))})}return m}y(2564);var F={class:"mx-context-menu-scroll",ref:"scroll"};function Z(m,M,$,U,pe,ge){var oe=(0,e.resolveComponent)("ContextMenuSeparator"),ee=(0,e.resolveComponent)("ContextSubMenu",!0),ce=(0,e.resolveComponent)("ContextMenuItem"),Ie=(0,e.resolveComponent)("ContextMenuIconRight");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)("mx-context-menu "+(m.options.customClass?m.options.customClass:"")+" "+m.globalTheme),style:(0,e.normalizeStyle)({maxWidth:m.maxWidth?m.solveNumberOrStringSize(m.maxWidth):"".concat(m.constOptions.defaultMaxWidth,"px"),minWidth:m.minWidth?m.solveNumberOrStringSize(m.minWidth):"".concat(m.constOptions.defaultMinWidth,"px"),maxHeight:m.overflow&&m.maxHeight>0?"".concat(m.maxHeight,"px"):void 0,zIndex:m.zIndex,left:"".concat(m.position.x,"px"),top:"".concat(m.position.y,"px")}),"data-type":"ContextSubMenu",onClick:M[2]||(M[2]=function(){return m.onSubMenuBodyClick&&m.onSubMenuBodyClick.apply(m,arguments)})},[(0,e.createElementVNode)("div",{class:"mx-context-menu-items",ref:"menu",style:(0,e.normalizeStyle)({top:"".concat(m.scrollValue,"px")})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.items,function(A,ke){return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:ke},[A.hidden!==!0&&A.divided==="up"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0})):(0,e.createCommentVNode)("",!0),A.hidden!==!0&&A.divided==="self"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:1})):((0,e.openBlock)(),(0,e.createBlock)(ce,{key:2,clickHandler:A.onClick?function($e){return A.onClick($e)}:void 0,disabled:A.disabled,hidden:A.hidden,icon:A.icon,iconFontClass:A.iconFontClass,svgIcon:A.svgIcon,svgProps:A.svgProps,label:A.label,customRender:A.customRender,customClass:A.customClass,checked:A.checked,shortcut:A.shortcut,clickClose:A.clickClose,clickableWhenHasChildren:A.clickableWhenHasChildren,preserveIconWidth:A.preserveIconWidth!==void 0?A.preserveIconWidth:m.options.preserveIconWidth,showRightArrow:A.children&&A.children.length>0,hasChildren:A.children&&A.children.length>0,rawMenuItem:A,onSubMenuOpen:A.onSubMenuOpen,onSubMenuClose:A.onSubMenuClose},(0,e.createSlots)({_:2},[A.children&&A.children.length>0?{name:"submenu",fn:(0,e.withCtx)(function(){return[(0,e.createVNode)(ee,{items:A.children,maxWidth:A.maxWidth,minWidth:A.minWidth,adjustPosition:A.adjustSubMenuPosition!==void 0?A.adjustSubMenuPosition:m.options.adjustPosition,direction:A.direction!==void 0?A.direction:m.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]}),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),A.hidden===!0||A.divided!=="down"&&A.divided!==!0?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createBlock)(oe,{key:3}))],64)}),128))]})],4),(0,e.createElementVNode)("div",F,[(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable up",onClick:M[0]||(M[0]=function(A){return m.onScroll(!1)})},[(0,e.createVNode)(Ie)],512),[[e.vShow,m.overflow&&m.scrollValue<0]]),(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable down",onClick:M[1]||(M[1]=function(A){return m.onScroll(!0)})},[(0,e.createVNode)(Ie)],512),[[e.vShow,m.overflow&&m.scrollValue>-m.scrollHeight]])],512)],6)}y(9653),y(2772),y(9554),y(561),y(6699),y(2023);var V={key:0,class:"mx-context-menu-item-wrapper",ref:"menuItemRef","data-type":"ContextMenuItem"},Q={class:"mx-item-row"},le=["xlink:href"],O={key:1,class:"label"},N={class:"mx-item-row"},re={class:"mx-shortcut"};function xe(m,M,$,U,pe,ge){var oe=(0,e.resolveComponent)("VNodeRender"),ee=(0,e.resolveComponent)("ContextMenuIconCheck"),ce=(0,e.resolveComponent)("ContextMenuIconRight");return m.hidden?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",V,[m.globalHasSlot("itemRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemRender",m.getItemDataForChildren())}},null,8,["vnode"])):m.customRender?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:1,vnode:m.customRender,data:m.getItemDataForChildren()},null,8,["vnode","data"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:(0,e.normalizeClass)(["mx-context-menu-item",m.disabled?"disabled":"",m.keyBoardFocusMenu?"keyboard-focus":"",m.customClass?" "+m.customClass:"",m.showSubMenu?"open":""]),onClick:M[0]||(M[0]=function(){return m.onClick&&m.onClick.apply(m,arguments)}),onMouseenter:M[1]||(M[1]=function(){return m.onMouseEnter&&m.onMouseEnter.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[(0,e.createElementVNode)("div",Q,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["mx-icon-placeholder",m.preserveIconWidth?"preserve-width":""])},[(0,e.renderSlot)(m.$slots,"icon",{},function(){return[m.globalHasSlot("itemIconRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemIconRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.svgIcon=="string"&&m.svgIcon?((0,e.openBlock)(),(0,e.createElementBlock)("svg",(0,e.mergeProps)({key:1,class:"icon svg"},m.svgProps),[(0,e.createElementVNode)("use",{"xlink:href":m.svgIcon},null,8,le)],16)):typeof m.icon!="string"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:2,vnode:m.icon,data:m.icon},null,8,["vnode","data"])):typeof m.icon=="string"&&m.icon!==""?((0,e.openBlock)(),(0,e.createElementBlock)("i",{key:3,class:(0,e.normalizeClass)(m.icon+" icon "+m.iconFontClass+" "+m.globalIconFontClass)},null,2)):(0,e.createCommentVNode)("",!0)]}),m.checked?(0,e.renderSlot)(m.$slots,"check",{key:0},function(){return[m.globalHasSlot("itemCheckRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemCheckRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(ee)]}):(0,e.createCommentVNode)("",!0)],2),(0,e.renderSlot)(m.$slots,"label",{},function(){return[m.globalHasSlot("itemLabelRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemLabelRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.label=="string"?((0,e.openBlock)(),(0,e.createElementBlock)("span",O,(0,e.toDisplayString)(m.label),1)):((0,e.openBlock)(),(0,e.createBlock)(oe,{key:2,vnode:m.label,data:m.label},null,8,["vnode","data"]))]})]),(0,e.createElementVNode)("div",N,[m.shortcut?(0,e.renderSlot)(m.$slots,"shortcut",{key:0},function(){return[m.globalHasSlot("itemShortcutRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemShortcutRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("span",re,(0,e.toDisplayString)(m.shortcut),1)]}):(0,e.createCommentVNode)("",!0),m.showRightArrow?(0,e.renderSlot)(m.$slots,"rightArrow",{key:1},function(){return[m.globalHasSlot("itemRightArrowRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemRightArrowRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(ce)]}):(0,e.createCommentVNode)("",!0)])]})],34)),m.showSubMenu?(0,e.renderSlot)(m.$slots,"submenu",{key:3}):(0,e.createCommentVNode)("",!0)],512))}var S={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},P=(0,e.createElementVNode)("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),G=[P];function X(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",S,G)}var K=y(3744);const be={},Ee=(0,K.Z)(be,[["render",X]]),he=Ee;var Oe={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},je=(0,e.createElementVNode)("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),ct=[je];function Se(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",Oe,ct)}const Ze={},Et=(0,K.Z)(Ze,[["render",Se]]),Nt=Et,Ot=(0,e.defineComponent)({name:"ContextMenuItem",components:{VNodeRender:w,ContextMenuIconCheck:he,ContextMenuIconRight:Nt},props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup:function(m,M){var $=(0,e.toRefs)(m),U=$.clickHandler,pe=$.clickClose,ge=$.clickableWhenHasChildren,oe=$.disabled,ee=$.hidden,ce=$.label,Ie=$.icon,A=$.iconFontClass,ke=$.showRightArrow,$e=$.shortcut,Ve=$.hasChildren,Be=(0,e.ref)(!1),te=(0,e.ref)(!1),se=(0,e.ref)(),Ne=(0,e.inject)("globalHasSlot"),Ae=(0,e.inject)("globalRenderSlot"),dt=(0,e.inject)("globalTheme"),de=(0,e.inject)("globalIconFontClass"),Fe=(0,e.inject)("globalClickCloseClassName"),Je=(0,e.inject)("globalIgnoreClickClassName"),Qe=(0,e.inject)("globalCloseMenu"),Re=(0,e.inject)("menuContext"),We={showSubMenu:function(){return Be.value?(Re.markActiveMenuItem(We,!0),!0):!!Ve.value&&(qe(),!0)},isDisabledOrHidden:function(){return oe.value||ee.value},getElement:function(){return se.value},focus:function(){return te.value=!0},blur:function(){return te.value=!1},click:He};function He(Le){if(!oe.value){if(Le){var De=Le.target;if(De.classList.contains("mx-context-no-clickable")||Je&&De.classList.contains(Je))return;if(Fe&&De.classList.contains(Fe))return Le.stopPropagation(),void Qe(m.rawMenuItem)}Ve.value?ge.value?(typeof U.value=="function"&&U.value(Le),M.emit("click",Le)):Be.value||qe():(typeof U.value=="function"&&U.value(Le),M.emit("click",Le),pe.value&&Qe(m.rawMenuItem))}}function qe(Le){te.value=!1,Re.checkCloseOtherSubMenuTimeOut()||Re.closeOtherSubMenu(),oe.value||(Re.markActiveMenuItem(We),Ve.value&&(Le||Re.markThisOpenedByKeyBoard(),Re.addOpenedSubMenu(function(){te.value=!1,Be.value=!1,M.emit("subMenuClose")}),Be.value=!0,M.emit("subMenuOpen")))}return(0,e.onMounted)(function(){Re.isMenuItemDataCollectedFlag()?(0,e.nextTick)(function(){var Le=0,De=Re.getElement();if(De)for(var Me=0,Xe=0;Xe<De.children.length;Xe++){var H=De.children[Xe];if(H.getAttribute("data-type")==="ContextMenuItem"){if(H===se.value){Le=Me;break}Me++}}Re.addChildMenuItem(We,Le)}):Re.addChildMenuItem(We)}),(0,e.onBeforeUnmount)(function(){Re.removeChildMenuItem(We)}),{getItemDataForChildren:function(){return{disabled:oe.value,label:ce.value,icon:Ie.value,iconFontClass:A.value,showRightArrow:ke.value,clickClose:pe.value,clickableWhenHasChildren:ge.value,shortcut:$e.value,theme:dt,isOpen:Be,hasChildren:Ve,onClick:He,onMouseEnter:qe,closeMenu:Qe}},showSubMenu:Be,keyBoardFocusMenu:te,menuItemRef:se,globalHasSlot:Ne,globalRenderSlot:Ae,globalIconFontClass:de,onMouseEnter:qe,onClick:He}}}),Pt=(0,K.Z)(Ot,[["render",xe]]),yt=Pt;var Wt={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function Ht(m,M,$,U,pe,ge){var oe=(0,e.resolveComponent)("VNodeRender");return m.globalHasSlot("separatorRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("separatorRender",{})}},null,8,["vnode"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",Wt))}const Y=(0,e.defineComponent)({name:"ContextMenuSperator",components:{VNodeRender:w},setup:function(){var m=(0,e.inject)("globalHasSlot"),M=(0,e.inject)("globalRenderSlot");return{globalHasSlot:m,globalRenderSlot:M}}}),B=(0,K.Z)(Y,[["render",Ht]]),ue=B,Te=(0,e.defineComponent)({name:"ContextSubMenu",components:{ContextMenuItem:yt,ContextMenuSeparator:ue,ContextMenuIconRight:Nt},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup:function(m){var M=(0,e.inject)("menuContext"),$=(0,e.inject)("globalOptions"),U=(0,e.inject)("globalHasSlot"),pe=(0,e.inject)("globalRenderSlot"),ge=(0,e.inject)("globalTheme"),oe=M.zIndex,ee=M.getParentWidth,ce=M.getParentHeight,Ie=(0,e.toRefs)(m),A=Ie.adjustPosition,ke=(0,e.ref)(),$e=(0,e.ref)(),Ve=[],Be=(0,e.inject)("globalSetCurrentSubMenu"),te=[],se=null,Ne=0;function Ae(){se&&se.blur()}function dt(H,_e){if(H){for(var et=_e!==void 0?_e:0;et<te.length;et++)if(!te[et].isDisabledOrHidden()){de(et);break}}else for(var pt=_e!==void 0?_e:te.length-1;pt>=0;pt--)if(!te[pt].isDisabledOrHidden()){de(pt);break}}function de(H){if(se&&Ae(),H!==void 0&&(se=te[Math.max(0,Math.min(H,te.length-1))]),se&&(se.focus(),De.value)){var _e=se.getElement();_e&&(He.value=Math.min(Math.max(-qe.value,-_e.offsetTop-_e.offsetHeight+Xe.value),0))}}function Fe(){Be(Je)}var Je={isTopLevel:function(){return M.getParentContext()===null},closeSelfAndActiveParent:function(){var H=We.getParentContext();if(H){H.closeOtherSubMenu();var _e=H.getSubMenuInstanceContext();if(_e)return _e.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:function(){var H;return(H=We.getParentContext())===null||H===void 0?void 0:H.closeOtherSubMenu()},moveCurrentItemFirst:function(){return dt(!0)},moveCurrentItemLast:function(){return dt(!1)},moveCurrentItemDown:function(){return dt(!0,se?te.indexOf(se)+1:0)},moveCurrentItemUp:function(){return dt(!1,se?te.indexOf(se)-1:0)},focusCurrentItem:function(){return de()},openCurrentItemSubMenu:function(){var H;return!!se&&((H=se)===null||H===void 0?void 0:H.showSubMenu())},triggerCurrentItemClick:function(H){var _e;return(_e=se)===null||_e===void 0?void 0:_e.click(H)}},Qe=!1,Re=!1,We={zIndex:oe+1,container:M.container,adjustPadding:$.adjustPadding||c.defaultAdjustPadding,getParentWidth:function(){var H;return((H=ke.value)===null||H===void 0?void 0:H.offsetWidth)||0},getParentHeight:function(){var H;return((H=ke.value)===null||H===void 0?void 0:H.offsetHeight)||0},getParentX:function(){return Me.value.x},getParentY:function(){return Me.value.y},getParentAbsX:function(){return ke.value?d(ke.value,M.container):0},getParentAbsY:function(){return ke.value?u(ke.value,M.container):0},getPositon:function(){return[0,0]},addOpenedSubMenu:function(H){Ve.push(H)},closeOtherSubMenu:function(){Ve.forEach(function(H){return H()}),Ve.splice(0,Ve.length),Be(Je)},checkCloseOtherSubMenuTimeOut:function(){return!!Ne&&(clearTimeout(Ne),Ne=0,!0)},closeOtherSubMenuWithTimeOut:function(){var H=this;Ne=setTimeout(function(){Ne=0,H.closeOtherSubMenu()},200)},addChildMenuItem:function(H,_e){_e===void 0?te.push(H):te.splice(_e,0,H)},removeChildMenuItem:function(H){te.splice(te.indexOf(H),1)},markActiveMenuItem:function(H){var _e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Ae(),se=H,_e&&de()},markThisOpenedByKeyBoard:function(){Qe=!0},isOpenedByKeyBoardFlag:function(){return!!Qe&&(Qe=!1,!0)},isMenuItemDataCollectedFlag:function(){return Re},getElement:function(){return ke.value||null},getParentContext:function(){return M},getSubMenuInstanceContext:function(){return Je}};(0,e.provide)("menuContext",We);var He=(0,e.ref)(0),qe=(0,e.ref)(0);function Le(H){He.value=H?Math.max(He.value-50,-qe.value):Math.min(He.value+50,0)}var De=(0,e.ref)(!1),Me=(0,e.ref)({x:0,y:0}),Xe=(0,e.ref)(0);return(0,e.onMounted)(function(){var H,_e,et,pt,In=M.getPositon();Me.value={x:(H=(_e=In[0])!==null&&_e!==void 0?_e:$.xOffset)!==null&&H!==void 0?H:0,y:(et=(pt=In[1])!==null&&pt!==void 0?pt:$.yOffset)!==null&&et!==void 0?et:0},Be(Je),(0,e.nextTick)(function(){var Pe=ke.value;if(Pe&&$e.value){var Yt,Zt,Jt,Qt,en,tn,Ct=M.container,nn=(Yt=ee==null?void 0:ee())!==null&&Yt!==void 0?Yt:0,Oo=(Zt=ce==null?void 0:ce())!==null&&Zt!==void 0?Zt:0,zt=typeof M.adjustPadding=="number"?M.adjustPadding:(Jt=(Qt=M.adjustPadding)===null||Qt===void 0?void 0:Qt.x)!==null&&Jt!==void 0?Jt:0,Dt=typeof M.adjustPadding=="number"?M.adjustPadding:(en=(tn=M.adjustPadding)===null||tn===void 0?void 0:tn.y)!==null&&en!==void 0?en:0,At=Oo>0?Dt:0,To=document.documentElement.scrollHeight,$o=document.documentElement.scrollWidth,Ro=Math.min($o,Ct.offsetWidth),on=Math.min(To,Ct.offsetHeight),rn=d(Pe,Ct),sn=u(Pe,Ct);m.direction.includes("l")?Me.value.x-=Pe.offsetWidth+zt:m.direction.includes("r")?Me.value.x+=nn+zt:(Me.value.x+=nn/2,Me.value.x-=(Pe.offsetWidth+zt)/2),m.direction.includes("t")?Me.value.y-=Pe.offsetHeight+2*Dt:m.direction.includes("b")?Me.value.y-=Dt:Me.value.y-=(Pe.offsetHeight+Dt)/2,A.value&&(0,e.nextTick)(function(){rn=d(Pe,Ct),sn=u(Pe,Ct);var Lo=rn+Pe.offsetWidth-Ro,Mn=sn+Pe.offsetHeight-on;if(qe.value=Pe.offsetHeight-on-2*At,De.value=Mn>0,Lo>0){var En=nn+Pe.offsetWidth-zt,On=rn;Me.value.x-=En>On?On:En}if(De.value){var Tn=Mn,$n=sn;Me.value.y-=Tn>$n?$n-At:Tn-2*At,Xe.value=on-2*At}else Xe.value=0})}Pe==null||Pe.focus({preventScroll:!0}),M.isOpenedByKeyBoardFlag()&&dt(!0),Re=!0})}),{menu:ke,scroll:$e,options:$,zIndex:oe,constOptions:c,scrollValue:He,overflow:De,position:Me,scrollHeight:qe,maxHeight:Xe,globalHasSlot:U,globalRenderSlot:pe,globalTheme:ge,onScroll:Le,onSubMenuBodyClick:Fe,solveNumberOrStringSize:x}}}),Ce=(0,K.Z)(Te,[["render",Z]]),Tt=Ce,Gt=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},setup:function(m,M){var $,U,pe,ge,oe=(0,e.toRefs)(m),ee=oe.options,ce=oe.show,Ie=oe.container;(0,e.onMounted)(function(){ce&&ke()}),(0,e.onBeforeUnmount)(function(){Be()}),(0,e.watch)(ce,function(de){de?ke():Be()});var A={closeMenu:$e};function ke(){Ve(),r(A)}function $e(de){M.emit("update:show",!1),M.emit("close",de),o(A)}function Ve(){setTimeout(function(){document.addEventListener("click",Ae,!0),document.addEventListener("contextmenu",Ae,!0),document.addEventListener("scroll",Ne,!0),!m.isFullScreenContainer&&Ie.value&&Ie.value.addEventListener("scroll",Ne,!0),ee.value.keyboardControl!==!1&&document.addEventListener("keydown",se)},50)}function Be(){document.removeEventListener("contextmenu",Ae,!0),document.removeEventListener("click",Ae,!0),document.removeEventListener("scroll",Ne,!0),!m.isFullScreenContainer&&Ie.value&&Ie.value.removeEventListener("scroll",Ne,!0),ee.value.keyboardControl!==!1&&document.removeEventListener("keydown",se)}M.expose({closeMenu:$e});var te=(0,e.ref)();function se(de){var Fe,Je,Qe,Re,We,He,qe,Le,De=!0;switch(de.key){case"Escape":var Me,Xe;((Me=te.value)===null||Me===void 0?void 0:Me.isTopLevel())===!1?(Xe=te.value)===null||Xe===void 0||Xe.closeCurrentSubMenu():$e();break;case"ArrowDown":(Fe=te.value)===null||Fe===void 0||Fe.moveCurrentItemDown();break;case"ArrowUp":(Je=te.value)===null||Je===void 0||Je.moveCurrentItemUp();break;case"Home":(Qe=te.value)===null||Qe===void 0||Qe.moveCurrentItemFirst();break;case"End":(Re=te.value)===null||Re===void 0||Re.moveCurrentItemLast();break;case"ArrowLeft":var H,_e,et;(H=te.value)!==null&&H!==void 0&&H.closeSelfAndActiveParent()||(_e=(et=ee.value).onKeyFocusMoveLeft)===null||_e===void 0||_e.call(et);break;case"ArrowRight":(We=te.value)!==null&&We!==void 0&&We.openCurrentItemSubMenu()||(He=(qe=ee.value).onKeyFocusMoveRight)===null||He===void 0||He.call(qe);break;case"Enter":(Le=te.value)===null||Le===void 0||Le.triggerCurrentItemClick(de);break;default:De=!1;break}De&&te.value&&(de.stopPropagation(),de.preventDefault())}function Ne(){ee.value.closeWhenScroll!==!1&&$e()}function Ae(de){dt(de.target)}function dt(de){for(;de;){if(de.classList&&de.classList.contains("mx-menu-host"))return;de=de.parentNode}Be(),$e()}return(0,e.provide)("globalSetCurrentSubMenu",function(de){return te.value=de}),(0,e.provide)("globalOptions",ee.value),(0,e.provide)("globalCloseMenu",$e),(0,e.provide)("globalTheme",(($=ee.value)===null||$===void 0?void 0:$.theme)||"light"),(0,e.provide)("globalIsFullScreenContainer",m.isFullScreenContainer),(0,e.provide)("globalClickCloseClassName",(U=ee.value)===null||U===void 0?void 0:U.clickCloseClassName),(0,e.provide)("globalIgnoreClickClassName",(pe=ee.value)===null||pe===void 0?void 0:pe.ignoreClickClassName),(0,e.provide)("globalIconFontClass",((ge=ee.value)===null||ge===void 0?void 0:ge.iconFontClass)||"iconfont"),(0,e.provide)("globalHasSlot",function(de){return M.slots[de]!==void 0}),(0,e.provide)("globalRenderSlot",function(de,Fe){return(0,e.renderSlot)(M.slots,de,q({},Fe),function(){return[(0,e.h)("span","Render slot failed")]},!1)}),(0,e.provide)("menuContext",{zIndex:ee.value.zIndex||c.defaultZindex,container:Ie.value,adjustPadding:{x:0,y:0},getParentAbsY:function(){return ee.value.x},getParentAbsX:function(){return ee.value.y},getParentX:function(){return 0},getParentY:function(){return 0},getParentWidth:function(){return 0},getParentHeight:function(){return 0},getPositon:function(){return[ee.value.x,ee.value.y]},closeOtherSubMenuWithTimeOut:function(){},checkCloseOtherSubMenuTimeOut:function(){return!1},addOpenedSubMenu:function(){},closeOtherSubMenu:function(){},getParentContext:function(){return null},getSubMenuInstanceContext:function(){return null},getElement:function(){return null},addChildMenuItem:function(){},removeChildMenuItem:function(){},markActiveMenuItem:function(){},markThisOpenedByKeyBoard:function(){},isOpenedByKeyBoardFlag:function(){return!1},isMenuItemDataCollectedFlag:function(){return!1}}),function(){var de,Fe;return ce.value?[(0,e.h)("div",{class:"mx-menu-ghost-host"},[(0,e.h)(Tt,{class:"mx-menu-host",items:(de=ee.value)===null||de===void 0?void 0:de.items,adjustPosition:(Fe=ee.value)===null||Fe===void 0?void 0:Fe.adjustPosition,maxWidth:ee.value.maxWidth||c.defaultMaxWidth,minWidth:ee.value.minWidth||c.defaultMinWidth,direction:ee.value.direction||c.defaultDirection},{default:M.slots.default})])]:[]}}}),Kt=Gt,ve=Kt,at=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup:function(m,M){var $=(0,e.toRefs)(m),U=$.options,pe=$.show;return M.expose({closeMenu:function(){return M.emit("update:show",!1)}}),function(){var ge=I(U.value),oe=ge.isNew,ee=ge.container,ce=ge.eleId,Ie=pe.value?[(0,e.h)(ve,{options:U,show:!0,container:ee,isFullScreenContainer:!oe,"onUpdate:show":function(A){return M.emit("update:show",A)},onClose:function(A){var ke,$e;M.emit("update:show",!1),M.emit("close"),(ke=($e=U.value).onClose)===null||ke===void 0||ke.call($e,A)}},M.slots)]:[];return[(0,e.h)(e.Teleport,{to:"#".concat(ce)},Ie)]}}}),ao=at,Cn=ao;function qt(m){return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},qt(m)}const io=(0,e.defineComponent)({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup:function(m,M){var $=(0,e.inject)("globalOptions"),U=(0,e.toRefs)(m),pe=U.adjustSubMenuPosition,ge=U.maxWidth,oe=U.minWidth,ee=typeof pe.value<"u"?pe.value:$.adjustPosition;return function(){return(0,e.h)(yt,q(q({},m),{},{showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:qt(M.slots.default)!==void 0}),M.slots.default?{submenu:function(){return(0,e.h)(Tt,{maxWidth:ge.value,minWidth:oe.value,adjustPosition:ee},{default:M.slots.default})}}:void 0)}}}),lo=io,wn=lo;function uo(m,M,$,U){var pe=(0,e.h)(ve,{options:m,show:!0,container:M,isFullScreenContainer:!$,onClose:function(ge){var oe;(0,e.render)(null,M),(oe=m.onClose)===null||oe===void 0||oe.call(m,ge)}},U);return(0,e.render)(pe,M),pe.component}function Sn(m,M){var $=I(m),U=uo(m,$.container,$.isNew,M);return U.exposed}const Xt={install:function(m){m.config.globalProperties.$contextmenu=Sn,m.component("ContextMenu",Cn),m.component("ContextMenuItem",yt),m.component("ContextMenuGroup",wn),m.component("ContextMenuSperator",ue),m.component("ContextMenuSeparator",ue),m.component("ContextSubMenu",Tt)},showContextMenu:function(m,M){return Sn(m,M)},closeContextMenu:a,transformMenuPosition:v};var co={key:0,ref:"menuBarContent",class:"mx-menu-bar-content"},po={key:1,ref:"menuBarContent",class:"mx-menu-bar-content"},fo=["onClick","onMouseenter"];function mo(m,M,$,U,pe,ge){var oe,ee=(0,e.resolveComponent)("MenuBarIconMenu");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(["mx-menu-bar",(oe=m.options.theme)!==null&&oe!==void 0?oe:"",m.options.mini?"mini":""]),onFocus:M[1]||(M[1]=function(){return m.onFocus&&m.onFocus.apply(m,arguments)}),onBlur:M[2]||(M[2]=function(){return m.onBlur&&m.onBlur.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"prefix"),m.options.mini?((0,e.openBlock)(),(0,e.createElementBlock)("div",co,[(0,e.createElementVNode)("div",{class:"mx-menu-bar-item",onClick:M[0]||(M[0]=function(ce){return m.onItemClick(0,null)})},[(0,e.createVNode)(ee)])],512)):((0,e.openBlock)(),(0,e.createElementBlock)("div",po,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.menuItems,function(ce,Ie){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:Ie,class:(0,e.normalizeClass)(["mx-menu-bar-item",ce==m.menuActive?"active":""]),onClick:function(A){return m.onItemClick(Ie,ce)},onMouseenter:function(A){return m.onItemEnter(Ie,ce)}},(0,e.toDisplayString)(ce.label),43,fo)}),128))],512)),(0,e.renderSlot)(m.$slots,"suffix")],34)}var vo={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},go=(0,e.createElementVNode)("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),ho=(0,e.createElementVNode)("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),yo=(0,e.createElementVNode)("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1),bo=[go,ho,yo];function _o(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",vo,bo)}const xo={},ko=(0,K.Z)(xo,[["render",_o]]),Co=ko,wo=(0,e.defineComponent)({name:"MenuBar",emits:[],props:{options:{type:Object,default:null}},components:{MenuBarIconMenu:Co},setup:function(m){var M=(0,e.ref)(),$=(0,e.ref)(!1),U=(0,e.ref)([]),pe=(0,e.ref)(null);function ge(){$.value=!0}function oe(){$.value=!1}(0,e.onMounted)(function(){U.value=m.options.items||[]}),(0,e.watch)(function(){return m.options},function(){U.value=m.options.items||[]});var ee=null,ce=-1;function Ie(){ce<U.value.length-1?ce++:ce=0,ke(ce,U.value[ce])}function A(){ce>0?ce--:ce=U.value.length-1,ke(ce,U.value[ce])}function ke(te,se){var Ne;if(ce=te,se.children){ee&&(ee.closeMenu(),ee=null,$.value=!0),pe.value=se;var Ae=(Ne=M.value)===null||Ne===void 0?void 0:Ne.children[te];Ae&&(ee=Xt.showContextMenu(q(q({},m.options),{},{items:se.children,x:d(Ae),y:u(Ae)+Ae.offsetHeight,onKeyFocusMoveLeft:function(){A()},onKeyFocusMoveRight:function(){Ie()},onClose:function(){pe.value==se&&($.value=!1,pe.value=null)}})))}}function $e(){ce=0;var te=M.value;te&&(ee=Xt.showContextMenu(q(q({},m.options),{},{x:d(te),y:u(te)+te.offsetHeight})))}function Ve(te,se){se?($.value=!0,ke(te,se),se.onClick&&(se.clickableWhenHasChildren===!0&&se.children&&se.children.length>0||!se.children||se.children.length===0)&&se.onClick()):$e()}function Be(te,se){$.value&&ke(te,se)}return{menuItems:U,menuActive:pe,menuBarContent:M,menuBarActive:$,onFocus:ge,onBlur:oe,onItemClick:Ve,onItemEnter:Be}}}),So=(0,K.Z)(wo,[["render",mo]]),Io=So,Mo=Xt,Eo=Mo})(),_})())})(Jn);var ze=Jn.exports;const _s=j("span",{class:"icon"},"@",-1),xs=me({__name:"index",props:{uid:{},options:{}},setup(p){var a;const s=p,l=Kn(s.uid),f=(a=kt())==null?void 0:a.userInfo,h=ut(),y=gn(),_=W(()=>y.countInfo),n=W(()=>(f==null?void 0:f.uid)===l.value),i=W(()=>(f==null?void 0:f.power)===Un.ADMIN),e=(c,u)=>ot.emit("onSelectPerson",{uid:c,ignoreCheck:u}),t=async()=>{const c=s.uid;c&&await Ke.blockUser({uid:c}).send()},r=async()=>{h.addFriendModalInfo.show=!0,h.addFriendModalInfo.uid=s.uid},o=async()=>{await Ke.removeGroupMember({uid:s.uid,roomId:h.currentSession.roomId}).send(),y.getGroupUserList(!0)};return(c,u)=>{const d=st,v=vt("login-show"),b=vt("friends");return E(),ie(k(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:J(()=>[we((E(),ie(k(ze.ContextMenuItem),{label:"艾特Ta",onClick:u[0]||(u[0]=g=>e==null?void 0:e(s.uid,!0))},{icon:J(()=>[_s]),_:1})),[[v]]),i.value?(E(),ie(k(ze.ContextMenuItem),{key:0,label:"拉黑(管理)",onClick:t},{icon:J(()=>[R(d,{icon:"lahei",size:13})]),_:1})):ae("",!0),we((E(),ie(k(ze.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:r},{icon:J(()=>[R(d,{icon:"tianjia",size:13})]),_:1})),[[b,l.value]]),[k(dn).LORD,k(dn).ADMIN].includes(_.value.role)&&!n.value?(E(),ie(k(ze.ContextMenuItem),{key:1,vLoginShow:"",label:"剔出群聊",onClick:o},{icon:J(()=>[R(d,{icon:"yichu",size:13})]),_:1})):ae("",!0)]),_:1},8,["options"])}}});const ks=me({__name:"index",props:{user:{}},setup(p){var n;const l=Kn(p.user),f=Ut((n=l.value)==null?void 0:n.uid),h=D(!1),y=D({x:0,y:0}),_=i=>{if(!kt().isSign)return;const{x:e,y:t}=i;y.value.x=e,y.value.y=t,h.value=!0};return(i,e)=>{var r;const t=yn;return E(),L("li",{class:"user-list-item",tabindex:"0",key:l.value.uid,onContextmenu:e[1]||(e[1]=St(o=>_(o),["prevent","stop"]))},[R(t,{src:k(f).avatar,size:24,showStatus:"",online:l.value.activeStatus===k(Go).ONLINE},null,8,["src","online"]),Ue(" "+fe(k(f).name)+" ",1),R(xs,{show:h.value,"onUpdate:show":e[0]||(e[0]=o=>h.value=o),options:y.value,uid:(r=l.value)==null?void 0:r.uid},null,8,["show","options","uid"])],32)}}});const Cs=gt(ks,[["__scopeId","data-v-40783a4b"]]),ws={class:"user-list-box"},Ss={class:"user-list-header"},Is={key:0,class:"list-no-data"},Ms=me({__name:"index",setup(p){const s=D(),l=gn(),f=ut(),h=Vn(),y=W(()=>l.userList),_=W(()=>l.countInfo);ht(()=>{let e;Vt(()=>{e=new IntersectionObserver(async t=>{var r;(r=t==null?void 0:t[0])!=null&&r.isIntersecting&&(await l.loadMore(),s.value&&e.unobserve(s.value),setTimeout(()=>{s.value&&e.observe(s.value)},500))}),s.value&&e.observe(s.value)}),xn(()=>{s.value&&e.unobserve(s.value)})});const n=()=>l.showGroupList=!1,i=()=>{f.createGroupModalInfo.show=!0,f.createGroupModalInfo.isInvite=!0,console.log("cachedStore.currentAtUsersList",h.currentAtUsersList),f.createGroupModalInfo.selectedUid=h.currentAtUsersList.map(e=>e.uid)};return(e,t)=>{var a,c;const r=Hn,o=er;return E(),L("div",ws,[j("div",{class:ye(["user-list-mask",k(l).showGroupList?"show":""]),onClick:n},null,2),j("div",{class:ye(["user-list-wrapper",k(l).showGroupList?"show":""])},[j("div",Ss,[Ue(" 在线人数："+fe(_.value.onlineNum||0)+" ",1),R(r,{type:"primary",icon:k(Ko),circle:"",size:"small",onClick:i},null,8,["icon"])]),we((E(),ie(dr,{tag:"ul",name:"fade",class:"user-list"},{default:J(()=>[(E(!0),L(rt,null,Lt(y.value,u=>(E(),ie(Cs,{key:u.uid,user:u},null,8,["user"]))),128)),j("li",{key:"visible_el",ref_key:"groupListLastElRef",ref:s}," ",512)]),_:1})),[[Ye,(a=y.value)==null?void 0:a.length],[o,k(l).userListOptions.loading,void 0,{lock:!0}]]),((c=y.value)==null?void 0:c.length)===0?(E(),L("div",Is,"暂无成员~")):ae("",!0)],2)])}}});const Es=gt(Ms,[["__scopeId","data-v-3c6ca703"]]),Os={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ts=j("path",{fill:"currentColor",d:"M104.704 338.752a64 64 0 0 1 90.496 0l316.8 316.8l316.8-316.8a64 64 0 0 1 90.496 90.496L557.248 791.296a64 64 0 0 1-90.496 0L104.704 429.248a64 64 0 0 1 0-90.496z"},null,-1),$s=[Ts];function Rs(p,s){return E(),L("svg",Os,$s)}const Ls={name:"ep-arrow-down-bold",render:Rs},js={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Bs=j("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Ns=[Bs];function Ps(p,s){return E(),L("svg",js,Ns)}const zs={name:"ep-loading",render:Ps};var Ds=qo,As=function(){return Ds.Date.now()},Fs=As,Us=/\s/;function Vs(p){for(var s=p.length;s--&&Us.test(p.charAt(s)););return s}var Ws=Vs,Hs=Ws,Gs=/^\s+/;function Ks(p){return p&&p.slice(0,Hs(p)+1).replace(Gs,"")}var qs=Ks,Xs=Xo,Ys=Yo,Zs="[object Symbol]";function Js(p){return typeof p=="symbol"||Ys(p)&&Xs(p)==Zs}var Qs=Js,ea=qs,Nn=hn,ta=Qs,Pn=0/0,na=/^[-+]0x[0-9a-f]+$/i,oa=/^0b[01]+$/i,ra=/^0o[0-7]+$/i,sa=parseInt;function aa(p){if(typeof p=="number")return p;if(ta(p))return Pn;if(Nn(p)){var s=typeof p.valueOf=="function"?p.valueOf():p;p=Nn(s)?s+"":s}if(typeof p!="string")return p===0?p:+p;p=ea(p);var l=oa.test(p);return l||ra.test(p)?sa(p.slice(2),l?2:8):na.test(p)?Pn:+p}var ia=aa,la=hn,un=Fs,zn=ia,ua="Expected a function",ca=Math.max,da=Math.min;function pa(p,s,l){var f,h,y,_,n,i,e=0,t=!1,r=!1,o=!0;if(typeof p!="function")throw new TypeError(ua);s=zn(s)||0,la(l)&&(t=!!l.leading,r="maxWait"in l,y=r?ca(zn(l.maxWait)||0,s):y,o="trailing"in l?!!l.trailing:o);function a(x){var w=f,T=h;return f=h=void 0,e=x,_=p.apply(T,w),_}function c(x){return e=x,n=setTimeout(v,s),t?a(x):_}function u(x){var w=x-i,T=x-e,z=s-w;return r?da(z,y-T):z}function d(x){var w=x-i,T=x-e;return i===void 0||w>=s||w<0||r&&T>=y}function v(){var x=un();if(d(x))return b(x);n=setTimeout(v,u(x))}function b(x){return n=void 0,o&&f?a(x):(f=h=void 0,_)}function g(){n!==void 0&&clearTimeout(n),e=0,f=i=h=n=void 0}function C(){return n===void 0?_:b(un())}function I(){var x=un(),w=d(x);if(f=arguments,h=this,i=x,w){if(n===void 0)return c(i);if(r)return clearTimeout(n),n=setTimeout(v,s),a(i)}return n===void 0&&(n=setTimeout(v,s)),_}return I.cancel=g,I.flush=C,I}var fa=pa,ma=fa,va=hn,ga="Expected a function";function ha(p,s,l){var f=!0,h=!0;if(typeof p!="function")throw new TypeError(ga);return va(l)&&(f="leading"in l?!!l.leading:f,h="trailing"in l?!!l.trailing:h),ma(p,s,{leading:f,maxWait:s,trailing:h})}var ya=ha;const Qn=Cr(ya);class ba{constructor(s,l){an(this,"sizes",new Map);an(this,"offset");this.init(s,l)}init(s,l){this.param=s,this.callUpdate=l,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.lastCalcIndex=0,this.fixedSizeValue=0,this.calcType="INIT",this.offset=0,this.direction="",this.range=Object.create(null),s&&this.checkRange(0,s.keeps-1)}destroy(){this.init(null,null)}getRange(){const s=Object.create(null);return s.start=this.range.start,s.end=this.range.end,s.padFront=this.range.padFront,s.padBehind=this.range.padBehind,s}isBehind(){return this.direction==="BEHIND"}isFront(){return this.direction==="FRONT"}getOffset(s){return(s<1?0:this.getIndexOffset(s))+this.param.slotHeaderSize}updateParam(s,l){this.param&&s in this.param&&(s==="uniqueIds"&&this.sizes.forEach((f,h)=>{l.includes(h)||this.sizes.delete(h)}),this.param[s]=l)}saveSize(s,l){this.sizes.set(s,l),this.calcType==="INIT"?(this.fixedSizeValue=l,this.calcType="FIXED"):this.calcType==="FIXED"&&this.fixedSizeValue!==l&&(this.calcType="DYNAMIC",delete this.fixedSizeValue),this.calcType!=="FIXED"&&typeof this.firstRangeTotalSize<"u"&&(this.sizes.size<Math.min(this.param.keeps,this.param.uniqueIds.length)?(this.firstRangeTotalSize=[...this.sizes.values()].reduce((f,h)=>f+h,0),this.firstRangeAverageSize=Math.round(this.firstRangeTotalSize/this.sizes.size)):delete this.firstRangeTotalSize)}handleDataSourcesChange(){let s=this.range.start;this.isFront()?s=s-2:this.isBehind()&&(s=s+2),s=Math.max(s,0),this.updateRange(this.range.start,this.getEndByStart(s))}handleSlotSizeChange(){this.handleDataSourcesChange()}handleScroll(s){this.direction=s<this.offset?"FRONT":"BEHIND",this.offset=s,this.param&&(this.direction==="FRONT"?this.handleFront():this.direction==="BEHIND"&&this.handleBehind())}handleFront(){const s=this.getScrollOvers();if(s>this.range.start)return;const l=Math.max(s-this.param.buffer,0);this.checkRange(l,this.getEndByStart(l))}handleBehind(){const s=this.getScrollOvers();s<this.range.start+this.param.buffer||this.checkRange(s,this.getEndByStart(s))}getScrollOvers(){const s=this.offset-this.param.slotHeaderSize;if(s<=0)return 0;if(this.isFixedType())return Math.floor(s/this.fixedSizeValue);let l=0,f=0,h=0,y=this.param.uniqueIds.length;for(;l<=y;){if(f=l+Math.floor((y-l)/2),h=this.getIndexOffset(f),h===s)return f;h<s?l=f+1:h>s&&(y=f-1)}return l>0?--l:0}getIndexOffset(s){if(!s)return 0;let l=0,f=0;for(let h=0;h<s;h++)f=this.sizes.get(this.param.uniqueIds[h]),l=l+(typeof f=="number"?f:this.getEstimateSize());return this.lastCalcIndex=Math.max(this.lastCalcIndex,s-1),this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex()),l}isFixedType(){return this.calcType==="FIXED"}getLastIndex(){return this.param.uniqueIds.length-1}checkRange(s,l){const f=this.param.keeps;this.param.uniqueIds.length<=f?(s=0,l=this.getLastIndex()):l-s<f-1&&(s=l-f+1),this.range.start!==s&&this.updateRange(s,l)}updateRange(s,l){this.range.start=s,this.range.end=l,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}getEndByStart(s){const l=s+this.param.keeps-1;return Math.min(l,this.getLastIndex())}getPadFront(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}getPadBehind(){const s=this.range.end,l=this.getLastIndex();return this.isFixedType()?(l-s)*this.fixedSizeValue:this.lastCalcIndex===l?this.getIndexOffset(l)-this.getIndexOffset(s):(l-s)*this.getEstimateSize()}getEstimateSize(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}const _a=me({name:"VirtualListItem",props:{index:{type:Number},source:{type:Object},component:{type:[Object,Function]},uniqueKey:{type:[String,Number]},itemProps:{type:Object,default:()=>{}},dataPropName:{type:String,default:"source"}},emits:["itemResize"],setup(p,{emit:s}){const l=D(null);let f=null;const h=()=>{const{uniqueKey:y}=p,_=l.value?l.value.offsetHeight:0;s("itemResize",y,_)};return ht(()=>{typeof ResizeObserver<"u"&&(f=new ResizeObserver(()=>{h()}),l.value&&f.observe(l.value))}),pr(()=>{h()}),xn(()=>{f&&(f.disconnect(),f=null)}),()=>{const{component:y,index:_,source:n,uniqueKey:i,itemProps:e,dataPropName:t}=p,r={...e,index:_,[t]:n};return R("div",bn({key:i,ref:l},{index:_}),[R(y,r,null)])}}}),eo=me({name:"VirtualList",props:{data:{type:Array,required:!0,default:()=>[]},dataKey:{type:[String,Function],required:!0},item:{type:[Object,Function],required:!0},keeps:{type:Number,default:30},size:{type:Number,default:50},start:{type:Number,default:0},offset:{type:Number,default:0},topThreshold:{type:Number,default:0},bottomThreshold:{type:Number,default:0},itemProps:{type:Object},dataPropName:{type:String,default:"source"}},setup(p,{emit:s,expose:l}){const f=D(null),h=D(),y=D(null);let _;nt(()=>p.data.length,()=>{_.updateParam("uniqueIds",a()),_.handleDataSourcesChange()}),nt(()=>p.keeps,x=>{_.updateParam("keeps",x),_.handleSlotSizeChange()}),nt(()=>p.start,x=>{d(x)}),nt(()=>p.offset,x=>v(x));const n=x=>_.sizes.get(x),i=()=>h.value?Math.ceil(h.value.scrollTop):0,e=()=>{const x="clientHeight";return h.value?Math.ceil(h.value[x]):0},t=()=>{const x="scrollHeight";return h.value?Math.ceil(h.value[x]):0},r=(x,w,T)=>{s("scroll",{offset:x,clientSize:w,scrollSize:T}),_.isFront()&&p.data.length&&x-p.topThreshold<=0?s("totop"):_.isBehind()&&x+w+p.bottomThreshold>=T&&s("tobottom")},o=()=>{const x=i(),w=e(),T=t();x<0||x+w>T+1||!T||(_.handleScroll(x),r(x,w,T))},a=()=>{const{dataKey:x,data:w=[]}=p;return w.map(T=>typeof x=="function"?x(T):T[x])},c=x=>{f.value=x},u=()=>{_=new ba({slotHeaderSize:0,slotFooterSize:0,keeps:p.keeps,estimateSize:p.size,buffer:Math.round(p.keeps/3),uniqueIds:a()},c),f.value=_.getRange()},d=(x,w,T=0)=>{if(x>=p.data.length-1)C();else{const z=_.getOffset(x)-T;v(z,w)}},v=(x,w=!1)=>{h.value&&h.value.scroll({left:0,top:x,behavior:w?"smooth":"auto"})},b=()=>{const x=[],{start:w,end:T}=f.value,{data:z,dataKey:q,item:F,itemProps:Z,dataPropName:V}=p;for(let Q=w;Q<=T;Q++){const le=z[Q];if(le){const O=typeof q=="function"?q(le):le[q];(typeof O=="string"||typeof O=="number")&&x.push(R(_a,{index:Q,uniqueKey:O,source:le,component:F,itemProps:Z,dataPropName:V,onItemResize:g},null))}}return x},g=(x,w)=>{_.saveSize(x,w),s("resized",x,w)},C=x=>{if(y.value){const w=y.value.offsetTop;v(w,x),setTimeout(()=>{i()+e()<t()&&C(x)},3)}},I=()=>_.sizes.size;return fr(()=>{u()}),mr(()=>{v(_.offset)}),ht(()=>{p.start?d(p.start):p.offset&&v(p.offset),s("ok")}),xn(()=>{_.destroy()}),l({scrollToBottom:C,getSizes:I,getSize:n,getOffset:i,getScrollSize:t,getClientSize:e,scrollToOffset:v,scrollToIndex:d}),()=>{const{padFront:x,padBehind:w}=f.value;return R("div",{ref:h,onScroll:o},[R("div",{style:{padding:`${x}px 0px ${w}px`}},[b()]),R("div",{ref:y,style:{width:"100%",height:"0px"}},null)])}}}),xa=p=>{if(p===0||!p)return"0 B";const s=["B","KB","MB","GB","TB"],l=1024,f=Math.floor(Math.log(p)/Math.log(l));return parseFloat((p/Math.pow(l,f)).toFixed(2))+" "+s[f]},to=(p,s,l={maxWidth:200,maxHeight:150})=>{const{maxWidth:f,maxHeight:h}=l;return p<f&&s<h?s:p>s?f/p*s:(p===s||p<s,h)},ka={jpg:"jpg",jpeg:"jpg",png:"jpg",webp:"jpg",mp4:"mp4",mov:"mp4",avi:"mp4",rmvb:"mp4",doc:"doc",docx:"doc",mp3:"mp3",wav:"mp3",aac:"mp3",flac:"mp3",pdf:"pdf",ppt:"ppt",pptx:"ppt",xls:"xls",xlsx:"xls",zip:"zip",rar:"zip","7z":"zip",txt:"txt",log:"log",svg:"svg",sketch:"sketch",exe:"exe",md:"md"},Ca=p=>{if(!p)return"other";const s=p.toLowerCase().split(".").pop();return s&&ka[s]||"other"},Dn=(p,s,l)=>{const{size:f,width:h,height:y,downloadUrl:_,name:n,second:i,tempUrl:e,thumbWidth:t,thumbHeight:r,thumbUrl:o,thumbSize:a}=p,u={size:f,url:l?e:_};let d={};return s===ne.IMAGE?d={...u,width:h,height:y}:s===ne.VOICE?d={...u,second:i}:s===ne.VIDEO?d={...u,thumbWidth:t,thumbHeight:r,thumbUrl:o,thumbSize:a}:s===ne.FILE&&(d={...u,fileName:n,url:_}),{body:d,type:s}},wa=async p=>await(await fetch(p)).blob(),Sa=async(p,s)=>{const l=await wa(p),f=l.type,h=s||Date.now()+"_emoji.png";return new File([l],h,{type:f})},Ia=["src"],Ma=me({__name:"image",props:{body:{}},setup(p){const s=p,l=tr(),f=D(!1),h=D(!0),y=W(()=>{const{width:i,height:e}=s.body;return to(i,e)}),_=()=>{const{width:i,height:e}=s.body;return`width: ${y.value/e*i}px`},n=()=>{h.value=!1,f.value=!0};return(i,e)=>{var r,o;const t=st;return E(),L("div",{class:"image",style:tt({height:y.value+"px"}),onClick:e[1]||(e[1]=a=>{var c;return k(l).show((c=i.body)==null?void 0:c.url)})},[f.value?(E(),L("div",{key:0,class:"image-slot",style:tt(_())},[R(t,{icon:"dazed",size:36,colorful:""}),Ue(" 加载失败 ")],4)):(E(),L(rt,{key:1},[(r=i.body)!=null&&r.url?(E(),L("img",{key:0,src:(o=i.body)==null?void 0:o.url,onClick:e[0]||(e[0]=a=>{var c;return k(l).show((c=i.body)==null?void 0:c.url)}),onError:n},null,40,Ia)):ae("",!0)],64))],4)}}}),Ea={class:"saying"},Oa={class:"num"},Ta=me({__name:"voice",props:{body:{}},setup(p){const s=p,l=nr(),f=W(()=>l.previewUrl===s.body.url&&l.isPlaying);return(h,y)=>{var n;const _=st;return E(),L("div",{class:"voice",onClick:y[0]||(y[0]=i=>k(l).open(h.body.url))},[j("div",Ea,[j("span",{class:ye(["shelter",{play:f.value}])},null,2),R(_,{icon:"saying",size:18})]),j("span",Oa,fe((n=h.body)==null?void 0:n.second)+'"',1)])}}});const $a=()=>{const p=D(0),s=D(!1),{on:l,trigger:f}=bt(),h=n=>{const i=new URL(n).pathname,e=i.lastIndexOf(".");return e===-1?"":i.slice(e+1)},y=n=>{const i=new URL(n).pathname,e=i.lastIndexOf("/");return e===-1?"未知文件":i.slice(e+1)};return{onLoaded:l,downloadFile:(n,i,e)=>{s.value=!0;const t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="blob",t.onprogress=r=>{if(r.lengthComputable){const o=Math.floor(r.loaded/r.total*100);p.value=o}},t.onload=()=>{if(t.status===200){const r=new Blob([t.response],{type:"application/octet-stream"}),o=document.createElement("a");o.href=URL.createObjectURL(r);const a=h(n),c=e||a;if(i)o.download=`${i}${c?".":""}${c}`;else{const u=y(n);o.download=u}o.click(),URL.revokeObjectURL(o.href),f("success")}else f("fail");p.value=0,s.value=!1},t.send()},process:p,isDownloading:s}},Ra=qn("downloadQuenu",()=>{const s=jt([]),l=jt(new Map),f=e=>{s.push(e)},h=e=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},y=()=>{if(!s.length||l.size>=1)return;const e=s.shift();e&&_(e)},_=e=>{const{downloadFile:t,isDownloading:r,process:o,onLoaded:a}=$a(),c=nt(o,()=>{l.set(e,{url:e,isDownloading:r.value,process:o.value})});a(()=>{c(),l.delete(e),y()}),e&&t(e)};return{quenu:s,addQuenuAction:f,removeQuenuAction:h,dequeue:y,downloadObjMap:l,download:e=>{f(e),y()},cancelDownload:e=>{s.includes(e)&&h(e)}}}),La={class:"file"},ja={class:"file-desc"},Ba={class:"file-name"},Na={class:"file-size"},Pa=me({__name:"file",props:{body:{}},setup(p){const s=p,{downloadObjMap:l,download:f,quenu:h,cancelDownload:y}=Ra(),_=()=>{f(s.body.url)},n=()=>{y(s.body.url)},i=W(()=>{var r;return((r=l.get(s.body.url))==null?void 0:r.isDownloading)||!1}),e=W(()=>{var r;return((r=l.get(s.body.url))==null?void 0:r.process)||0}),t=W(()=>h.includes(s.body.url));return(r,o)=>{var v,b,g;const a=st,c=Mt,u=ns,d=Zr;return E(),L("div",La,[R(a,{icon:k(Ca)((v=r.body)==null?void 0:v.fileName),size:32,colorful:""},null,8,["icon"]),j("div",ja,[j("span",Ba,fe(((b=r.body)==null?void 0:b.fileName)||"未知文件"),1),j("span",Na,fe(k(xa)((g=r.body)==null?void 0:g.size)),1)]),t.value?(E(),ie(u,{key:0,class:"mx-1",size:"small",type:"warning",onClick:n},{default:J(()=>[Ue("等待下载 "),R(c,null,{default:J(()=>[R(k(An))]),_:1})]),_:1})):i.value?(E(),ie(d,{key:2,type:"circle",percentage:e.value,width:22,"stroke-width":1,"show-text":!1},null,8,["percentage"])):(E(),ie(a,{key:1,icon:"xiazai",size:22,onClick:_}))])}}}),za=["src"],Da=me({__name:"video",props:{body:{}},setup(p){const s=p,l=or(),f=()=>{const h=s.body.thumbWidth||0,y=s.body.thumbHeight||0;return to(h,y)};return(h,y)=>{const _=st;return E(),L("div",{class:"video",style:tt(`height:${f()}px`),onClick:y[0]||(y[0]=n=>{var i;return k(l).open((i=h.body)==null?void 0:i.url)})},[R(_,{icon:"bofang",size:30}),j("img",{src:h.body.thumbUrl},null,8,za)],4)}}}),Aa={class:"text"},Fa=["onClick"],Ua={key:0,class:"text-card-image-wrapper"},Va=["src"],Wa={class:"text-card-link-content"},Ha={class:"text-card-title ellipsis-1"},Ga={class:"text-card-desc ellipsis-2"},Ka=me({__name:"text",props:{body:{}},setup(p){const s=p,l=s.body.urlContentMap||{},f=Object.keys(l),h=W(()=>{let n=s.body.content||"";n=n.replace(/&nbsp;/g," ");const i=new RegExp(`(@\\S+\\s|${f.join("|")}|\\S+\\s)`,"g");return n.split(i)}),y=n=>{n&&window.open(n.startsWith("http")?n:"//"+n,"_blank")};function _(n){const i=n.target;i&&(i.style.opacity="0")}return(n,i)=>(E(),L("div",Aa,[(E(!0),L(rt,null,Lt(h.value,(e,t)=>(E(),L(rt,null,[e.startsWith("@")&&e.trim()!==""&&e.trim()!=="@"?(E(),L("span",{key:e,class:"text-mention"},fe(e),1)):(E(),L(rt,{key:1},[Ue(fe(e),1)],64)),k(f).includes(e)?(E(),L("div",{key:e+t,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-card",onClick:r=>y(e.trim())},[k(l)[e].image?(E(),L("div",Ua,[j("img",{class:"text-card-image",src:k(l)[e].image,onError:_},null,40,Va)])):ae("",!0),j("div",Wa,[j("span",Ha,fe(k(l)[e].title),1),j("span",Ga,fe(k(l)[e].description),1)])],8,Fa)):ae("",!0)],64))),256))]))}}),qa={class:"image emoji"},Xa={key:0,class:"image-slot"},Ya=["src"],Za=me({__name:"emoji",props:{body:{}},setup(p){const s=D(!1),l=D(!0),f=()=>{l.value=!1,s.value=!0};return(h,y)=>{var n,i;const _=st;return E(),L("div",qa,[s.value?(E(),L("div",Xa,[R(_,{icon:"dazed",size:36,colorful:""}),Ue(" 加载失败 ")])):(E(),L(rt,{key:1},[(n=h.body)!=null&&n.url?(E(),L("img",{key:0,src:(i=h.body)==null?void 0:i.url,onError:f},null,40,Ya)):ae("",!0)],64))])}}}),Ja=me({__name:"index",props:{message:{}},setup(p){const s={[ne.UNKNOWN]:"",[ne.TEXT]:Ka,[ne.RECALL]:"",[ne.SYSTEM]:"",[ne.IMAGE]:Ma,[ne.VOICE]:Ta,[ne.FILE]:Pa,[ne.VIDEO]:Da,[ne.EMOJI]:Za};return(l,f)=>(E(),ie(_n(s[l.message.type]),{body:l.message.body},null,8,["body"]))}}),Qa={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ei=j("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),ti=[ei];function ni(p,s){return E(),L("svg",Qa,ti)}const oi={name:"ep-check",render:ni},no=p=>{const s=W(()=>p.messageMark.userLike===ft.YES),l=W(()=>p.messageMark.userDislike===ft.YES),f=W(()=>p.messageMark.likeCount),h=W(()=>p.messageMark.dislikeCount);return{isLike:s,isDisLike:l,likeCount:f,dislikeCount:h,onLike:async()=>{const n=s.value?wt.Cancel:wt.Confirm;await Ke.markMsg({actType:n,markType:Rn.LIKE,msgId:p.id}).send();const{likeCount:i}=p.messageMark,e=n===wt.Confirm;p.messageMark.userLike=e?ft.YES:ft.NO,p.messageMark.likeCount=e?i+1:i-1,l.value&&(p.messageMark.userDislike=ft.NO,p.messageMark.dislikeCount=h.value-1)},onDisLike:async()=>{const n=l.value?wt.Cancel:wt.Confirm;await Ke.markMsg({actType:n,markType:Rn.DISLIKE,msgId:p.id}).send();const{dislikeCount:i}=p.messageMark,e=n===wt.Confirm;p.messageMark.userDislike=e?ft.YES:ft.NO,p.messageMark.dislikeCount=e?i+1:i-1,s.value&&(p.messageMark.userLike=ft.NO,p.messageMark.likeCount=f.value-1)}}},ri={key:0,class:"msg-option"},si={class:"msg-option-item",title:"回复"},ai={class:"msg-option-item",title:"点赞"},ii={class:"msg-option-item",title:"不喜欢"},li=me({__name:"index",props:{msg:{}},setup(p){const s=p,l=xt(),{isLike:f,isDisLike:h,onLike:y,onDisLike:_}=no(s.msg.message),n=async i=>{i&&(l.currentMsgReply=i,ot.emit("focusMsgInput"))};return(i,e)=>{const t=st,r=vt("login");return i.msg.loading?ae("",!0):(E(),L("div",ri,[j("span",si,[we(R(t,{icon:"reply",size:14},null,512),[[r,()=>n(i.msg)]])]),j("span",ai,[we(R(t,{icon:"like",size:14,class:ye([{"like-active":k(f)}])},null,8,["class"]),[[r,()=>k(y)()]])]),j("span",ii,[we(R(t,{icon:"dislike",size:15,class:ye([{"dislike-active":k(h)}])},null,8,["class"]),[[r,()=>k(_)()]])])]))}}});const ui=gt(li,[["__scopeId","data-v-80260998"]]),ci=p=>new Promise((s,l)=>{try{const f=document.createElement("textarea");f.setAttribute("readonly","readonly"),f.value=p,f.style.zIndex="-1",document.body.appendChild(f),f.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(f),s(p)}catch(f){l(f)}}),di=p=>{const s=document.createElement("canvas"),l=s.getContext("2d"),f=new Image;f.crossOrigin="Anonymous",f.src=p,f.onload=()=>{l&&(s.width=f.width,s.height=f.height,l.clearRect(0,0,l.canvas.width,l.canvas.height),l.drawImage(f,0,0),s.toBlob(async h=>{if(!h)return;const y=[new ClipboardItem({[h.type]:h})];try{await navigator.clipboard.write(y)}catch{}finally{s.remove()}}))}},kn=qn("emoji",()=>{const p=D(!1),s=kt(),l=D([]),f=async()=>{p.value=!0;const _=await Ke.getEmoji({uid:s.userInfo.uid}).send().catch(()=>{p.value=!1});_&&(l.value=_)},h=async _=>{const{uid:n}=s.userInfo;!n||!_||(await Ke.addEmoji({uid:n,expressionUrl:_}).send(),mt.success("添加成功"),await f())},y=async _=>{_&&(await Ke.deleteEmoji({id:_}).send(),await f())};return f(),{emojiList:l,addEmoji:h,getEmojiList:f,deleteEmoji:y}}),oo=()=>{const p=D(!1),s=D(0),l=kn(),f=bt(),h=bt(),y=bt(),_=async(e,t)=>(p.value=!0,new Promise((r,o)=>{const a=new XMLHttpRequest;a.open("PUT",e,!0),a.setRequestHeader("Content-Type",t.type),a.upload.onprogress=c=>{s.value=Math.round(c.loaded/c.total*100)},a.onload=()=>{p.value=!1,a.status===200?(h.trigger(t),r(!0)):(y.trigger(t),o(!1))},a.onerror=()=>{y.trigger(t),o(!1)},a.send(t)})),n=async e=>new Promise(o=>{if(e.type==="image/gif"){o(e);return}const a=new Image,c=URL.createObjectURL(e);a.src=c,a.onload=()=>{const{height:u,width:d}=a;let v,b;d>u?(v=240,b=Math.round(u/d*240)):(b=240,v=Math.round(d/u*240));const g=document.createElement("canvas"),C=g.getContext("2d");g.height=240,g.width=240,C&&(C.clearRect(0,0,240,240),C.fillStyle="rgba(0, 0, 0, 0)",C.fillRect(0,0,240,240),C.drawImage(a,0,0,d,u,(240-v)/2,(240-b)/2,v,b),g.toBlob(I=>{if(!I)return;const x=Date.now()+"_emoji.png",w=new File([I],x,{type:"image/png"});o(w),URL.revokeObjectURL(c)},"image/png",.9))},a.onerror=()=>{URL.revokeObjectURL(c)}}),i=async e=>{const t=await n(e);if(!t)return;const{downloadUrl:r,uploadUrl:o}=await Ke.getUploadUrl({fileName:t.name,scene:"2"}).send();o&&r&&(f.trigger({file:e,downloadUrl:r}),_(o,t).then(a=>{a&&l.addEmoji(r)}))};return{isEmojiUp:p,onStart:f.on,onFail:y.on,onSuccess:h.on,uploadEmoji:i}},pi=me({__name:"index",props:{msg:{},options:{}},setup(p){var c;const s=p,l=kn(),{uploadEmoji:f}=oo(),h=(c=kt())==null?void 0:c.userInfo,y=xt(),_=W(()=>{var u;return((u=s.msg)==null?void 0:u.fromUser.uid)===h.uid}),n=W(()=>(h==null?void 0:h.power)===Un.ADMIN),i=async()=>{const{id:u}=s.msg.message;u&&(await Ke.recallMsg({roomId:1,msgId:u}).send(),y.updateRecallStatus({msgId:u}))},e=async()=>{const{uid:u}=s.msg.fromUser;u&&await Ke.blockUser({uid:u}).send()},t=()=>{var d;const u=s.msg.message;if(u.type===ne.TEXT){const v=(d=u.body)==null?void 0:d.content;ci(v),mt.success("复制成功~")}u.type===ne.IMAGE&&(di(u.body.url),mt.success("复制成功~"))},r=()=>{const{body:u}=s.msg.message,d=u==null?void 0:u.url;if(!d)return;const v=new XMLHttpRequest;v.open("GET",d,!0),v.responseType="blob",v.onreadystatechange=()=>{if(v.status!=200)return mt.error("下载失败~");if(v.readyState===4&&v.status===200){const b=v.response;let g=document.createElement("a");g.href=URL.createObjectURL(b),g.download=u.fileName||"未知文件",g.dispatchEvent(new MouseEvent("click")),g.remove()}},v.send()},o=()=>{const{type:u,body:d}=s.msg.message;u===ne.EMOJI?l.addEmoji(d.url):Sa(d.url).then(v=>{f(v)})},a=()=>y.deleteMsg(s.msg.message.id);return(u,d)=>{const v=st,b=vt("login-show");return E(),ie(k(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:J(()=>[u.msg.message.type===k(ne).TEXT||u.msg.message.type===k(ne).IMAGE?(E(),ie(k(ze.ContextMenuItem),{key:0,label:"复制",onClick:t},{icon:J(()=>[R(v,{icon:"copy",size:13})]),_:1})):ae("",!0),(u.msg.message.type===k(ne).EMOJI||u.msg.message.type===k(ne).IMAGE)&&!_.value&&k(l).emojiList.length<50?(E(),ie(k(ze.ContextMenuItem),{key:1,label:"添加到表情",onClick:o},{icon:J(()=>[R(v,{icon:"aixin",size:13})]),_:1})):ae("",!0),(_.value||n.value)&&!u.msg.loading?(E(),ie(k(ze.ContextMenuItem),{key:2,label:"撤回消息",onClick:i},{icon:J(()=>[R(v,{icon:"chehui",size:14})]),_:1})):ae("",!0),(u.msg.message.type===k(ne).FILE||u.msg.message.type===k(ne).IMAGE)&&!u.msg.loading?(E(),ie(k(ze.ContextMenuItem),{key:3,label:"下载",onClick:r},{icon:J(()=>[R(v,{icon:"xiazai",size:15})]),_:1})):ae("",!0),we(R(k(ze.ContextMenuSeparator),null,null,512),[[b]]),we((E(),ie(k(ze.ContextMenuItem),{label:"删除",onClick:a},{icon:J(()=>[R(v,{icon:"shanchu",size:13})]),_:1})),[[b]]),n.value?(E(),ie(k(ze.ContextMenuItem),{key:4,label:"拉黑(管理)",onClick:e},{icon:J(()=>[R(v,{icon:"lahei",size:13})]),_:1})):ae("",!0)]),_:1},8,["options"])}}});const fi=j("span",{class:"icon"},"@",-1),mi=me({__name:"index",props:{uid:{},options:{}},setup(p){const s=p,l=ut(),f=async()=>{l.addFriendModalInfo.show=!0,l.addFriendModalInfo.uid=s.uid},h=(y,_)=>ot.emit("onSelectPerson",{uid:y,ignoreCheck:_});return(y,_)=>{const n=st,i=vt("login-show"),e=vt("friends");return E(),ie(k(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:J(()=>[we((E(),ie(k(ze.ContextMenuItem),{label:"艾特Ta",onClick:_[0]||(_[0]=t=>h==null?void 0:h(s.uid,!0))},{icon:J(()=>[fi]),_:1})),[[i]]),we((E(),ie(k(ze.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:f},{icon:J(()=>[R(n,{icon:"tianjia",size:13})]),_:1})),[[e,y.uid]])]),_:1},8,["options"])}}});const vi={key:0,class:"send-time-block"},gi={key:1,class:"send-time-block"},hi={class:"chat-item-user-info"},yi=["src"],bi={class:"user-ip"},_i={key:0,class:"send-time"},xi={key:0,class:"chat-item-read-count-text"},ki={class:"ellipsis"},Ci={key:1,class:"extra"},wi=me({inheritAttrs:!1,__name:"index",props:{msg:{},isShowTime:{type:Boolean,default:!0},isShowTimeBlock:{type:Boolean,default:!0},bubbleMode:{default:"spread"},tooltipTrigger:{default:()=>"hover"}},setup(p){const s=p,{message:l,fromUser:f}=Xn(s.msg),h=kt(),y=xt(),_=ut(),n=Ut(f.value.uid),i=W(()=>{var O;return(O=n==null?void 0:n.value)==null?void 0:O.wearingItemId}),e=lr(i),t=W(()=>f.value.uid===(h==null?void 0:h.userInfo.uid)),r=W(()=>({"chat-item":!0,"is-me":t.value,right:t.value&&s.bubbleMode==="spread"||s.bubbleMode==="right"})),o=D(null),a=D(null),c=D(),u=jt({read:0,unread:null}),d=Ft("virtualListRef"),v=D(!1),b=D(!1),g=D({x:0,y:0}),{isLike:C,isDisLike:I,likeCount:x,dislikeCount:w,onLike:T,onDisLike:z}=no(s.msg.message),q=W(()=>[ne.RECALL,ne.SYSTEM].includes(l.value.type)),F=async O=>{var S,P;const{id:N}=O,{reply:re}=O.body;if(!re||!re.canCallback)return;const xe=y.getMsgIndex(re.id);if(xe>-1)(S=d==null?void 0:d.value)==null||S.scrollToIndex(xe,!0,12);else{const G=y.getMsgIndex(N),X=Math.ceil((re.gapCount-G+1)/Ln)*Ln;await y.loadMore(X),setTimeout((P=d==null?void 0:d.value)==null?void 0:P.scrollToIndex(y.getMsgIndex(re.id),!1,12),0)}},Z=O=>{if(!h.isSign)return;const{x:N,y:re}=O;g.value.x=N,g.value.y=re,v.value=!0},V=O=>{if(!h.isSign||t.value)return;const{x:N,y:re}=O;g.value.x=N,g.value.y=re,b.value=!0},Q=D(null);ht(()=>{Vt(()=>{if(o.value&&a.value){const N=o.value.clientWidth,re=a.value.clientWidth;N+150<=re?c.value="right-start":s.msg.message.body.reply?c.value="top-end":c.value="bottom-end"}const O=vr(Q);t.value&&Q&&nt(O,N=>{N?ot.emit("onAddReadCountTask",{msgId:s.msg.message.id}):ot.emit("onRemoveReadCountTask",{msgId:s.msg.message.id})})}),ot.on("onGetReadCount",O=>{const N=O.get(s.msg.message.id);N&&(u.read=N.readCount,u.unread=N.unReadCount)})});const le=O=>{u.unread!==0&&(_.currentReadUnreadList.msgId=O,_.currentReadUnreadList.show=!0)};return(O,N)=>{const re=yn,xe=Wn,S=oi,P=Mt,G=st,X=Ja,K=vt("login");return E(),L(rt,null,[O.isShowTimeBlock&&O.msg.timeBlock?(E(),L("span",vi,fe(O.msg.timeBlock),1)):ae("",!0),q.value?(E(),L("span",gi,fe(k(l).body),1)):ae("",!0),j("div",{ref_key:"msgVisibleEl",ref:Q},[R($t,{name:"remove"},{default:J(()=>{var be,Ee;return[q.value?ae("",!0):(E(),L("div",{key:0,class:ye(r.value)},[R(re,{src:k(n).avatar,onContextmenu:N[0]||(N[0]=St(he=>V(he),["prevent","stop"]))},null,8,["src"]),j("div",{class:"chat-item-box",ref_key:"boxRef",ref:a},[j("div",hi,[R(xe,{effect:"dark",content:(be=k(e))==null?void 0:be.describe,placement:t.value?"top-end":"top-start",teleported:!1},{default:J(()=>{var he,Oe;return[we(j("img",{class:"user-badge",src:(he=k(e))==null?void 0:he.img},null,8,yi),[[Ye,(Oe=k(e))==null?void 0:Oe.img]])]}),_:1},8,["content","placement"]),j("span",{class:"user-name",onContextmenu:N[1]||(N[1]=St(he=>V(he),["prevent","stop"]))},fe(k(n).name),33),j("span",bi,"("+fe(k(n).locPlace||"未知")+")",1),O.isShowTime?(E(),L("span",_i,fe(k(Fn)(O.msg.message.sendTime)),1)):ae("",!0)]),R(xe,{effect:"light","popper-class":"option-tooltip",trigger:O.tooltipTrigger,placement:c.value||"bottom-end",offset:2,"show-arrow":!1,teleported:!1},{content:J(()=>[R(ui,{msg:O.msg},null,8,["msg"])]),default:J(()=>{var he,Oe;return[j("div",{ref_key:"renderMsgRef",ref:o,class:ye(["chat-item-content",{uploading:(he=O.msg)==null?void 0:he.loading}]),onContextmenu:N[3]||(N[3]=St(je=>Z(je),["prevent","stop"]))},[t.value?(E(),L("div",{key:0,onClick:N[2]||(N[2]=je=>le(O.msg.message.id)),class:ye(["chat-item-read-count",{"is-gray":u.unread===0}])},[u.unread!==0?(E(),L("span",xi,fe(u.read),1)):(E(),ie(P,{key:1},{default:J(()=>[R(S)]),_:1}))],2)):ae("",!0),(Oe=O.msg)!=null&&Oe.loading?(E(),ie(G,{key:1,icon:"loading",size:20,spin:""})):ae("",!0),R(X,{message:k(l)},null,8,["message"])],34)]}),_:1},8,["trigger","placement"]),(Ee=k(l).body)!=null&&Ee.reply?(E(),L("div",{key:0,class:ye(["chat-item-reply",{pointer:k(l).body.reply.canCallback}]),onClick:N[4]||(N[4]=he=>F(k(l)))},[k(l).body.reply.canCallback?(E(),ie(G,{key:0,icon:"totop",size:12})):ae("",!0),j("span",ki,fe(k(l).body.reply.username)+": "+fe(k(l).body.reply.body),1)],2)):ae("",!0),k(x)+k(w)>0?(E(),L("div",Ci,[R($t,{name:"fade"},{default:J(()=>[k(x)>0?we((E(),L("span",{key:0,class:ye(["extra-item like",{active:k(C)}])},[R(G,{icon:"like"}),R($t,{name:"count-up",mode:"out-in"},{default:J(()=>[(E(),L("span",{class:"count",key:k(x)},fe(k(x)),1))]),_:1})],2)),[[K,k(T)]]):ae("",!0)]),_:1}),R($t,{name:"fade"},{default:J(()=>[k(w)>0?we((E(),L("span",{key:0,class:ye(["extra-item dlike",{active:k(I)}])},[R(G,{icon:"dislike",size:17}),R($t,{name:"count-up",mode:"out-in"},{default:J(()=>[(E(),L("span",{class:"count",key:k(w)},fe(k(w)),1))]),_:1})],2)),[[K,k(z)]]):ae("",!0)]),_:1})])):ae("",!0)],512)],2))]}),_:1})],512),R(pi,{show:v.value,"onUpdate:show":N[5]||(N[5]=be=>v.value=be),options:g.value,msg:O.msg},null,8,["show","options","msg"]),R(mi,{show:b.value,"onUpdate:show":N[6]||(N[6]=be=>b.value=be),options:g.value,uid:O.msg.fromUser.uid},null,8,["show","options","uid"])],64)}}});const Si={key:2,class:"empty"},Ii=me({__name:"index",setup(p){const s=xt(),l=D(),f=W(()=>s.currentMessageOptions),h=W(()=>s.chatMessageList),y=W(()=>s.currentNewMsgCount),_=()=>{l.value&&(l.value.scrollToBottom(),s.clearNewMsgCount())},n=()=>{var r;l.value.scrollToIndex(h.value.length-(((r=y.value)==null?void 0:r.count)||0)),s.clearNewMsgCount()};Rt("virtualListRef",l),ht(()=>{Vt(()=>{s.chatListToBottomAction=()=>{_()}})});const i=async()=>{var o;if((o=f.value)!=null&&o.isLoading)return;const r=l.value.getSizes();await s.loadMore(),l.value.scrollToIndex(l.value.getSizes()-r)},e=Qn(r=>{const{offset:o,clientSize:a,scrollSize:c}=r;if(!o||!a||!c)return;o+a>=c-a?(y.value&&(y.value.isStart=!1),s.clearNewMsgCount()):y.value&&(y.value.isStart=!0)},100),t=r=>r.message.id;return(r,o)=>{var d,v,b,g,C,I;const a=zs,c=Mt,u=Ls;return E(),L("div",{class:"chat-msg-list",onContextmenu:o[0]||(o[0]=St(()=>{},["prevent"]))},[(d=f.value)!=null&&d.isLoading?(E(),ie(c,{key:0,size:14,class:"loading"},{default:J(()=>[R(a),Ue("消息加载中 ")]),_:1})):ae("",!0),(v=h.value)!=null&&v.length?(E(),ie(k(eo),{key:1,ref_key:"virtualListRef",ref:l,class:"virtual-list scroll-hover",dataPropName:"msg",data:h.value,"data-key":t,item:wi,size:20,onTotop:i,onScroll:k(e),onOk:_},null,8,["data","onScroll"])):ae("",!0),!((b=f.value)!=null&&b.isLoading)&&((g=h.value)==null?void 0:g.length)===0?(E(),L("div",Si,"暂无消息，快来发送第一条消息吧~")):ae("",!0),we(j("span",{class:"new-msgs-tips",onClick:n},[Ue(fe((C=y.value)==null?void 0:C.count)+" 条新消息 ",1),R(c,{size:10},{default:J(()=>[R(u)]),_:1})],512),[[Ye,((I=y.value)==null?void 0:I.count)&&y.value.count>0]])],32)}}});const Mi=gt(Ii,[["__scopeId","data-v-9f52c487"]]),Ei={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Oi=j("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),Ti=j("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),$i=[Oi,Ti];function Ri(p,s){return E(),L("svg",Ei,$i)}const Li={name:"ep-lock",render:Ri};const ji={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Bi=j("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88L259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512L214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Ni=[Bi];function Pi(p,s){return E(),L("svg",ji,Ni)}const zi={name:"ep-close",render:Pi};var Ge=(p=>(p.text="text",p.br="br",p.at="at",p))(Ge||{});const Di=p=>{let s="";const l=[];return p.forEach(f=>{if((f.type===Ge.text||f.type===Ge.br)&&(s+=f.data),f.type===Ge.at){const{uid:h=0,name:y="",avatar:_=""}=f.data;l.push({uid:h,name:y,avatar:_,length:y.length+1,offset:s.length}),s+="@"+y}}),{pureString:s,mentionList:l}},Ai=(p,s)=>{let l=0;const f=[];if(s.length>0){s.forEach(y=>{const{offset:_,length:n}=y,i=p.slice(l,_);i.length>0&&f.push({type:Ge.text,data:i}),f.push({type:Ge.at,data:{uid:y.uid,name:y.name,avatar:y.avatar}}),l=_+n});const h=p.slice(l);h.length>0&&f.push({type:Ge.text,data:h})}else p.length>0&&f.push({type:Ge.text,data:p});return f},cn=()=>{let p=null,s=null;return window.getSelection?(s=window.getSelection(),s&&s.getRangeAt&&s.rangeCount?(p=s.getRangeAt(0),{range:p,selection:s}):null):null},Fi=()=>{const p=window,s=p.document;let l=s.selection,f,h,y,_=0,n=0;if(l)l.type!=="Control"&&(f=l.createRange(),f.collapse(!0),_=f.boundingLeft,n=f.boundingTop);else if(p.getSelection&&(l=p.getSelection(),l.rangeCount&&(f=l.getRangeAt(0).cloneRange(),f.getClientRects&&(f.collapse(!0),h=f.getClientRects(),h.length>0&&(y=h[0]),y&&(_=y.left,n=y.top)),_===0&&n===0||y===void 0))){const i=s.createElement("span");if(i.getClientRects){i.appendChild(s.createTextNode("​")),f.insertNode(i),y=i.getClientRects()[0],_=y.left,n=y.top;const e=i.parentNode;e==null||e.removeChild(i),e==null||e.normalize()}}return{x:_,y:n}},fn=({content:p,selection:s,range:l})=>{if(!(!s||!l||!p)&&s.getRangeAt(0)&&s.rangeCount){l.deleteContents();const f=document.createElement("div"),h=document.createTextNode(p);f.appendChild(h);const y=document.createDocumentFragment();let _,n;for(;_=f.firstChild;)n=y.appendChild(_);if(l.insertNode(y),n){const i=l.cloneRange();if(!i)return;i.setStartAfter(n),i.collapse(!0),s.removeAllRanges(),s.addRange(i)}}},Ui={class:"person-item__name"},Vi=me({__name:"item",props:{item:{},activeIndex:{},index:{},onSelect:{type:Function}},setup(p){const s=p,l=()=>{var f;(f=s.onSelect)==null||f.call(s,s.item.uid)};return(f,h)=>{const y=yn;return E(),L("div",{class:ye(["person-item",{"person-item--active":f.activeIndex===f.index}]),onClick:l},[R(y,{class:"avatar",src:f.item.avatar,size:26},null,8,["src"]),j("div",Ui,fe(f.item.name),1)],2)}}});const Wi=["src"],Hi={class:"dialog-footer"},Gi=me({__name:"index",setup(p){const s=D({url:""}),l=D(),f=D(!1),h=kt(),y=Ft("onChangeMsgType"),_=Ft("onChangeFile");gr(window,"paste",e=>{var t;if(e.preventDefault(),!h.isSign)return!1;if(e.clipboardData&&((t=e.clipboardData.files)!=null&&t.length)){const r=e.clipboardData.files[0];r!=null&&r.type.includes("image")&&(l.value=r)}return!1}),Yn(()=>{l!=null&&l.value?(f.value=!0,s.value={url:URL.createObjectURL(l==null?void 0:l.value)}):f.value=!1});const n=()=>{s.value.url&&URL.revokeObjectURL(s.value.url),l.value=void 0,s.value={url:""}},i=async()=>{l!=null&&l.value&&(y==null||y(ne.IMAGE),await(_==null?void 0:_([l==null?void 0:l.value])),f.value=!1,n())};return(e,t)=>{const r=Hn,o=rr;return E(),ie(o,{class:"image-paste-modal",title:"粘贴图片",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),"close-on-click-modal":!1,center:"",onClose:n},{footer:J(()=>[j("span",Hi,[R(r,{onClick:t[0]||(t[0]=a=>f.value=!1)},{default:J(()=>[Ue("取消")]),_:1}),R(r,{type:"primary",onClick:i},{default:J(()=>[Ue(" 发送 ")]),_:1})])]),default:J(()=>[s.value.url?(E(),L("img",{key:0,src:s.value.url},null,8,Wi)):ae("",!0)]),_:1},8,["modelValue"])}}});const Ki=["text","contenteditable"],qi=me({inheritAttrs:!1,__name:"index",props:{disabled:{type:Boolean,default:!1},modelValue:{default:""},mentions:{default:()=>[]},maxLength:{default:-1},className:{},style:{}},emits:["update:modelValue","change","focus","blur","callBackRefAndRange","send"],setup(p,{expose:s,emit:l}){const f=p,{modelValue:h,mentions:y,maxLength:_,disabled:n}=Xn(f),i=D(),e=D(),t=Vn(),r=ut(),o=D(!1),a=D([]),c=jt({x:0,y:0}),u=D(0),d=D(""),v=D(!1),b=D(null),g=D(""),C=W(()=>r.currentSession.roomId);g.value=h.value;const I=()=>{const S=Ai(h==null?void 0:h.value,y.value);i.value&&(S.forEach(P=>{var G,X;if(P.type===Ge.text){const K=document.createTextNode(P.data);(G=i.value)==null||G.appendChild(K)}if(P.type===Ge.at){const K=document.createElement("button");K.dataset.person=JSON.stringify(P.data),K.textContent=`@${P.data.name}`,K.className="at_member",K.contentEditable="false",K.addEventListener("click",()=>!1,!1),K.tabIndex=0,(X=i.value)==null||X.appendChild(K)}}),v.value=!0)};Yn(()=>{var S;if(h.value&&h.value.length>0&&!v.value&&I(),!(h.value&&h.value.length>0)&&!v.value&&setTimeout(()=>{I()},500),!(h.value&&h.value.length>0)&&v&&i.value)for(;(S=i.value)!=null&&S.firstChild;)i.value.removeChild(i.value.firstChild);g.value=h.value}),nt(d,()=>{a.value=t.filterUsers(d.value)}),nt(C,(S,P)=>{S!==P&&(g.value="",a.value=t.currentAtUsersList)},{immediate:!0}),nt(o,()=>{o.value||(u.value=0)}),nt(o,()=>{if(o.value){const{x:S,y:P}=Fi();if(i.value){const G=i.value.offsetWidth,K=i.value.getBoundingClientRect().left+G,be=300;S+be>K?(c.x=K-be,c.y=P):(c.x=S,c.y=P)}else c.x=S,c.y=P}}),nt(n,S=>{S||setTimeout(()=>{var P;(P=i.value)==null||P.focus()})}),ht(()=>{Vt(()=>{var S;(S=i.value)==null||S.focus()})});const x=()=>{if(i.value){const S=[],P=[].slice.call(i.value.childNodes);P.length>0&&P.forEach(K=>{if(K.nodeName==="#text"){const be=K;be.data&&be.data.length>0&&S.push({type:Ge.text,data:be.data})}if(K.nodeName==="BR"&&S.push({type:Ge.br,data:`
`}),K.nodeName==="BUTTON"){const Ee=JSON.parse(K.dataset.person);S.push({type:Ge.at,data:Ee})}});const{pureString:G,mentionList:X}=Di(S);G.length>0&&G.charAt(G.length-1)===`
`?l("change",G.substring(0,G.length-1),X):l("change",G,X)}},w=()=>{const S=cn();if(!S||!S.range||!S.selection){o.value=!1;return}const P=S.range.endContainer;if(!P||!P.textContent||P.nodeName!=="#text"){o.value=!1;return}const G=P.textContent.slice(0,S.selection.focusOffset),X=/@([^@]*)$/.exec(G);if(X&&X.length>=2){const[,K]=X;if(K&&K.length>20){o.value=!1,d.value="",a.value=[];return}o.value=!0,d.value=K,b.value=S}else d.value="",o.value=!1},T=([S,P],G,X)=>{var K,be;if(G.getRangeAt(0)&&G.rangeCount){if(((be=(K=G.focusNode)==null?void 0:K.parentNode)==null?void 0:be.nodeName)==="BUTTON")return;X.deleteContents();const Ee=document.createElement("div");Ee.appendChild(S),P&&Ee.appendChild(P);const he=document.createDocumentFragment();let Oe,je;for(;Oe=Ee.firstChild;)je=he.appendChild(Oe);X.insertNode(he),je&&(X=X.cloneRange(),X.setStartAfter(je),X.collapse(!0),G.removeAllRanges(),G.addRange(X))}},z=(S,P=!1)=>{var X,K,be,Ee;o.value=!1,(X=e.value)==null||X.scrollToIndex(0);const G=i.value;if(G){G.focus();const he=(K=b==null?void 0:b.value)==null?void 0:K.range;if(!he)return;const Oe=he.endContainer,je=he.endOffset,ct=Oe.nodeValue,Se=/@([^@]*)$/.exec(ct);if(Se&&Se.length>1||P){!P&&(Se!=null&&Se.length)&&(he.setStart(Oe,Se.index),he.setEnd(Oe,je),he.deleteContents());const Ze=document.createElement("button");Ze.dataset.person=JSON.stringify(S),Ze.textContent=`@${S.name}`,Ze.className="at_member",Ze.contentEditable="false",Ze.addEventListener("click",()=>!1,!1),Ze.tabIndex=0;const Et=document.createTextNode(" ");T([Ze,Et],(be=b==null?void 0:b.value)==null?void 0:be.selection,(Ee=b==null?void 0:b.value)==null?void 0:Ee.range)}x()}},q=S=>{S.key==="2"&&S.shiftKey?o.value=!0:w()},F=S=>{if(!e.value)return;let P=0;if(S==="up"){if(P=u.value-1,P<0)return;P<e.value.getOffset()/34&&e.value.scrollToIndex(P)}if(S==="down"){if(P=u.value+1,P>a.value.length+1)return;P>6&&e.value.scrollToIndex(P-6)}u.value=P},Z=S=>{if(_.value&&_.value>0&&S.target.innerText.length>=_.value&&(S.key==="Backspace"||S.key==="Delete"||S.preventDefault()),o.value&&a.value.length>0)S.key==="ArrowDown"&&(S.preventDefault(),F("down")),S.key==="ArrowUp"&&(S.preventDefault(),F("up")),S.key==="Enter"&&(S.preventDefault(),z(a.value[u.value]),V());else{if(S.ctrlKey&&S.key==="Enter"||S.shiftKey&&S.key==="Enter"||S.metaKey&&S.key==="Enter"){S.preventDefault(),le();return}if(S.isComposing)return S.preventDefault();S.key==="Enter"&&(S.preventDefault(),l("send",S))}if(S.ctrlKey||S.metaKey)switch(S.key){case"B":case"2":case"I":case"9":case"U":case"F6":{S.preventDefault();break}}S.key==="Tab"&&(S.preventDefault(),document.execCommand("insertHTML",!1,"  "))},V=()=>{if(i.value){const S=i.value.innerText;g.value=S,l("update:modelValue",S)}x()},Q=()=>{l("blur"),b.value=cn(),l("callBackRefAndRange",i.value,b.value),setTimeout(()=>{var S;o.value=!1,(S=e.value)==null||S.scrollToIndex(0),setTimeout(()=>{d.value=""},0)},300)},le=()=>{const S=cn();!S||!S.range||!S.selection||fn({content:`
`,selection:S.selection,range:S.range})},O=()=>{l("focus"),w()},N=S=>{S.preventDefault();let P;return window.clipboardData&&window.clipboardData.getData?P=window.clipboardData.getData("Text"):S.clipboardData&&S.clipboardData.getData&&(P=S.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,P),!1},re=(S,P=!1)=>{S&&(ot.emit("focusMsgInput"),setTimeout(()=>{const G=t.userCachedList[S];G&&(z==null||z(G,P))},10))};s({input:i,range:b,onSelectPerson:re});const xe=S=>S.uid;return(S,P)=>{var G;return E(),L("div",{class:ye(["input-wrapper",[S.className,S.$attrs.class]]),style:tt([S.style,S.$attrs.style])},[j("div",bn({ref_key:"editorRef",ref:i},S.$attrs,{class:"input",id:"at-mentions-input",text:S.modelValue,contenteditable:!k(n),onInput:V,onKeyup:q,onKeydown:Z,onBlur:Q,onFocus:O,onMouseup:w,onPaste:N}),null,16,Ki),we(j("div",{className:"at-mentions__dialog",style:tt({top:`${c.y-14}px`,left:`${c.x||0}px`})},[(G=a.value)!=null&&G.length?(E(),ie(k(eo),{key:0,ref_key:"scrollRef",ref:e,class:"person-wrapper",dataPropName:"item",itemProps:{activeIndex:u.value,onSelect:re},data:a.value,"data-key":xe,item:Vi,size:20},null,8,["itemProps","data"])):ae("",!0)],4),[[Ye,o.value]]),R(Gi)],6)}}});const Xi=gt(qi,[["__scopeId","data-v-84756aeb"]]),Yi=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","😏","😒","😞","😔","😟","😕","🙁","😣","😖","😫","😩","😢","😭","😮","💨","😤","😠","😡","🤬","🤯","😳","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","🌫️","😐","😑","😬","🙄","😯","😦","😧","😮","😲","😴","🤤","😪","😵","💫","🤐","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🐶"],ro=100,Zi=ro*1024*1024,Ji=()=>{const p=D(!1),s=D(0),l=D(null),{on:f,trigger:h}=bt(),y=bt(),_=async(o,a,c)=>{p.value=!0;const u=new XMLHttpRequest;u.open("PUT",o,!0),u.setRequestHeader("Content-Type",a.type),u.upload.onprogress=function(d){c||(s.value=Math.round(d.loaded/d.total*100))},u.onload=function(){p.value=!1,!c&&(u.status===200?h("success"):h("fail"))},u.send(a)},n=o=>new Promise((a,c)=>{const u=document.createElement("video"),d=URL.createObjectURL(o);u.src=d,u.crossOrigin="anonymous",u.currentTime=2,u.oncanplay=()=>{var b;const v=document.createElement("canvas");v.width=u.videoWidth,v.height=u.videoHeight,(b=v.getContext("2d"))==null||b.drawImage(u,0,0,v.width,v.height),v.toBlob(g=>{if(!g)return;const C=Date.now()+"thumb.jpg",I=new File([g],C,{type:"image/jpeg"});Ke.getUploadUrl({fileName:C,scene:"1"}).send().then(x=>{if(x.uploadUrl&&x.downloadUrl){_(x.uploadUrl,I,!0);const w=setInterval(()=>{p.value||(clearInterval(w),a({thumbWidth:v.width,thumbHeight:v.height,thumbUrl:x.downloadUrl,thumbSize:I.size,tempUrl:d}))})}})})},u.onerror=function(){URL.revokeObjectURL(d),c({width:0,height:0,url:null})}}),i=o=>{const a=new Image,c=URL.createObjectURL(o);return a.src=c,new Promise((u,d)=>{a.onload=function(){u({width:a.width,height:a.height,tempUrl:c})},a.onerror=function(){URL.revokeObjectURL(c),d({width:0,height:0,url:null})}})},e=o=>new Promise((a,c)=>{const u=new Audio,d=URL.createObjectURL(o);u.src=d,(async()=>{for(;isNaN(u.duration)||u.duration===1/0;)await new Promise(g=>setTimeout(g,100)),u.currentTime=1e5*Math.random();const b=Math.round(u.duration||0);a({second:b,tempUrl:d})})(),u.onerror=function(){c({second:0,tempUrl:d})}}),t=async(o,a={})=>{var g;const{name:c,size:u,type:d}=o,v=((g=c.split(".").pop())==null?void 0:g.trim().toLowerCase())||"",b={name:c,size:u,type:d,suffix:v,...a};if(d.includes("image")){const{width:C,height:I,tempUrl:x}=await i(o);return{...b,width:C,height:I,tempUrl:x}}if(d.includes("audio")){const{second:C,tempUrl:I}=await e(o);return{second:C,tempUrl:I,...b}}if(d.includes("video")){const{thumbWidth:C,thumbHeight:I,tempUrl:x,thumbTempUrl:w,thumbUrl:T,thumbSize:z}=await n(o);return{...b,thumbWidth:C,thumbHeight:I,tempUrl:x,thumbTempUrl:w,thumbUrl:T,thumbSize:z}}return b},r=async(o,a)=>{if(p.value||!o)return;const c=await t(o,a);if(c.size>Zi){mt.warning(`文件不得大于 ${ro} MB`);return}const{downloadUrl:u,uploadUrl:d}=await Ke.getUploadUrl({fileName:c.name,scene:"1"}).send();d&&u?(l.value={...c,downloadUrl:u},y.trigger(l),_(d,o)):h("fail")};return{fileInfo:l,isUploading:p,progress:s,onStart:y.on,onChange:f,uploadFile:r}},Qi=()=>{const p=D(!1),s=D(null),l=D(0),f=D(null),h=bt(),{isSupported:y,stream:_,start:n,stop:i}=hr({constraints:{audio:!0}}),e=()=>{p.value=!1,l.value=0,f.value=null,s.value&&clearInterval(s.value)},t=async()=>{if(!y.value){mt.warning("当前环境不支持录音");return}if(e(),await n(),!_.value)return;f.value=new MediaRecorder(_.value),f.value.start(),p.value=!0,s.value=setInterval(()=>{l.value++,l.value>=59&&r()},1e3);const o=[];f.value.addEventListener("dataavailable",a=>{o.push(a.data)}),f.value.addEventListener("stop",()=>{s.value&&clearInterval(s.value);const a=new Blob(o,{type:"audio/wav"}),c=new File([a],`${Date.now()}.wav`,{type:"audio/wav"});if(l.value<2){mt.warning("录制时间太短");return}h.trigger(c),e()})},r=()=>{f.value&&(f.value.stop(),i())};return{isRecording:p,second:l,start:t,stop:r,reset:e,onEnd:h.on}},el=()=>{const p=ut(),s=W(()=>JSON.parse(localStorage.getItem("USER_INFO")||"{}")),l=W(()=>p.currentSession.roomId);return{mockMessage:(h,y,_)=>{const n=Date.now(),i=Math.floor(Math.random()*15),e=Number(String(n).slice(-7)+i),t=h===1?y.content:null,{uid:r,name:o,avatar:a}=s.value;return{fromUser:{username:o,uid:r,avatar:a,locPlace:"XX"},message:{id:e,roomId:l.value,sendTime:Number(n),content:t,urlContentMap:{},type:h,body:y,messageMark:{likeCount:0,userLike:0,dislikeCount:0,userDislike:0,..._}},sendTime:String(n),loading:!0}}}},so=p=>(br("data-v-cf0dabe3"),p=p(),_r(),p),tl={class:"chat-edit"},nl={class:"reply-msg-wrapper"},ol={class:"msg-input"},rl={class:"recorded-tips"},sl={class:"emoji-panel"},al={class:"emoji-panel-content"},il={class:"emoji-list"},ll={class:"emoji-panel-content"},ul=["onClick","onContextmenu"],cl=["src"],dl={key:1,class:"item-add"},pl={class:"footer"},fl=so(()=>j("div",{class:"divider"},null,-1)),ml=so(()=>j("span",{class:"tips-text"},"登录",-1)),vl={key:1,class:"tips"},gl=me({__name:"index",setup(p){const s=sr(),l=xt(),f=ut(),h=D(!1),y=D(""),_=D(),n=D([]),i=D(!1),e=D(!1),t=D(0),r=D(!1),o=D(ne.FILE),a=D(0),c=D(!1),u=D(-1),d=()=>{setTimeout(()=>{var B,ue,Te,Ce;if(!_.value)return;(ue=(B=_.value)==null?void 0:B.focus)==null||ue.call(B);const Y=(Ce=(Te=_.value)==null?void 0:Te.range)==null?void 0:Ce.selection;Y==null||Y.selectAllChildren(_.value.input),Y==null||Y.collapseToEnd()})},v=({uid:Y,ignoreCheck:B})=>{var ue,Te;(Te=(ue=_.value)==null?void 0:ue.onSelectPerson)==null||Te.call(ue,Y,B),i.value=!1};ht(()=>{ot.on("onSelectPerson",v),ot.on("focusMsgInput",d)}),Gn(()=>{ot.off("onSelectPerson",v),ot.off("focusMsgInput",d)});const b=(Y,B)=>{Ke.sendMsg({roomId:f.currentSession.roomId,msgType:Y,body:B}).send().then(ue=>{ue.message.type===ne.TEXT?l.pushMsg(ue):l.updateMsg(t.value,ue),y.value="",le(),l.getSessionList(!0)}).finally(()=>{var ue;h.value=!1,d(),(ue=l.chatListToBottomAction)==null||ue.call(l)})},g=()=>{var Y,B;!((Y=y.value)!=null&&Y.trim().length)||h.value||(h.value=!0,b(ne.TEXT,{content:y.value,replyMsgId:(B=z.value.message)==null?void 0:B.id,atUidList:n.value.map(ue=>ue.uid)}))},C=Zo(),I=kt(),x=kn(),w=gn(),T=W(()=>I.isSign),z=W(()=>I.isSign&&l.currentMsgReply||{}),q=W(()=>{var Y;return(Y=z==null?void 0:z.value.fromUser)==null?void 0:Y.uid}),F=Ut(q),Z=W(()=>x.emojiList),V=W(()=>w.countInfo.role===dn.REMOVED),Q=()=>{var ue,Te,Ce;const Y=F==null?void 0:F.value.name,B=(ue=z==null?void 0:z.value.message)==null?void 0:ue.type;return Zn(Y,B,(Ce=(Te=z==null?void 0:z.value.message)==null?void 0:Te.body)==null?void 0:Ce.content)},le=()=>l.currentMsgReply={},O=Y=>{var Te,Ce;const B=(Te=_.value)==null?void 0:Te.input,ue=(Ce=_.value)==null?void 0:Ce.range;!B||!ue||(fn({content:Y,...ue}),y.value=B.innerText,r.value=!1,d())},N=(Y,B)=>{n.value=B},re=jt({multiple:!1,accept:".jpg,.png"}),{open:xe,reset:S,onChange:P}=yr(re),{isUploading:G,fileInfo:X,uploadFile:K,onStart:be,onChange:Ee}=Ji(),{uploadEmoji:he,isEmojiUp:Oe}=oo(),{isRecording:je,start:ct,stop:Se,onEnd:Ze,second:Et}=Qi(),{mockMessage:Nt}=el(),Ot=(Y,B=!1)=>{Y==="img"&&(o.value=ne.IMAGE,re.accept=".jpg,.png,.gif,.jpeg,.webp"),Y==="file"&&(o.value=ne.FILE,re.accept="*"),c.value=B,xe()},Pt=async Y=>{if(!(Y!=null&&Y.length))return;const B=Y[0];if(o.value===ne.IMAGE&&!B.type.includes("image"))return mt.error("请选择图片文件");c.value?await he(B):await K(B)};Rt("onChangeFile",Pt),Rt("onChangeMsgType",Y=>{o.value=Y}),P(Pt),be(()=>{var Te;if(!X.value)return;X.value.type.includes("video")&&(o.value=ne.VIDEO);const{type:Y,body:B}=Dn(X.value,o.value,!0),ue=Nt(Y,B);t.value=ue.message.id,l.pushMsg(ue),(Te=l.chatListToBottomAction)==null||Te.call(l)}),Ee(Y=>{if(Y==="success"){if(!X.value)return;const{body:B,type:ue}=Dn(X.value,o.value);b(ue,B)}S()}),Ze(Y=>K(Y));const yt=()=>{o.value=ne.VOICE,ct()},Wt=(Y,B)=>{Y.preventDefault(),u.value=u.value===B?-1:B},Ht=Qn(Y=>{b(ne.EMOJI,{url:Y}),r.value=!1},1e3);return(Y,B)=>{const ue=zi,Te=Mt,Ce=st,Tt=Fr,Gt=Li,Kt=vt("login");return E(),L("div",tl,[we(j("div",nl,[j("span",null,fe(Q()),1),R(Te,{class:"reply-msg-icon",size:14,onClick:le},{default:J(()=>[R(ue)]),_:1})],512),[[Ye,Object.keys(z.value).length]]),j("div",ol,[j("div",{class:"action",onClick:B[0]||(B[0]=ve=>i.value=!i.value)},[we(R(Ce,{icon:"voice",class:"audio"},null,512),[[Ye,!i.value]]),we(R(Ce,{icon:"jianpan"},null,512),[[Ye,i.value]])]),we(j("div",{class:"recorded",onMousedown:B[1]||(B[1]=ve=>yt()),onMouseup:B[2]||(B[2]=ve=>k(Se)()),onTouchstartPassive:B[3]||(B[3]=ve=>yt()),onTouchendPassive:B[4]||(B[4]=ve=>k(Se)())},[j("div",rl,fe(k(je)?`录制中 ${k(Et)}s`:"按住说话"),1)],544),[[Ye,i.value]]),we(R(Xi,{class:"m-input",modelValue:y.value,"onUpdate:modelValue":B[5]||(B[5]=ve=>y.value=ve),ref_key:"mentionRef",ref:_,autofocus:"",tabindex:!T.value||h.value,disabled:!T.value||h.value,placeholder:T.value?h.value?"消息发送中":"来聊点什么吧~":"",mentions:n.value,onChange:N,onSend:g},null,8,["modelValue","tabindex","disabled","placeholder","mentions"]),[[Ye,!i.value]]),R(Tt,{placement:"top",effect:"dark",title:"",visible:r.value,"onUpdate:visible":B[11]||(B[11]=ve=>r.value=ve),"popper-class":"emoji-warpper","show-arrow":!1,width:k(s)==="PC"?385:"95%",trigger:"click"},{reference:J(()=>[j("div",{class:"action",onMouseover:B[6]||(B[6]=ve=>e.value=!0),onMouseleave:B[7]||(B[7]=ve=>e.value=!1)},[e.value?(E(),ie(Ce,{key:0,icon:"shocked",size:18,colorful:""})):(E(),ie(Ce,{key:1,icon:"happy1",size:18,colorful:""}))],32)]),default:J(()=>[j("div",sl,[we(j("div",al,[j("ul",il,[(E(!0),L(rt,null,Lt(k(Yi),(ve,at)=>we((E(),L("li",{class:"emoji-item",key:at},[Ue(fe(ve),1)])),[[Kt,()=>O(ve)]])),128))])],512),[[Ye,a.value===0]]),we(j("div",ll,[(E(!0),L(rt,null,Lt(Z.value,ve=>(E(),L("div",{key:ve.id,class:"item",onClick:at=>k(Ht)(ve.expressionUrl),onContextmenu:at=>Wt(at,ve.id)},[j("img",{src:ve.expressionUrl},null,8,cl),ve.id===u.value?(E(),ie(Ce,{key:0,icon:"guanbi1",class:"del",onClick:St(at=>k(x).deleteEmoji(ve.id),["stop"])},null,8,["onClick"])):ae("",!0)],40,ul))),128)),Z.value.length<50&&!k(Oe)?(E(),ie(Ce,{key:0,class:"cursor-pointer item-add",icon:"tianjia",size:30,onClick:B[8]||(B[8]=ve=>Ot("img",!0))})):(E(),L("div",dl,[R(Ce,{icon:"loading",spin:"",size:30})]))],512),[[Ye,a.value===1]]),j("div",pl,[R(Ce,{class:ye(["cursor-pointer","footer-act",{active:a.value===0}]),icon:"biaoqing",size:18,onClick:B[9]||(B[9]=ve=>a.value=0)},null,8,["class"]),R(Ce,{class:ye(["cursor-pointer","footer-act",{active:a.value===1}]),icon:"aixin",size:18,onClick:B[10]||(B[10]=ve=>a.value=1)},null,8,["class"])])])]),_:1},8,["visible","width"]),R(Ce,{class:"action",icon:"at",size:20,colorful:"",onClick:B[12]||(B[12]=ve=>{var at;return k(fn)({content:"@",...(at=_.value)==null?void 0:at.range})})}),R(Ce,{class:ye(["action",{disabled:k(G)}]),icon:"tupian",size:18,colorful:"",onClick:B[13]||(B[13]=ve=>Ot("img"))},null,8,["class"]),R(Ce,{class:"action",icon:"wenjianjia2",size:20,colorful:"",onClick:B[14]||(B[14]=ve=>Ot("file"))}),fl,j("div",{class:ye(["action",{"is-edit":y.value.length,disabled:!y.value.length}]),onClick:g},[R(Ce,{class:"send",icon:"huojian",size:20})],2)]),T.value?ae("",!0):(E(),L("span",{key:0,class:"tips",onClick:B[15]||(B[15]=ve=>k(C).showLogin=!0)},[R(Te,{class:"icon-lock"},{default:J(()=>[R(Gt)]),_:1}),Ue(" 点我"),ml,Ue("之后再发言~ ")])),T.value&&V.value?(E(),L("span",vl," 您已被踢出群聊，无法再发送消息 ")):ae("",!0)])}}});const hl=gt(gl,[["__scopeId","data-v-cf0dabe3"]]),yl={class:"chat-box"},bl={class:"chat-wrapper"},_l={key:1,class:"chat"},xl=me({__name:"index",setup(p){const s=D(!1),l=ut(),f=W(()=>l.currentSession);return(h,y)=>{const _=ys,n=Mt;return E(),L("div",yl,[j("div",bl,[s.value?(E(),ie(n,{key:0,size:160,color:"var(--font-light)"},{default:J(()=>[R(_)]),_:1})):(E(),L("div",_l,[R(Mi),R(hl)]))]),we(R(Es,null,null,512),[[Ye,f.value.type===k(Jo).Group]])])}}});const kl=gt(xl,[["__scopeId","data-v-18afe9df"]]),Tl=me({__name:"index",setup(p){const s=xt(),l=ut();return s.getSessionList(),l.unReadMark.newMsgUnreadCount=0,(f,h)=>(E(),L(rt,null,[R(ps),R(kl)],64))}});export{Tl as default};

var Bo=Object.defineProperty;var No=(p,s,l)=>s in p?Bo(p,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[s]=l;var an=(p,s,l)=>(No(p,typeof s!="symbol"?s+"":s,l),l);import{_ as Bt,m as Mt,x as ut,aj as Po,s as zo,u as mn,ak as Do,al as Ao,w as vn,am as Fo,an as Uo,ao as Vo,ap as Wo,F as Fn,E as Et,aq as Ho,ar as ne,as as kt,ac as ct,at as Un,ad as Go,a0 as ht,a1 as Ct,ab as gn,au as dn,av as Vn,aw as rt,a4 as qe,ax as Ko,a2 as Wn,V as qo,ay as Xo,az as Yo,aA as Zo,aB as hn,a5 as mt,aC as St,aD as Rn,aa as vt,aE as Ln,Z as Jo,ag as Qo}from"./index-3cb603ff.js";import{d as pn,e as lt,b as Hn,a as er,v as tr,u as nr,f as or,c as rr,E as sr,j as ar}from"./preview-51962ac0.js";import{I as ir}from"./types-c26e2409.js";import{b as lr,h as Ut,g as at,_ as yn,E as Gn,j as ur}from"./useCached-198e8072.js";import{z as me,A as xt,r as D,y as Rt,t as Ft,e as yt,u as x,ag as Kn,v as W,k as E,J as ie,D as X,l as L,F as ve,G as ue,L as re,a2 as Fe,B as bn,R as cr,h as jn,m as j,K as nt,M as _n,O as st,a8 as Lt,C as $,ah as dr,ai as qn,af as gt,E as Se,P as It,n as Vt,o as xn,H as Ze,aj as pr,aa as fr,w as ot,ak as mr,al as vr,am as _t,U as Xn,V as jt,a5 as Yn,an as gr,ae as Bn,T as pt,ao as hr,a as Zn,ap as yr,aq as br,ac as _r,ad as xr}from"./vue-10c5e9a4.js";import{a as kr,c as Cr,g as wr}from"./xgplayer-2fc91dd5.js";const Sr=me({inheritAttrs:!1});function Ir(p,s,l,f,h,y){return xt(p.$slots,"default")}var Mr=Bt(Sr,[["render",Ir],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Er=me({name:"ElCollectionItem",inheritAttrs:!1});function Or(p,s,l,f,h,y){return xt(p.$slots,"default")}var Tr=Bt(Er,[["render",Or],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const $r="data-el-collection-item",Rr=p=>{const s=`El${p}Collection`,l=`${s}Item`,f=Symbol(s),h=Symbol(l),y={...Mr,name:s,setup(){const n=D(null),i=new Map;Rt(f,{itemMap:i,getItems:()=>{const t=x(n);if(!t)return[];const r=Array.from(t.querySelectorAll(`[${$r}]`));return[...i.values()].sort((a,c)=>r.indexOf(a.ref)-r.indexOf(c.ref))},collectionRef:n})}},k={...Tr,name:l,setup(n,{attrs:i}){const e=D(null),t=Ft(f,void 0);Rt(h,{collectionItemRef:e}),yt(()=>{const r=x(e);r&&t.itemMap.set(r,{ref:r,...i})}),Kn(()=>{const r=x(e);t.itemMap.delete(r)})}};return{COLLECTION_INJECTION_KEY:f,COLLECTION_ITEM_INJECTION_KEY:h,ElCollection:y,ElCollectionItem:k}},ln=Mt({trigger:pn.trigger,effect:{...lt.effect,default:"light"},type:{type:ut(String)},placement:{type:ut(String),default:"bottom"},popperOptions:{type:ut(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:ut([Number,String]),default:0},maxHeight:{type:ut([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:ut(Object)},teleported:lt.teleported});Mt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Po}});Mt({onKeydown:{type:ut(Function)}});Rr("Dropdown");const Lr=Mt({trigger:pn.trigger,placement:ln.placement,disabled:pn.disabled,visible:lt.visible,transition:lt.transition,popperOptions:ln.popperOptions,tabindex:ln.tabindex,content:lt.content,popperStyle:lt.popperStyle,popperClass:lt.popperClass,enterable:{...lt.enterable,default:!0},effect:{...lt.effect,default:"light"},teleported:lt.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),jr={"update:visible":p=>zo(p),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Br="onUpdate:visible",Nr=me({name:"ElPopover"}),Pr=me({...Nr,props:Lr,emits:jr,setup(p,{expose:s,emit:l}){const f=p,h=W(()=>f[Br]),y=mn("popover"),k=D(),n=W(()=>{var d;return(d=x(k))==null?void 0:d.popperRef}),i=W(()=>[{width:Do(f.width)},f.popperStyle]),e=W(()=>[y.b(),f.popperClass,{[y.m("plain")]:!!f.content}]),t=W(()=>f.transition===`${y.namespace.value}-fade-in-linear`),r=()=>{var d;(d=k.value)==null||d.hide()},o=()=>{l("before-enter")},a=()=>{l("before-leave")},c=()=>{l("after-enter")},u=()=>{l("update:visible",!1),l("after-leave")};return s({popperRef:n,hide:r}),(d,v)=>(E(),ie(x(Hn),bn({ref_key:"tooltipRef",ref:k},d.$attrs,{trigger:d.trigger,placement:d.placement,disabled:d.disabled,visible:d.visible,transition:d.transition,"popper-options":d.popperOptions,tabindex:d.tabindex,content:d.content,offset:d.offset,"show-after":d.showAfter,"hide-after":d.hideAfter,"auto-close":d.autoClose,"show-arrow":d.showArrow,"aria-label":d.title,effect:d.effect,enterable:d.enterable,"popper-class":x(e),"popper-style":x(i),teleported:d.teleported,persistent:d.persistent,"gpu-acceleration":x(t),"onUpdate:visible":x(h),onBeforeShow:o,onBeforeHide:a,onShow:c,onHide:u}),{content:X(()=>[d.title?(E(),L("div",{key:0,class:ve(x(y).e("title")),role:"title"},ue(d.title),3)):re("v-if",!0),xt(d.$slots,"default",{},()=>[Fe(ue(d.content),1)])]),default:X(()=>[d.$slots.reference?xt(d.$slots,"reference",{key:0}):re("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var zr=Bt(Pr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const Nn=(p,s)=>{const l=s.arg||s.value,f=l==null?void 0:l.popperRef;f&&(f.triggerRef=p)};var Dr={mounted(p,s){Nn(p,s)},updated(p,s){Nn(p,s)}};const Ar="popover",Fr=Ao(Dr,Ar),Ur=vn(zr,{directive:Fr}),Vr=Mt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:p=>p>=0&&p<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:ut(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:ut([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:ut(Function),default:p=>`${p}%`}}),Wr=["aria-valuenow"],Hr={viewBox:"0 0 100 100"},Gr=["d","stroke","stroke-linecap","stroke-width"],Kr=["d","stroke","opacity","stroke-linecap","stroke-width"],qr={key:0},Xr=me({name:"ElProgress"}),Yr=me({...Xr,props:Vr,setup(p){const s=p,l={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},f=mn("progress"),h=W(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:b(s.percentage)})),y=W(()=>(s.strokeWidth/s.width*100).toFixed(1)),k=W(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(y.value)/2}`,10):0),n=W(()=>{const g=k.value,w=s.type==="dashboard";return`
          M 50 50
          m 0 ${w?"":"-"}${g}
          a ${g} ${g} 0 1 1 0 ${w?"-":""}${g*2}
          a ${g} ${g} 0 1 1 0 ${w?"":"-"}${g*2}
          `}),i=W(()=>2*Math.PI*k.value),e=W(()=>s.type==="dashboard"?.75:1),t=W(()=>`${-1*i.value*(1-e.value)/2}px`),r=W(()=>({strokeDasharray:`${i.value*e.value}px, ${i.value}px`,strokeDashoffset:t.value})),o=W(()=>({strokeDasharray:`${i.value*e.value*(s.percentage/100)}px, ${i.value}px`,strokeDashoffset:t.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),a=W(()=>{let g;return s.color?g=b(s.percentage):g=l[s.status]||l.default,g}),c=W(()=>s.status==="warning"?Fo:s.type==="line"?s.status==="success"?Uo:Vo:s.status==="success"?Wo:Fn),u=W(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),d=W(()=>s.format(s.percentage));function v(g){const w=100/g.length;return g.map((_,C)=>jn(_)?{color:_,percentage:(C+1)*w}:_).sort((_,C)=>_.percentage-C.percentage)}const b=g=>{var w;const{color:I}=s;if(cr(I))return I(g);if(jn(I))return I;{const _=v(I);for(const C of _)if(C.percentage>g)return C.color;return(w=_[_.length-1])==null?void 0:w.color}};return(g,w)=>(E(),L("div",{class:ve([x(f).b(),x(f).m(g.type),x(f).is(g.status),{[x(f).m("without-text")]:!g.showText,[x(f).m("text-inside")]:g.textInside}]),role:"progressbar","aria-valuenow":g.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[g.type==="line"?(E(),L("div",{key:0,class:ve(x(f).b("bar"))},[j("div",{class:ve(x(f).be("bar","outer")),style:nt({height:`${g.strokeWidth}px`})},[j("div",{class:ve([x(f).be("bar","inner"),{[x(f).bem("bar","inner","indeterminate")]:g.indeterminate},{[x(f).bem("bar","inner","striped")]:g.striped},{[x(f).bem("bar","inner","striped-flow")]:g.stripedFlow}]),style:nt(x(h))},[(g.showText||g.$slots.default)&&g.textInside?(E(),L("div",{key:0,class:ve(x(f).be("bar","innerText"))},[xt(g.$slots,"default",{percentage:g.percentage},()=>[j("span",null,ue(x(d)),1)])],2)):re("v-if",!0)],6)],6)],2)):(E(),L("div",{key:1,class:ve(x(f).b("circle")),style:nt({height:`${g.width}px`,width:`${g.width}px`})},[(E(),L("svg",Hr,[j("path",{class:ve(x(f).be("circle","track")),d:x(n),stroke:`var(${x(f).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":g.strokeLinecap,"stroke-width":x(y),fill:"none",style:nt(x(r))},null,14,Gr),j("path",{class:ve(x(f).be("circle","path")),d:x(n),stroke:x(a),fill:"none",opacity:g.percentage?1:0,"stroke-linecap":g.strokeLinecap,"stroke-width":x(y),style:nt(x(o))},null,14,Kr)]))],6)),(g.showText||g.$slots.default)&&!g.textInside?(E(),L("div",{key:2,class:ve(x(f).e("text")),style:nt({fontSize:`${x(u)}px`})},[xt(g.$slots,"default",{percentage:g.percentage},()=>[g.status?(E(),ie(x(Et),{key:1},{default:X(()=>[(E(),ie(_n(x(c))))]),_:1})):(E(),L("span",qr,ue(x(d)),1))])],6)):re("v-if",!0)],10,Wr))}});var Zr=Bt(Yr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Jr=vn(Zr),Qr=Mt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Ho,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),es=me({name:"ElText"}),ts=me({...es,props:Qr,setup(p){const s=p,l=lr(),f=mn("text"),h=W(()=>[f.b(),f.m(s.type),f.m(l.value),f.is("truncated",s.truncated)]);return(y,k)=>(E(),ie(_n(y.tag),{class:ve(x(h))},{default:X(()=>[xt(y.$slots,"default")]),_:3},8,["class"]))}});var ns=Bt(ts,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const os=vn(ns),Jn=(p,s,l)=>{switch(s){case ne.SYSTEM:case ne.TEXT:return`${p}: ${l}`;case ne.IMAGE:return`${p}: [图片]`;case ne.FILE:return`${p}: [文件]`;case ne.VOICE:return`${p}: [语音]`;case ne.VIDEO:return`${p}: [视频]`;case ne.EMOJI:return`${p}: [表情]`;default:return""}},rs={class:"chat-message"},ss=["onClick"],as={class:"message-info"},is={style:{"white-space":"nowrap"}},ls={class:"person"},us={key:0,class:"tag"},cs={class:"message-message"},ds={class:"message-time"},ps=me({__name:"index",setup(p){const s=kt(),l=ct(),f=W(()=>l.currentSession),h=W(()=>s.sessionList.map(k=>{var e,t,r,o,a,c,u,d;const n=(r=(t=Array.from(((e=s.messageMap.get(k.roomId))==null?void 0:e.values())||[]))==null?void 0:t.slice(-1))==null?void 0:r[0];let i="";if(n){const v=Ut(n.fromUser.uid);i=((o=n.message)==null?void 0:o.type)===ne.RECALL?`${v.value.name}:'撤回了一条消息'`:Jn(v.value.name,(a=n.message)==null?void 0:a.type,((u=(c=n.message)==null?void 0:c.body)==null?void 0:u.content)||((d=n.message)==null?void 0:d.body))}return{...k,tag:k.hot_Flag===ir.Yes?"官方":"",lastMsg:i||k.text||"欢迎使用MallChat",lastMsgTime:Un(k==null?void 0:k.activeTime)}})),y=(k,n)=>{l.currentSession.roomId=k,l.currentSession.type=n};return(k,n)=>{const i=er,e=Go;return E(),L("div",rs,[(E(!0),L(st,null,Lt(h.value,(t,r)=>(E(),L("div",{key:r,class:ve(["chat-message-item ",{active:f.value.roomId===t.roomId}]),onClick:o=>y(t.roomId,t.type)},[$(e,{value:t.unreadCount,max:999,hidden:t.unreadCount<1,class:"item"},{default:X(()=>[$(i,{shape:"circle",size:38,src:t.avatar},null,8,["src"])]),_:2},1032,["value","hidden"]),j("div",as,[j("div",is,[j("span",ls,ue(t.name),1),t.tag?(E(),L("span",us,ue(t.tag),1)):re("",!0)]),j("div",cs,ue(t.lastMsg),1)]),j("span",ds,ue(t.lastMsgTime),1)],10,ss))),128))])}}});const fs=ht(ps,[["__scopeId","data-v-176a5711"]]),ms={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},vs=j("path",{fill:"currentColor",d:"m174.72 855.68l135.296-45.12l23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160S128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8l-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512C64 299.904 256 96 512 96s448 203.904 448 416s-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"},null,-1),gs=j("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4z"},null,-1),hs=[vs,gs];function ys(p,s){return E(),L("svg",ms,hs)}const bs={name:"ep-chat-dot-round",render:ys};var Qn={exports:{}};const _s=kr(dr);(function(p,s){(function(l,f){p.exports=f(_s)})(typeof self<"u"?self:Cr,l=>(()=>{var f={9662:(n,i,e)=>{var t=e(614),r=e(6330),o=TypeError;n.exports=function(a){if(t(a))return a;throw o(r(a)+" is not a function")}},6077:(n,i,e)=>{var t=e(614),r=String,o=TypeError;n.exports=function(a){if(typeof a=="object"||t(a))return a;throw o("Can't set "+r(a)+" as a prototype")}},1223:(n,i,e)=>{var t=e(5112),r=e(30),o=e(3070).f,a=t("unscopables"),c=Array.prototype;c[a]==null&&o(c,a,{configurable:!0,value:r(null)}),n.exports=function(u){c[a][u]=!0}},9670:(n,i,e)=>{var t=e(111),r=String,o=TypeError;n.exports=function(a){if(t(a))return a;throw o(r(a)+" is not an object")}},8533:(n,i,e)=>{var t=e(2092).forEach,r=e(9341),o=r("forEach");n.exports=o?[].forEach:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}},1318:(n,i,e)=>{var t=e(5656),r=e(1400),o=e(6244),a=function(c){return function(u,d,v){var b,g=t(u),w=o(g),I=r(v,w);if(c&&d!=d){for(;w>I;)if(b=g[I++],b!=b)return!0}else for(;w>I;I++)if((c||I in g)&&g[I]===d)return c||I||0;return!c&&-1}};n.exports={includes:a(!0),indexOf:a(!1)}},2092:(n,i,e)=>{var t=e(9974),r=e(1702),o=e(8361),a=e(7908),c=e(6244),u=e(5417),d=r([].push),v=function(b){var g=b==1,w=b==2,I=b==3,_=b==4,C=b==6,T=b==7,P=b==5||C;return function(q,F,J,V){for(var Q,le,O=a(q),N=o(O),se=t(F,J),xe=c(N),S=0,z=V||u,G=g?z(q,xe):w||T?z(q,0):void 0;xe>S;S++)if((P||S in N)&&(Q=N[S],le=se(Q,S,O),b))if(g)G[S]=le;else if(le)switch(b){case 3:return!0;case 5:return Q;case 6:return S;case 2:d(G,Q)}else switch(b){case 4:return!1;case 7:d(G,Q)}return C?-1:I||_?_:G}};n.exports={forEach:v(0),map:v(1),filter:v(2),some:v(3),every:v(4),find:v(5),findIndex:v(6),filterReject:v(7)}},1194:(n,i,e)=>{var t=e(7293),r=e(5112),o=e(7392),a=r("species");n.exports=function(c){return o>=51||!t(function(){var u=[],d=u.constructor={};return d[a]=function(){return{foo:1}},u[c](Boolean).foo!==1})}},9341:(n,i,e)=>{var t=e(7293);n.exports=function(r,o){var a=[][r];return!!a&&t(function(){a.call(null,o||function(){return 1},1)})}},3658:(n,i,e)=>{var t=e(9781),r=e(3157),o=TypeError,a=Object.getOwnPropertyDescriptor,c=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(u){return u instanceof TypeError}}();n.exports=c?function(u,d){if(r(u)&&!a(u,"length").writable)throw o("Cannot set read only .length");return u.length=d}:function(u,d){return u.length=d}},206:(n,i,e)=>{var t=e(1702);n.exports=t([].slice)},7475:(n,i,e)=>{var t=e(3157),r=e(4411),o=e(111),a=e(5112),c=a("species"),u=Array;n.exports=function(d){var v;return t(d)&&(v=d.constructor,r(v)&&(v===u||t(v.prototype))?v=void 0:o(v)&&(v=v[c],v===null&&(v=void 0))),v===void 0?u:v}},5417:(n,i,e)=>{var t=e(7475);n.exports=function(r,o){return new(t(r))(o===0?0:o)}},4326:(n,i,e)=>{var t=e(1702),r=t({}.toString),o=t("".slice);n.exports=function(a){return o(r(a),8,-1)}},648:(n,i,e)=>{var t=e(1694),r=e(614),o=e(4326),a=e(5112),c=a("toStringTag"),u=Object,d=o(function(){return arguments}())=="Arguments",v=function(b,g){try{return b[g]}catch{}};n.exports=t?o:function(b){var g,w,I;return b===void 0?"Undefined":b===null?"Null":typeof(w=v(g=u(b),c))=="string"?w:d?o(g):(I=o(g))=="Object"&&r(g.callee)?"Arguments":I}},9920:(n,i,e)=>{var t=e(2597),r=e(3887),o=e(1236),a=e(3070);n.exports=function(c,u,d){for(var v=r(u),b=a.f,g=o.f,w=0;w<v.length;w++){var I=v[w];t(c,I)||d&&t(d,I)||b(c,I,g(u,I))}}},4964:(n,i,e)=>{var t=e(5112),r=t("match");n.exports=function(o){var a=/./;try{"/./"[o](a)}catch{try{return a[r]=!1,"/./"[o](a)}catch{}}return!1}},8880:(n,i,e)=>{var t=e(9781),r=e(3070),o=e(9114);n.exports=t?function(a,c,u){return r.f(a,c,o(1,u))}:function(a,c,u){return a[c]=u,a}},9114:n=>{n.exports=function(i,e){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:e}}},6135:(n,i,e)=>{var t=e(4948),r=e(3070),o=e(9114);n.exports=function(a,c,u){var d=t(c);d in a?r.f(a,d,o(0,u)):a[d]=u}},8052:(n,i,e)=>{var t=e(614),r=e(3070),o=e(6339),a=e(3072);n.exports=function(c,u,d,v){v||(v={});var b=v.enumerable,g=v.name!==void 0?v.name:u;if(t(d)&&o(d,g,v),v.global)b?c[u]=d:a(u,d);else{try{v.unsafe?c[u]&&(b=!0):delete c[u]}catch{}b?c[u]=d:r.f(c,u,{value:d,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return c}},3072:(n,i,e)=>{var t=e(7854),r=Object.defineProperty;n.exports=function(o,a){try{r(t,o,{value:a,configurable:!0,writable:!0})}catch{t[o]=a}return a}},5117:(n,i,e)=>{var t=e(6330),r=TypeError;n.exports=function(o,a){if(!delete o[a])throw r("Cannot delete property "+t(a)+" of "+t(o))}},9781:(n,i,e)=>{var t=e(7293);n.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(n,i,e)=>{var t=e(7854),r=e(111),o=t.document,a=r(o)&&r(o.createElement);n.exports=function(c){return a?o.createElement(c):{}}},7207:n=>{var i=TypeError,e=9007199254740991;n.exports=function(t){if(t>e)throw i("Maximum allowed index exceeded");return t}},8113:(n,i,e)=>{var t=e(5005);n.exports=t("navigator","userAgent")||""},7392:(n,i,e)=>{var t,r,o=e(7854),a=e(8113),c=o.process,u=o.Deno,d=c&&c.versions||u&&u.version,v=d&&d.v8;v&&(t=v.split("."),r=t[0]>0&&t[0]<4?1:+(t[0]+t[1])),!r&&a&&(t=a.match(/Edge\/(\d+)/),(!t||t[1]>=74)&&(t=a.match(/Chrome\/(\d+)/),t&&(r=+t[1]))),n.exports=r},748:n=>{n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7762:(n,i,e)=>{var t=e(9781),r=e(7293),o=e(9670),a=e(30),c=e(6277),u=Error.prototype.toString,d=r(function(){if(t){var v=a(Object.defineProperty({},"name",{get:function(){return this===v}}));if(u.call(v)!=="true")return!0}return u.call({message:1,name:2})!=="2: 1"||u.call({})!=="Error"});n.exports=d?function(){var v=o(this),b=c(v.name,"Error"),g=c(v.message);return b?g?b+": "+g:b:g}:u},2109:(n,i,e)=>{var t=e(7854),r=e(1236).f,o=e(8880),a=e(8052),c=e(3072),u=e(9920),d=e(4705);n.exports=function(v,b){var g,w,I,_,C,T,P=v.target,q=v.global,F=v.stat;if(w=q?t:F?t[P]||c(P,{}):(t[P]||{}).prototype,w)for(I in b){if(C=b[I],v.dontCallGetSet?(T=r(w,I),_=T&&T.value):_=w[I],g=d(q?I:P+(F?".":"#")+I,v.forced),!g&&_!==void 0){if(typeof C==typeof _)continue;u(C,_)}(v.sham||_&&_.sham)&&o(C,"sham",!0),a(w,I,C,v)}}},7293:n=>{n.exports=function(i){try{return!!i()}catch{return!0}}},2104:(n,i,e)=>{var t=e(4374),r=Function.prototype,o=r.apply,a=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(t?a.bind(o):function(){return a.apply(o,arguments)})},9974:(n,i,e)=>{var t=e(1702),r=e(9662),o=e(4374),a=t(t.bind);n.exports=function(c,u){return r(c),u===void 0?c:o?a(c,u):function(){return c.apply(u,arguments)}}},4374:(n,i,e)=>{var t=e(7293);n.exports=!t(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")})},6916:(n,i,e)=>{var t=e(4374),r=Function.prototype.call;n.exports=t?r.bind(r):function(){return r.apply(r,arguments)}},6530:(n,i,e)=>{var t=e(9781),r=e(2597),o=Function.prototype,a=t&&Object.getOwnPropertyDescriptor,c=r(o,"name"),u=c&&(function(){}).name==="something",d=c&&(!t||t&&a(o,"name").configurable);n.exports={EXISTS:c,PROPER:u,CONFIGURABLE:d}},1702:(n,i,e)=>{var t=e(4374),r=Function.prototype,o=r.bind,a=r.call,c=t&&o.bind(a,a);n.exports=t?function(u){return u&&c(u)}:function(u){return u&&function(){return a.apply(u,arguments)}}},5005:(n,i,e)=>{var t=e(7854),r=e(614),o=function(a){return r(a)?a:void 0};n.exports=function(a,c){return arguments.length<2?o(t[a]):t[a]&&t[a][c]}},8173:(n,i,e)=>{var t=e(9662),r=e(8554);n.exports=function(o,a){var c=o[a];return r(c)?void 0:t(c)}},7854:(n,i,e)=>{var t=function(r){return r&&r.Math==Math&&r};n.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof e.g=="object"&&e.g)||function(){return this}()||Function("return this")()},2597:(n,i,e)=>{var t=e(1702),r=e(7908),o=t({}.hasOwnProperty);n.exports=Object.hasOwn||function(a,c){return o(r(a),c)}},3501:n=>{n.exports={}},490:(n,i,e)=>{var t=e(5005);n.exports=t("document","documentElement")},4664:(n,i,e)=>{var t=e(9781),r=e(7293),o=e(317);n.exports=!t&&!r(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},8361:(n,i,e)=>{var t=e(1702),r=e(7293),o=e(4326),a=Object,c=t("".split);n.exports=r(function(){return!a("z").propertyIsEnumerable(0)})?function(u){return o(u)=="String"?c(u,""):a(u)}:a},9587:(n,i,e)=>{var t=e(614),r=e(111),o=e(7674);n.exports=function(a,c,u){var d,v;return o&&t(d=c.constructor)&&d!==u&&r(v=d.prototype)&&v!==u.prototype&&o(a,v),a}},2788:(n,i,e)=>{var t=e(1702),r=e(614),o=e(5465),a=t(Function.toString);r(o.inspectSource)||(o.inspectSource=function(c){return a(c)}),n.exports=o.inspectSource},9909:(n,i,e)=>{var t,r,o,a=e(4811),c=e(7854),u=e(1702),d=e(111),v=e(8880),b=e(2597),g=e(5465),w=e(6200),I=e(3501),_="Object already initialized",C=c.TypeError,T=c.WeakMap,P=function(O){return o(O)?r(O):t(O,{})},q=function(O){return function(N){var se;if(!d(N)||(se=r(N)).type!==O)throw C("Incompatible receiver, "+O+" required");return se}};if(a||g.state){var F=g.state||(g.state=new T),J=u(F.get),V=u(F.has),Q=u(F.set);t=function(O,N){if(V(F,O))throw C(_);return N.facade=O,Q(F,O,N),N},r=function(O){return J(F,O)||{}},o=function(O){return V(F,O)}}else{var le=w("state");I[le]=!0,t=function(O,N){if(b(O,le))throw C(_);return N.facade=O,v(O,le,N),N},r=function(O){return b(O,le)?O[le]:{}},o=function(O){return b(O,le)}}n.exports={set:t,get:r,has:o,enforce:P,getterFor:q}},3157:(n,i,e)=>{var t=e(4326);n.exports=Array.isArray||function(r){return t(r)=="Array"}},614:n=>{n.exports=function(i){return typeof i=="function"}},4411:(n,i,e)=>{var t=e(1702),r=e(7293),o=e(614),a=e(648),c=e(5005),u=e(2788),d=function(){},v=[],b=c("Reflect","construct"),g=/^\s*(?:class|function)\b/,w=t(g.exec),I=!g.exec(d),_=function(T){if(!o(T))return!1;try{return b(d,v,T),!0}catch{return!1}},C=function(T){if(!o(T))return!1;switch(a(T)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return I||!!w(g,u(T))}catch{return!0}};C.sham=!0,n.exports=!b||r(function(){var T;return _(_.call)||!_(Object)||!_(function(){T=!0})||T})?C:_},4705:(n,i,e)=>{var t=e(7293),r=e(614),o=/#|\.prototype\./,a=function(b,g){var w=u[c(b)];return w==v||w!=d&&(r(g)?t(g):!!g)},c=a.normalize=function(b){return String(b).replace(o,".").toLowerCase()},u=a.data={},d=a.NATIVE="N",v=a.POLYFILL="P";n.exports=a},8554:n=>{n.exports=function(i){return i==null}},111:(n,i,e)=>{var t=e(614),r=typeof document=="object"&&document.all,o=typeof r>"u"&&r!==void 0;n.exports=o?function(a){return typeof a=="object"?a!==null:t(a)||a===r}:function(a){return typeof a=="object"?a!==null:t(a)}},1913:n=>{n.exports=!1},7850:(n,i,e)=>{var t=e(111),r=e(4326),o=e(5112),a=o("match");n.exports=function(c){var u;return t(c)&&((u=c[a])!==void 0?!!u:r(c)=="RegExp")}},2190:(n,i,e)=>{var t=e(5005),r=e(614),o=e(7976),a=e(3307),c=Object;n.exports=a?function(u){return typeof u=="symbol"}:function(u){var d=t("Symbol");return r(d)&&o(d.prototype,c(u))}},6244:(n,i,e)=>{var t=e(7466);n.exports=function(r){return t(r.length)}},6339:(n,i,e)=>{var t=e(7293),r=e(614),o=e(2597),a=e(9781),c=e(6530).CONFIGURABLE,u=e(2788),d=e(9909),v=d.enforce,b=d.get,g=Object.defineProperty,w=a&&!t(function(){return g(function(){},"length",{value:8}).length!==8}),I=String(String).split("String"),_=n.exports=function(C,T,P){String(T).slice(0,7)==="Symbol("&&(T="["+String(T).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),P&&P.getter&&(T="get "+T),P&&P.setter&&(T="set "+T),(!o(C,"name")||c&&C.name!==T)&&(a?g(C,"name",{value:T,configurable:!0}):C.name=T),w&&P&&o(P,"arity")&&C.length!==P.arity&&g(C,"length",{value:P.arity});try{P&&o(P,"constructor")&&P.constructor?a&&g(C,"prototype",{writable:!1}):C.prototype&&(C.prototype=void 0)}catch{}var q=v(C);return o(q,"source")||(q.source=I.join(typeof T=="string"?T:"")),C};Function.prototype.toString=_(function(){return r(this)&&b(this).source||u(this)},"toString")},4758:n=>{var i=Math.ceil,e=Math.floor;n.exports=Math.trunc||function(t){var r=+t;return(r>0?e:i)(r)}},6277:(n,i,e)=>{var t=e(1340);n.exports=function(r,o){return r===void 0?arguments.length<2?"":o:t(r)}},3929:(n,i,e)=>{var t=e(7850),r=TypeError;n.exports=function(o){if(t(o))throw r("The method doesn't accept regular expressions");return o}},30:(n,i,e)=>{var t,r=e(9670),o=e(6048),a=e(748),c=e(3501),u=e(490),d=e(317),v=e(6200),b=">",g="<",w="prototype",I="script",_=v("IE_PROTO"),C=function(){},T=function(J){return g+I+b+J+g+"/"+I+b},P=function(J){J.write(T("")),J.close();var V=J.parentWindow.Object;return J=null,V},q=function(){var J,V=d("iframe"),Q="java"+I+":";return V.style.display="none",u.appendChild(V),V.src=String(Q),J=V.contentWindow.document,J.open(),J.write(T("document.F=Object")),J.close(),J.F},F=function(){try{t=new ActiveXObject("htmlfile")}catch{}F=typeof document<"u"?document.domain&&t?P(t):q():P(t);for(var J=a.length;J--;)delete F[w][a[J]];return F()};c[_]=!0,n.exports=Object.create||function(J,V){var Q;return J!==null?(C[w]=r(J),Q=new C,C[w]=null,Q[_]=J):Q=F(),V===void 0?Q:o.f(Q,V)}},6048:(n,i,e)=>{var t=e(9781),r=e(3353),o=e(3070),a=e(9670),c=e(5656),u=e(1956);i.f=t&&!r?Object.defineProperties:function(d,v){a(d);for(var b,g=c(v),w=u(v),I=w.length,_=0;I>_;)o.f(d,b=w[_++],g[b]);return d}},3070:(n,i,e)=>{var t=e(9781),r=e(4664),o=e(3353),a=e(9670),c=e(4948),u=TypeError,d=Object.defineProperty,v=Object.getOwnPropertyDescriptor,b="enumerable",g="configurable",w="writable";i.f=t?o?function(I,_,C){if(a(I),_=c(_),a(C),typeof I=="function"&&_==="prototype"&&"value"in C&&w in C&&!C[w]){var T=v(I,_);T&&T[w]&&(I[_]=C.value,C={configurable:g in C?C[g]:T[g],enumerable:b in C?C[b]:T[b],writable:!1})}return d(I,_,C)}:d:function(I,_,C){if(a(I),_=c(_),a(C),r)try{return d(I,_,C)}catch{}if("get"in C||"set"in C)throw u("Accessors not supported");return"value"in C&&(I[_]=C.value),I}},1236:(n,i,e)=>{var t=e(9781),r=e(6916),o=e(5296),a=e(9114),c=e(5656),u=e(4948),d=e(2597),v=e(4664),b=Object.getOwnPropertyDescriptor;i.f=t?b:function(g,w){if(g=c(g),w=u(w),v)try{return b(g,w)}catch{}if(d(g,w))return a(!r(o.f,g,w),g[w])}},8006:(n,i,e)=>{var t=e(6324),r=e(748),o=r.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(a){return t(a,o)}},5181:(n,i)=>{i.f=Object.getOwnPropertySymbols},7976:(n,i,e)=>{var t=e(1702);n.exports=t({}.isPrototypeOf)},6324:(n,i,e)=>{var t=e(1702),r=e(2597),o=e(5656),a=e(1318).indexOf,c=e(3501),u=t([].push);n.exports=function(d,v){var b,g=o(d),w=0,I=[];for(b in g)!r(c,b)&&r(g,b)&&u(I,b);for(;v.length>w;)r(g,b=v[w++])&&(~a(I,b)||u(I,b));return I}},1956:(n,i,e)=>{var t=e(6324),r=e(748);n.exports=Object.keys||function(o){return t(o,r)}},5296:(n,i)=>{var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,r=t&&!e.call({1:2},1);i.f=r?function(o){var a=t(this,o);return!!a&&a.enumerable}:e},7674:(n,i,e)=>{var t=e(1702),r=e(9670),o=e(6077);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,c=!1,u={};try{a=t(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),a(u,[]),c=u instanceof Array}catch{}return function(d,v){return r(d),o(v),c?a(d,v):d.__proto__=v,d}}():void 0)},288:(n,i,e)=>{var t=e(1694),r=e(648);n.exports=t?{}.toString:function(){return"[object "+r(this)+"]"}},2140:(n,i,e)=>{var t=e(6916),r=e(614),o=e(111),a=TypeError;n.exports=function(c,u){var d,v;if(u==="string"&&r(d=c.toString)&&!o(v=t(d,c))||r(d=c.valueOf)&&!o(v=t(d,c))||u!=="string"&&r(d=c.toString)&&!o(v=t(d,c)))return v;throw a("Can't convert object to primitive value")}},3887:(n,i,e)=>{var t=e(5005),r=e(1702),o=e(8006),a=e(5181),c=e(9670),u=r([].concat);n.exports=t("Reflect","ownKeys")||function(d){var v=o.f(c(d)),b=a.f;return b?u(v,b(d)):v}},7066:(n,i,e)=>{var t=e(9670);n.exports=function(){var r=t(this),o="";return r.hasIndices&&(o+="d"),r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.unicodeSets&&(o+="v"),r.sticky&&(o+="y"),o}},4706:(n,i,e)=>{var t=e(6916),r=e(2597),o=e(7976),a=e(7066),c=RegExp.prototype;n.exports=function(u){var d=u.flags;return d!==void 0||"flags"in c||r(u,"flags")||!o(c,u)?d:t(a,u)}},4488:(n,i,e)=>{var t=e(8554),r=TypeError;n.exports=function(o){if(t(o))throw r("Can't call method on "+o);return o}},7152:(n,i,e)=>{var t=e(7854),r=e(2104),o=e(614),a=e(8113),c=e(206),u=e(8053),d=/MSIE .\./.test(a),v=t.Function,b=function(g){return d?function(w,I){var _=u(arguments.length,1)>2,C=o(w)?w:v(w),T=_?c(arguments,2):void 0;return g(_?function(){r(C,this,T)}:C,I)}:g};n.exports={setTimeout:b(t.setTimeout),setInterval:b(t.setInterval)}},6200:(n,i,e)=>{var t=e(2309),r=e(9711),o=t("keys");n.exports=function(a){return o[a]||(o[a]=r(a))}},5465:(n,i,e)=>{var t=e(7854),r=e(3072),o="__core-js_shared__",a=t[o]||r(o,{});n.exports=a},2309:(n,i,e)=>{var t=e(1913),r=e(5465);(n.exports=function(o,a){return r[o]||(r[o]=a!==void 0?a:{})})("versions",[]).push({version:"3.25.0",mode:t?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},3111:(n,i,e)=>{var t=e(1702),r=e(4488),o=e(1340),a=e(1361),c=t("".replace),u="["+a+"]",d=RegExp("^"+u+u+"*"),v=RegExp(u+u+"*$"),b=function(g){return function(w){var I=o(r(w));return 1&g&&(I=c(I,d,"")),2&g&&(I=c(I,v,"")),I}};n.exports={start:b(1),end:b(2),trim:b(3)}},6293:(n,i,e)=>{var t=e(7392),r=e(7293);n.exports=!!Object.getOwnPropertySymbols&&!r(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&t&&t<41})},863:(n,i,e)=>{var t=e(1702);n.exports=t(1 .valueOf)},1400:(n,i,e)=>{var t=e(9303),r=Math.max,o=Math.min;n.exports=function(a,c){var u=t(a);return u<0?r(u+c,0):o(u,c)}},5656:(n,i,e)=>{var t=e(8361),r=e(4488);n.exports=function(o){return t(r(o))}},9303:(n,i,e)=>{var t=e(4758);n.exports=function(r){var o=+r;return o!==o||o===0?0:t(o)}},7466:(n,i,e)=>{var t=e(9303),r=Math.min;n.exports=function(o){return o>0?r(t(o),9007199254740991):0}},7908:(n,i,e)=>{var t=e(4488),r=Object;n.exports=function(o){return r(t(o))}},7593:(n,i,e)=>{var t=e(6916),r=e(111),o=e(2190),a=e(8173),c=e(2140),u=e(5112),d=TypeError,v=u("toPrimitive");n.exports=function(b,g){if(!r(b)||o(b))return b;var w,I=a(b,v);if(I){if(g===void 0&&(g="default"),w=t(I,b,g),!r(w)||o(w))return w;throw d("Can't convert object to primitive value")}return g===void 0&&(g="number"),c(b,g)}},4948:(n,i,e)=>{var t=e(7593),r=e(2190);n.exports=function(o){var a=t(o,"string");return r(a)?a:a+""}},1694:(n,i,e)=>{var t=e(5112),r=t("toStringTag"),o={};o[r]="z",n.exports=String(o)==="[object z]"},1340:(n,i,e)=>{var t=e(648),r=String;n.exports=function(o){if(t(o)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return r(o)}},6330:n=>{var i=String;n.exports=function(e){try{return i(e)}catch{return"Object"}}},9711:(n,i,e)=>{var t=e(1702),r=0,o=Math.random(),a=t(1 .toString);n.exports=function(c){return"Symbol("+(c===void 0?"":c)+")_"+a(++r+o,36)}},3307:(n,i,e)=>{var t=e(6293);n.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(n,i,e)=>{var t=e(9781),r=e(7293);n.exports=t&&r(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:n=>{var i=TypeError;n.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},4811:(n,i,e)=>{var t=e(7854),r=e(614),o=t.WeakMap;n.exports=r(o)&&/native code/.test(String(o))},5112:(n,i,e)=>{var t=e(7854),r=e(2309),o=e(2597),a=e(9711),c=e(6293),u=e(3307),d=r("wks"),v=t.Symbol,b=v&&v.for,g=u?v:v&&v.withoutSetter||a;n.exports=function(w){if(!o(d,w)||!c&&typeof d[w]!="string"){var I="Symbol."+w;c&&o(v,w)?d[w]=v[w]:d[w]=u&&b?b(I):g(I)}return d[w]}},1361:n=>{n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},9554:(n,i,e)=>{var t=e(2109),r=e(8533);t({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},6699:(n,i,e)=>{var t=e(2109),r=e(1318).includes,o=e(7293),a=e(1223),c=o(function(){return!Array(1).includes()});t({target:"Array",proto:!0,forced:c},{includes:function(u){return r(this,u,arguments.length>1?arguments[1]:void 0)}}),a("includes")},2772:(n,i,e)=>{var t=e(2109),r=e(1702),o=e(1318).indexOf,a=e(9341),c=r([].indexOf),u=!!c&&1/c([1],1,-0)<0,d=a("indexOf");t({target:"Array",proto:!0,forced:u||!d},{indexOf:function(v){var b=arguments.length>1?arguments[1]:void 0;return u?c(this,v,b)||0:o(this,v,b)}})},561:(n,i,e)=>{var t=e(2109),r=e(7908),o=e(1400),a=e(9303),c=e(6244),u=e(3658),d=e(7207),v=e(5417),b=e(6135),g=e(5117),w=e(1194),I=w("splice"),_=Math.max,C=Math.min;t({target:"Array",proto:!0,forced:!I},{splice:function(T,P){var q,F,J,V,Q,le,O=r(this),N=c(O),se=o(T,N),xe=arguments.length;for(xe===0?q=F=0:xe===1?(q=0,F=N-se):(q=xe-2,F=C(_(a(P),0),N-se)),d(N+q-F),J=v(O,F),V=0;V<F;V++)Q=se+V,Q in O&&b(J,V,O[Q]);if(J.length=F,q<F){for(V=se;V<N-F;V++)Q=V+F,le=V+q,Q in O?O[le]=O[Q]:g(O,le);for(V=N;V>N-F+q;V--)g(O,V-1)}else if(q>F)for(V=N-F;V>se;V--)Q=V+F-1,le=V+q-1,Q in O?O[le]=O[Q]:g(O,le);for(V=0;V<q;V++)O[V+se]=arguments[V+2];return u(O,N-F+q),J}})},3710:(n,i,e)=>{var t=e(1702),r=e(8052),o=Date.prototype,a="Invalid Date",c="toString",u=t(o[c]),d=t(o.getTime);String(new Date(NaN))!=a&&r(o,c,function(){var v=d(this);return v===v?u(this):a})},6647:(n,i,e)=>{var t=e(8052),r=e(7762),o=Error.prototype;o.toString!==r&&t(o,"toString",r)},9653:(n,i,e)=>{var t=e(9781),r=e(7854),o=e(1702),a=e(4705),c=e(8052),u=e(2597),d=e(9587),v=e(7976),b=e(2190),g=e(7593),w=e(7293),I=e(8006).f,_=e(1236).f,C=e(3070).f,T=e(863),P=e(3111).trim,q="Number",F=r[q],J=F.prototype,V=r.TypeError,Q=o("".slice),le=o("".charCodeAt),O=function(G){var Y=g(G,"number");return typeof Y=="bigint"?Y:N(Y)},N=function(G){var Y,K,Ie,Oe,ke,je,ye,De,_e=g(G,"number");if(b(_e))throw V("Cannot convert a Symbol value to a number");if(typeof _e=="string"&&_e.length>2){if(_e=P(_e),Y=le(_e,0),Y===43||Y===45){if(K=le(_e,2),K===88||K===120)return NaN}else if(Y===48){switch(le(_e,1)){case 66:case 98:Ie=2,Oe=49;break;case 79:case 111:Ie=8,Oe=55;break;default:return+_e}for(ke=Q(_e,2),je=ke.length,ye=0;ye<je;ye++)if(De=le(ke,ye),De<48||De>Oe)return NaN;return parseInt(ke,Ie)}}return+_e};if(a(q,!F(" 0o1")||!F("0b1")||F("+0x1"))){for(var se,xe=function(G){var Y=arguments.length<1?0:F(O(G)),K=this;return v(J,K)&&w(function(){T(K)})?d(Object(Y),K,xe):Y},S=t?I(F):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),z=0;S.length>z;z++)u(F,se=S[z])&&!u(xe,se)&&C(xe,se,_(F,se));xe.prototype=J,J.constructor=xe,c(r,q,xe,{constructor:!0})}},1539:(n,i,e)=>{var t=e(1694),r=e(8052),o=e(288);t||r(Object.prototype,"toString",o,{unsafe:!0})},9714:(n,i,e)=>{var t=e(6530).PROPER,r=e(8052),o=e(9670),a=e(1340),c=e(7293),u=e(4706),d="toString",v=RegExp.prototype,b=v[d],g=c(function(){return b.call({source:"a",flags:"b"})!="/a/b"}),w=t&&b.name!=d;(g||w)&&r(RegExp.prototype,d,function(){var I=o(this),_=a(I.source),C=a(u(I));return"/"+_+"/"+C},{unsafe:!0})},2023:(n,i,e)=>{var t=e(2109),r=e(1702),o=e(3929),a=e(4488),c=e(1340),u=e(4964),d=r("".indexOf);t({target:"String",proto:!0,forced:!u("includes")},{includes:function(v){return!!~d(c(a(this)),c(o(v)),arguments.length>1?arguments[1]:void 0)}})},6815:(n,i,e)=>{var t=e(2109),r=e(7854),o=e(7152).setInterval;t({global:!0,bind:!0,forced:r.setInterval!==o},{setInterval:o})},8417:(n,i,e)=>{var t=e(2109),r=e(7854),o=e(7152).setTimeout;t({global:!0,bind:!0,forced:r.setTimeout!==o},{setTimeout:o})},2564:(n,i,e)=>{e(6815),e(8417)},3744:(n,i)=>{i.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[o,a]of t)r[o]=a;return r}},7203:n=>{n.exports=l}},h={};function y(n){var i=h[n];if(i!==void 0)return i.exports;var e=h[n]={exports:{}};return f[n](e,e.exports,y),e.exports}y.d=(n,i)=>{for(var e in i)y.o(i,e)&&!y.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},y.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),y.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),y.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},y.p="";var k={};return(()=>{if(y.r(k),y.d(k,{ContextMenu:()=>Cn,ContextMenuGroup:()=>wn,ContextMenuItem:()=>bt,ContextMenuSeparator:()=>ce,MenuBar:()=>Mo,default:()=>Oo}),typeof window<"u"){var n=window.document.currentScript,i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(y.p=i[1])}var e=y(7203),t=null;function r(m){t&&a(),t=m}function o(m){m===t&&(t=null)}function a(){t&&(t.closeMenu(),t=null)}y(6647),y(3710),y(1539),y(9714);var c={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultAdjustPadding:{x:0,y:10}};function u(m,M){var R=m.offsetTop;return m.offsetParent!=null&&m.offsetParent!=M&&(R-=m.offsetParent.scrollTop,R+=u(m.offsetParent,M)),R}function d(m,M){var R=m.offsetLeft;return m.offsetParent!=null&&m.offsetParent!=M&&(R-=m.offsetParent.scrollLeft,R+=d(m.offsetParent,M)),R}function v(m,M,R,U){return{x:d(m,U)+M,y:u(m,U)+R}}var b="mx-menu-default-container",g="mx-menu-container-",w=0;function I(m){var M=m.getContainer,R=m.zIndex;if(M){var U=typeof M=="function"?M():M;if(U){var fe=U.getAttribute("id");return fe||(fe=g+w++,U.setAttribute("id",fe)),U.style.zIndex=(R==null?void 0:R.toString())||c.defaultZindex.toString(),{eleId:fe,container:U,isNew:!1}}}var he=document.getElementById(b);return he||(he=document.createElement("div"),he.setAttribute("id",b),he.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(he)),he.style.zIndex=(R==null?void 0:R.toString())||c.defaultZindex.toString(),{eleId:b,container:he,isNew:!0}}function _(m){return typeof m=="number"?"".concat(m,"px"):m}var C=(0,e.defineComponent)({props:{vnode:{type:[Object,Function],default:null},data:{type:Object,default:null}},setup:function(m){var M=(0,e.toRefs)(m),R=M.vnode,U=M.data;return function(){return typeof R.value=="function"?R.value(U.value):R.value}}});function T(m,M,R){return M in m?Object.defineProperty(m,M,{value:R,enumerable:!0,configurable:!0,writable:!0}):m[M]=R,m}function P(m,M){var R=Object.keys(m);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(m);M&&(U=U.filter(function(fe){return Object.getOwnPropertyDescriptor(m,fe).enumerable})),R.push.apply(R,U)}return R}function q(m){for(var M=1;M<arguments.length;M++){var R=arguments[M]!=null?arguments[M]:{};M%2?P(Object(R),!0).forEach(function(U){T(m,U,R[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(R)):P(Object(R)).forEach(function(U){Object.defineProperty(m,U,Object.getOwnPropertyDescriptor(R,U))})}return m}y(2564);var F={class:"mx-context-menu-scroll",ref:"scroll"};function J(m,M,R,U,fe,he){var oe=(0,e.resolveComponent)("ContextMenuSeparator"),ee=(0,e.resolveComponent)("ContextSubMenu",!0),de=(0,e.resolveComponent)("ContextMenuItem"),Me=(0,e.resolveComponent)("ContextMenuIconRight");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)("mx-context-menu "+(m.options.customClass?m.options.customClass:"")+" "+m.globalTheme),style:(0,e.normalizeStyle)({maxWidth:m.maxWidth?m.solveNumberOrStringSize(m.maxWidth):"".concat(m.constOptions.defaultMaxWidth,"px"),minWidth:m.minWidth?m.solveNumberOrStringSize(m.minWidth):"".concat(m.constOptions.defaultMinWidth,"px"),maxHeight:m.overflow&&m.maxHeight>0?"".concat(m.maxHeight,"px"):void 0,zIndex:m.zIndex,left:"".concat(m.position.x,"px"),top:"".concat(m.position.y,"px")}),"data-type":"ContextSubMenu",onClick:M[2]||(M[2]=function(){return m.onSubMenuBodyClick&&m.onSubMenuBodyClick.apply(m,arguments)})},[(0,e.createElementVNode)("div",{class:"mx-context-menu-items",ref:"menu",style:(0,e.normalizeStyle)({top:"".concat(m.scrollValue,"px")})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.items,function(A,Ce){return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:Ce},[A.hidden!==!0&&A.divided==="up"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0})):(0,e.createCommentVNode)("",!0),A.hidden!==!0&&A.divided==="self"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:1})):((0,e.openBlock)(),(0,e.createBlock)(de,{key:2,clickHandler:A.onClick?function($e){return A.onClick($e)}:void 0,disabled:A.disabled,hidden:A.hidden,icon:A.icon,iconFontClass:A.iconFontClass,svgIcon:A.svgIcon,svgProps:A.svgProps,label:A.label,customRender:A.customRender,customClass:A.customClass,checked:A.checked,shortcut:A.shortcut,clickClose:A.clickClose,clickableWhenHasChildren:A.clickableWhenHasChildren,preserveIconWidth:A.preserveIconWidth!==void 0?A.preserveIconWidth:m.options.preserveIconWidth,showRightArrow:A.children&&A.children.length>0,hasChildren:A.children&&A.children.length>0,rawMenuItem:A,onSubMenuOpen:A.onSubMenuOpen,onSubMenuClose:A.onSubMenuClose},(0,e.createSlots)({_:2},[A.children&&A.children.length>0?{name:"submenu",fn:(0,e.withCtx)(function(){return[(0,e.createVNode)(ee,{items:A.children,maxWidth:A.maxWidth,minWidth:A.minWidth,adjustPosition:A.adjustSubMenuPosition!==void 0?A.adjustSubMenuPosition:m.options.adjustPosition,direction:A.direction!==void 0?A.direction:m.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]}),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),A.hidden===!0||A.divided!=="down"&&A.divided!==!0?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createBlock)(oe,{key:3}))],64)}),128))]})],4),(0,e.createElementVNode)("div",F,[(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable up",onClick:M[0]||(M[0]=function(A){return m.onScroll(!1)})},[(0,e.createVNode)(Me)],512),[[e.vShow,m.overflow&&m.scrollValue<0]]),(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable down",onClick:M[1]||(M[1]=function(A){return m.onScroll(!0)})},[(0,e.createVNode)(Me)],512),[[e.vShow,m.overflow&&m.scrollValue>-m.scrollHeight]])],512)],6)}y(9653),y(2772),y(9554),y(561),y(6699),y(2023);var V={key:0,class:"mx-context-menu-item-wrapper",ref:"menuItemRef","data-type":"ContextMenuItem"},Q={class:"mx-item-row"},le=["xlink:href"],O={key:1,class:"label"},N={class:"mx-item-row"},se={class:"mx-shortcut"};function xe(m,M,R,U,fe,he){var oe=(0,e.resolveComponent)("VNodeRender"),ee=(0,e.resolveComponent)("ContextMenuIconCheck"),de=(0,e.resolveComponent)("ContextMenuIconRight");return m.hidden?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",V,[m.globalHasSlot("itemRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemRender",m.getItemDataForChildren())}},null,8,["vnode"])):m.customRender?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:1,vnode:m.customRender,data:m.getItemDataForChildren()},null,8,["vnode","data"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:(0,e.normalizeClass)(["mx-context-menu-item",m.disabled?"disabled":"",m.keyBoardFocusMenu?"keyboard-focus":"",m.customClass?" "+m.customClass:"",m.showSubMenu?"open":""]),onClick:M[0]||(M[0]=function(){return m.onClick&&m.onClick.apply(m,arguments)}),onMouseenter:M[1]||(M[1]=function(){return m.onMouseEnter&&m.onMouseEnter.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[(0,e.createElementVNode)("div",Q,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["mx-icon-placeholder",m.preserveIconWidth?"preserve-width":""])},[(0,e.renderSlot)(m.$slots,"icon",{},function(){return[m.globalHasSlot("itemIconRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemIconRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.svgIcon=="string"&&m.svgIcon?((0,e.openBlock)(),(0,e.createElementBlock)("svg",(0,e.mergeProps)({key:1,class:"icon svg"},m.svgProps),[(0,e.createElementVNode)("use",{"xlink:href":m.svgIcon},null,8,le)],16)):typeof m.icon!="string"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:2,vnode:m.icon,data:m.icon},null,8,["vnode","data"])):typeof m.icon=="string"&&m.icon!==""?((0,e.openBlock)(),(0,e.createElementBlock)("i",{key:3,class:(0,e.normalizeClass)(m.icon+" icon "+m.iconFontClass+" "+m.globalIconFontClass)},null,2)):(0,e.createCommentVNode)("",!0)]}),m.checked?(0,e.renderSlot)(m.$slots,"check",{key:0},function(){return[m.globalHasSlot("itemCheckRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemCheckRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(ee)]}):(0,e.createCommentVNode)("",!0)],2),(0,e.renderSlot)(m.$slots,"label",{},function(){return[m.globalHasSlot("itemLabelRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemLabelRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.label=="string"?((0,e.openBlock)(),(0,e.createElementBlock)("span",O,(0,e.toDisplayString)(m.label),1)):((0,e.openBlock)(),(0,e.createBlock)(oe,{key:2,vnode:m.label,data:m.label},null,8,["vnode","data"]))]})]),(0,e.createElementVNode)("div",N,[m.shortcut?(0,e.renderSlot)(m.$slots,"shortcut",{key:0},function(){return[m.globalHasSlot("itemShortcutRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemShortcutRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("span",se,(0,e.toDisplayString)(m.shortcut),1)]}):(0,e.createCommentVNode)("",!0),m.showRightArrow?(0,e.renderSlot)(m.$slots,"rightArrow",{key:1},function(){return[m.globalHasSlot("itemRightArrowRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemRightArrowRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(de)]}):(0,e.createCommentVNode)("",!0)])]})],34)),m.showSubMenu?(0,e.renderSlot)(m.$slots,"submenu",{key:3}):(0,e.createCommentVNode)("",!0)],512))}var S={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},z=(0,e.createElementVNode)("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),G=[z];function Y(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",S,G)}var K=y(3744);const Ie={},Oe=(0,K.Z)(Ie,[["render",Y]]),ke=Oe;var je={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},ye=(0,e.createElementVNode)("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),De=[ye];function _e(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",je,De)}const Je={},Ot=(0,K.Z)(Je,[["render",_e]]),Nt=Ot,Tt=(0,e.defineComponent)({name:"ContextMenuItem",components:{VNodeRender:C,ContextMenuIconCheck:ke,ContextMenuIconRight:Nt},props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup:function(m,M){var R=(0,e.toRefs)(m),U=R.clickHandler,fe=R.clickClose,he=R.clickableWhenHasChildren,oe=R.disabled,ee=R.hidden,de=R.label,Me=R.icon,A=R.iconFontClass,Ce=R.showRightArrow,$e=R.shortcut,We=R.hasChildren,Be=(0,e.ref)(!1),te=(0,e.ref)(!1),ae=(0,e.ref)(),Ne=(0,e.inject)("globalHasSlot"),Ue=(0,e.inject)("globalRenderSlot"),dt=(0,e.inject)("globalTheme"),pe=(0,e.inject)("globalIconFontClass"),Ve=(0,e.inject)("globalClickCloseClassName"),Qe=(0,e.inject)("globalIgnoreClickClassName"),et=(0,e.inject)("globalCloseMenu"),Re=(0,e.inject)("menuContext"),He={showSubMenu:function(){return Be.value?(Re.markActiveMenuItem(He,!0),!0):!!We.value&&(Xe(),!0)},isDisabledOrHidden:function(){return oe.value||ee.value},getElement:function(){return ae.value},focus:function(){return te.value=!0},blur:function(){return te.value=!1},click:Ge};function Ge(Le){if(!oe.value){if(Le){var Ae=Le.target;if(Ae.classList.contains("mx-context-no-clickable")||Qe&&Ae.classList.contains(Qe))return;if(Ve&&Ae.classList.contains(Ve))return Le.stopPropagation(),void et(m.rawMenuItem)}We.value?he.value?(typeof U.value=="function"&&U.value(Le),M.emit("click",Le)):Be.value||Xe():(typeof U.value=="function"&&U.value(Le),M.emit("click",Le),fe.value&&et(m.rawMenuItem))}}function Xe(Le){te.value=!1,Re.checkCloseOtherSubMenuTimeOut()||Re.closeOtherSubMenu(),oe.value||(Re.markActiveMenuItem(He),We.value&&(Le||Re.markThisOpenedByKeyBoard(),Re.addOpenedSubMenu(function(){te.value=!1,Be.value=!1,M.emit("subMenuClose")}),Be.value=!0,M.emit("subMenuOpen")))}return(0,e.onMounted)(function(){Re.isMenuItemDataCollectedFlag()?(0,e.nextTick)(function(){var Le=0,Ae=Re.getElement();if(Ae)for(var Ee=0,Ye=0;Ye<Ae.children.length;Ye++){var H=Ae.children[Ye];if(H.getAttribute("data-type")==="ContextMenuItem"){if(H===ae.value){Le=Ee;break}Ee++}}Re.addChildMenuItem(He,Le)}):Re.addChildMenuItem(He)}),(0,e.onBeforeUnmount)(function(){Re.removeChildMenuItem(He)}),{getItemDataForChildren:function(){return{disabled:oe.value,label:de.value,icon:Me.value,iconFontClass:A.value,showRightArrow:Ce.value,clickClose:fe.value,clickableWhenHasChildren:he.value,shortcut:$e.value,theme:dt,isOpen:Be,hasChildren:We,onClick:Ge,onMouseEnter:Xe,closeMenu:et}},showSubMenu:Be,keyBoardFocusMenu:te,menuItemRef:ae,globalHasSlot:Ne,globalRenderSlot:Ue,globalIconFontClass:pe,onMouseEnter:Xe,onClick:Ge}}}),Pt=(0,K.Z)(Tt,[["render",xe]]),bt=Pt;var Wt={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function Ht(m,M,R,U,fe,he){var oe=(0,e.resolveComponent)("VNodeRender");return m.globalHasSlot("separatorRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("separatorRender",{})}},null,8,["vnode"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",Wt))}const Z=(0,e.defineComponent)({name:"ContextMenuSperator",components:{VNodeRender:C},setup:function(){var m=(0,e.inject)("globalHasSlot"),M=(0,e.inject)("globalRenderSlot");return{globalHasSlot:m,globalRenderSlot:M}}}),B=(0,K.Z)(Z,[["render",Ht]]),ce=B,Te=(0,e.defineComponent)({name:"ContextSubMenu",components:{ContextMenuItem:bt,ContextMenuSeparator:ce,ContextMenuIconRight:Nt},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup:function(m){var M=(0,e.inject)("menuContext"),R=(0,e.inject)("globalOptions"),U=(0,e.inject)("globalHasSlot"),fe=(0,e.inject)("globalRenderSlot"),he=(0,e.inject)("globalTheme"),oe=M.zIndex,ee=M.getParentWidth,de=M.getParentHeight,Me=(0,e.toRefs)(m),A=Me.adjustPosition,Ce=(0,e.ref)(),$e=(0,e.ref)(),We=[],Be=(0,e.inject)("globalSetCurrentSubMenu"),te=[],ae=null,Ne=0;function Ue(){ae&&ae.blur()}function dt(H,be){if(H){for(var tt=be!==void 0?be:0;tt<te.length;tt++)if(!te[tt].isDisabledOrHidden()){pe(tt);break}}else for(var ft=be!==void 0?be:te.length-1;ft>=0;ft--)if(!te[ft].isDisabledOrHidden()){pe(ft);break}}function pe(H){if(ae&&Ue(),H!==void 0&&(ae=te[Math.max(0,Math.min(H,te.length-1))]),ae&&(ae.focus(),Ae.value)){var be=ae.getElement();be&&(Ge.value=Math.min(Math.max(-Xe.value,-be.offsetTop-be.offsetHeight+Ye.value),0))}}function Ve(){Be(Qe)}var Qe={isTopLevel:function(){return M.getParentContext()===null},closeSelfAndActiveParent:function(){var H=He.getParentContext();if(H){H.closeOtherSubMenu();var be=H.getSubMenuInstanceContext();if(be)return be.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:function(){var H;return(H=He.getParentContext())===null||H===void 0?void 0:H.closeOtherSubMenu()},moveCurrentItemFirst:function(){return dt(!0)},moveCurrentItemLast:function(){return dt(!1)},moveCurrentItemDown:function(){return dt(!0,ae?te.indexOf(ae)+1:0)},moveCurrentItemUp:function(){return dt(!1,ae?te.indexOf(ae)-1:0)},focusCurrentItem:function(){return pe()},openCurrentItemSubMenu:function(){var H;return!!ae&&((H=ae)===null||H===void 0?void 0:H.showSubMenu())},triggerCurrentItemClick:function(H){var be;return(be=ae)===null||be===void 0?void 0:be.click(H)}},et=!1,Re=!1,He={zIndex:oe+1,container:M.container,adjustPadding:R.adjustPadding||c.defaultAdjustPadding,getParentWidth:function(){var H;return((H=Ce.value)===null||H===void 0?void 0:H.offsetWidth)||0},getParentHeight:function(){var H;return((H=Ce.value)===null||H===void 0?void 0:H.offsetHeight)||0},getParentX:function(){return Ee.value.x},getParentY:function(){return Ee.value.y},getParentAbsX:function(){return Ce.value?d(Ce.value,M.container):0},getParentAbsY:function(){return Ce.value?u(Ce.value,M.container):0},getPositon:function(){return[0,0]},addOpenedSubMenu:function(H){We.push(H)},closeOtherSubMenu:function(){We.forEach(function(H){return H()}),We.splice(0,We.length),Be(Qe)},checkCloseOtherSubMenuTimeOut:function(){return!!Ne&&(clearTimeout(Ne),Ne=0,!0)},closeOtherSubMenuWithTimeOut:function(){var H=this;Ne=setTimeout(function(){Ne=0,H.closeOtherSubMenu()},200)},addChildMenuItem:function(H,be){be===void 0?te.push(H):te.splice(be,0,H)},removeChildMenuItem:function(H){te.splice(te.indexOf(H),1)},markActiveMenuItem:function(H){var be=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Ue(),ae=H,be&&pe()},markThisOpenedByKeyBoard:function(){et=!0},isOpenedByKeyBoardFlag:function(){return!!et&&(et=!1,!0)},isMenuItemDataCollectedFlag:function(){return Re},getElement:function(){return Ce.value||null},getParentContext:function(){return M},getSubMenuInstanceContext:function(){return Qe}};(0,e.provide)("menuContext",He);var Ge=(0,e.ref)(0),Xe=(0,e.ref)(0);function Le(H){Ge.value=H?Math.max(Ge.value-50,-Xe.value):Math.min(Ge.value+50,0)}var Ae=(0,e.ref)(!1),Ee=(0,e.ref)({x:0,y:0}),Ye=(0,e.ref)(0);return(0,e.onMounted)(function(){var H,be,tt,ft,In=M.getPositon();Ee.value={x:(H=(be=In[0])!==null&&be!==void 0?be:R.xOffset)!==null&&H!==void 0?H:0,y:(tt=(ft=In[1])!==null&&ft!==void 0?ft:R.yOffset)!==null&&tt!==void 0?tt:0},Be(Qe),(0,e.nextTick)(function(){var Pe=Ce.value;if(Pe&&$e.value){var Yt,Zt,Jt,Qt,en,tn,wt=M.container,nn=(Yt=ee==null?void 0:ee())!==null&&Yt!==void 0?Yt:0,To=(Zt=de==null?void 0:de())!==null&&Zt!==void 0?Zt:0,zt=typeof M.adjustPadding=="number"?M.adjustPadding:(Jt=(Qt=M.adjustPadding)===null||Qt===void 0?void 0:Qt.x)!==null&&Jt!==void 0?Jt:0,Dt=typeof M.adjustPadding=="number"?M.adjustPadding:(en=(tn=M.adjustPadding)===null||tn===void 0?void 0:tn.y)!==null&&en!==void 0?en:0,At=To>0?Dt:0,$o=document.documentElement.scrollHeight,Ro=document.documentElement.scrollWidth,Lo=Math.min(Ro,wt.offsetWidth),on=Math.min($o,wt.offsetHeight),rn=d(Pe,wt),sn=u(Pe,wt);m.direction.includes("l")?Ee.value.x-=Pe.offsetWidth+zt:m.direction.includes("r")?Ee.value.x+=nn+zt:(Ee.value.x+=nn/2,Ee.value.x-=(Pe.offsetWidth+zt)/2),m.direction.includes("t")?Ee.value.y-=Pe.offsetHeight+2*Dt:m.direction.includes("b")?Ee.value.y-=Dt:Ee.value.y-=(Pe.offsetHeight+Dt)/2,A.value&&(0,e.nextTick)(function(){rn=d(Pe,wt),sn=u(Pe,wt);var jo=rn+Pe.offsetWidth-Lo,Mn=sn+Pe.offsetHeight-on;if(Xe.value=Pe.offsetHeight-on-2*At,Ae.value=Mn>0,jo>0){var En=nn+Pe.offsetWidth-zt,On=rn;Ee.value.x-=En>On?On:En}if(Ae.value){var Tn=Mn,$n=sn;Ee.value.y-=Tn>$n?$n-At:Tn-2*At,Ye.value=on-2*At}else Ye.value=0})}Pe==null||Pe.focus({preventScroll:!0}),M.isOpenedByKeyBoardFlag()&&dt(!0),Re=!0})}),{menu:Ce,scroll:$e,options:R,zIndex:oe,constOptions:c,scrollValue:Ge,overflow:Ae,position:Ee,scrollHeight:Xe,maxHeight:Ye,globalHasSlot:U,globalRenderSlot:fe,globalTheme:he,onScroll:Le,onSubMenuBodyClick:Ve,solveNumberOrStringSize:_}}}),we=(0,K.Z)(Te,[["render",J]]),$t=we,Gt=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},setup:function(m,M){var R,U,fe,he,oe=(0,e.toRefs)(m),ee=oe.options,de=oe.show,Me=oe.container;(0,e.onMounted)(function(){de&&Ce()}),(0,e.onBeforeUnmount)(function(){Be()}),(0,e.watch)(de,function(pe){pe?Ce():Be()});var A={closeMenu:$e};function Ce(){We(),r(A)}function $e(pe){M.emit("update:show",!1),M.emit("close",pe),o(A)}function We(){setTimeout(function(){document.addEventListener("click",Ue,!0),document.addEventListener("contextmenu",Ue,!0),document.addEventListener("scroll",Ne,!0),!m.isFullScreenContainer&&Me.value&&Me.value.addEventListener("scroll",Ne,!0),ee.value.keyboardControl!==!1&&document.addEventListener("keydown",ae)},50)}function Be(){document.removeEventListener("contextmenu",Ue,!0),document.removeEventListener("click",Ue,!0),document.removeEventListener("scroll",Ne,!0),!m.isFullScreenContainer&&Me.value&&Me.value.removeEventListener("scroll",Ne,!0),ee.value.keyboardControl!==!1&&document.removeEventListener("keydown",ae)}M.expose({closeMenu:$e});var te=(0,e.ref)();function ae(pe){var Ve,Qe,et,Re,He,Ge,Xe,Le,Ae=!0;switch(pe.key){case"Escape":var Ee,Ye;((Ee=te.value)===null||Ee===void 0?void 0:Ee.isTopLevel())===!1?(Ye=te.value)===null||Ye===void 0||Ye.closeCurrentSubMenu():$e();break;case"ArrowDown":(Ve=te.value)===null||Ve===void 0||Ve.moveCurrentItemDown();break;case"ArrowUp":(Qe=te.value)===null||Qe===void 0||Qe.moveCurrentItemUp();break;case"Home":(et=te.value)===null||et===void 0||et.moveCurrentItemFirst();break;case"End":(Re=te.value)===null||Re===void 0||Re.moveCurrentItemLast();break;case"ArrowLeft":var H,be,tt;(H=te.value)!==null&&H!==void 0&&H.closeSelfAndActiveParent()||(be=(tt=ee.value).onKeyFocusMoveLeft)===null||be===void 0||be.call(tt);break;case"ArrowRight":(He=te.value)!==null&&He!==void 0&&He.openCurrentItemSubMenu()||(Ge=(Xe=ee.value).onKeyFocusMoveRight)===null||Ge===void 0||Ge.call(Xe);break;case"Enter":(Le=te.value)===null||Le===void 0||Le.triggerCurrentItemClick(pe);break;default:Ae=!1;break}Ae&&te.value&&(pe.stopPropagation(),pe.preventDefault())}function Ne(){ee.value.closeWhenScroll!==!1&&$e()}function Ue(pe){dt(pe.target)}function dt(pe){for(;pe;){if(pe.classList&&pe.classList.contains("mx-menu-host"))return;pe=pe.parentNode}Be(),$e()}return(0,e.provide)("globalSetCurrentSubMenu",function(pe){return te.value=pe}),(0,e.provide)("globalOptions",ee.value),(0,e.provide)("globalCloseMenu",$e),(0,e.provide)("globalTheme",((R=ee.value)===null||R===void 0?void 0:R.theme)||"light"),(0,e.provide)("globalIsFullScreenContainer",m.isFullScreenContainer),(0,e.provide)("globalClickCloseClassName",(U=ee.value)===null||U===void 0?void 0:U.clickCloseClassName),(0,e.provide)("globalIgnoreClickClassName",(fe=ee.value)===null||fe===void 0?void 0:fe.ignoreClickClassName),(0,e.provide)("globalIconFontClass",((he=ee.value)===null||he===void 0?void 0:he.iconFontClass)||"iconfont"),(0,e.provide)("globalHasSlot",function(pe){return M.slots[pe]!==void 0}),(0,e.provide)("globalRenderSlot",function(pe,Ve){return(0,e.renderSlot)(M.slots,pe,q({},Ve),function(){return[(0,e.h)("span","Render slot failed")]},!1)}),(0,e.provide)("menuContext",{zIndex:ee.value.zIndex||c.defaultZindex,container:Me.value,adjustPadding:{x:0,y:0},getParentAbsY:function(){return ee.value.x},getParentAbsX:function(){return ee.value.y},getParentX:function(){return 0},getParentY:function(){return 0},getParentWidth:function(){return 0},getParentHeight:function(){return 0},getPositon:function(){return[ee.value.x,ee.value.y]},closeOtherSubMenuWithTimeOut:function(){},checkCloseOtherSubMenuTimeOut:function(){return!1},addOpenedSubMenu:function(){},closeOtherSubMenu:function(){},getParentContext:function(){return null},getSubMenuInstanceContext:function(){return null},getElement:function(){return null},addChildMenuItem:function(){},removeChildMenuItem:function(){},markActiveMenuItem:function(){},markThisOpenedByKeyBoard:function(){},isOpenedByKeyBoardFlag:function(){return!1},isMenuItemDataCollectedFlag:function(){return!1}}),function(){var pe,Ve;return de.value?[(0,e.h)("div",{class:"mx-menu-ghost-host"},[(0,e.h)($t,{class:"mx-menu-host",items:(pe=ee.value)===null||pe===void 0?void 0:pe.items,adjustPosition:(Ve=ee.value)===null||Ve===void 0?void 0:Ve.adjustPosition,maxWidth:ee.value.maxWidth||c.defaultMaxWidth,minWidth:ee.value.minWidth||c.defaultMinWidth,direction:ee.value.direction||c.defaultDirection},{default:M.slots.default})])]:[]}}}),Kt=Gt,ge=Kt,it=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup:function(m,M){var R=(0,e.toRefs)(m),U=R.options,fe=R.show;return M.expose({closeMenu:function(){return M.emit("update:show",!1)}}),function(){var he=I(U.value),oe=he.isNew,ee=he.container,de=he.eleId,Me=fe.value?[(0,e.h)(ge,{options:U,show:!0,container:ee,isFullScreenContainer:!oe,"onUpdate:show":function(A){return M.emit("update:show",A)},onClose:function(A){var Ce,$e;M.emit("update:show",!1),M.emit("close"),(Ce=($e=U.value).onClose)===null||Ce===void 0||Ce.call($e,A)}},M.slots)]:[];return[(0,e.h)(e.Teleport,{to:"#".concat(de)},Me)]}}}),io=it,Cn=io;function qt(m){return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},qt(m)}const lo=(0,e.defineComponent)({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup:function(m,M){var R=(0,e.inject)("globalOptions"),U=(0,e.toRefs)(m),fe=U.adjustSubMenuPosition,he=U.maxWidth,oe=U.minWidth,ee=typeof fe.value<"u"?fe.value:R.adjustPosition;return function(){return(0,e.h)(bt,q(q({},m),{},{showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:qt(M.slots.default)!==void 0}),M.slots.default?{submenu:function(){return(0,e.h)($t,{maxWidth:he.value,minWidth:oe.value,adjustPosition:ee},{default:M.slots.default})}}:void 0)}}}),uo=lo,wn=uo;function co(m,M,R,U){var fe=(0,e.h)(ge,{options:m,show:!0,container:M,isFullScreenContainer:!R,onClose:function(he){var oe;(0,e.render)(null,M),(oe=m.onClose)===null||oe===void 0||oe.call(m,he)}},U);return(0,e.render)(fe,M),fe.component}function Sn(m,M){var R=I(m),U=co(m,R.container,R.isNew,M);return U.exposed}const Xt={install:function(m){m.config.globalProperties.$contextmenu=Sn,m.component("ContextMenu",Cn),m.component("ContextMenuItem",bt),m.component("ContextMenuGroup",wn),m.component("ContextMenuSperator",ce),m.component("ContextMenuSeparator",ce),m.component("ContextSubMenu",$t)},showContextMenu:function(m,M){return Sn(m,M)},closeContextMenu:a,transformMenuPosition:v};var po={key:0,ref:"menuBarContent",class:"mx-menu-bar-content"},fo={key:1,ref:"menuBarContent",class:"mx-menu-bar-content"},mo=["onClick","onMouseenter"];function vo(m,M,R,U,fe,he){var oe,ee=(0,e.resolveComponent)("MenuBarIconMenu");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(["mx-menu-bar",(oe=m.options.theme)!==null&&oe!==void 0?oe:"",m.options.mini?"mini":""]),onFocus:M[1]||(M[1]=function(){return m.onFocus&&m.onFocus.apply(m,arguments)}),onBlur:M[2]||(M[2]=function(){return m.onBlur&&m.onBlur.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"prefix"),m.options.mini?((0,e.openBlock)(),(0,e.createElementBlock)("div",po,[(0,e.createElementVNode)("div",{class:"mx-menu-bar-item",onClick:M[0]||(M[0]=function(de){return m.onItemClick(0,null)})},[(0,e.createVNode)(ee)])],512)):((0,e.openBlock)(),(0,e.createElementBlock)("div",fo,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.menuItems,function(de,Me){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:Me,class:(0,e.normalizeClass)(["mx-menu-bar-item",de==m.menuActive?"active":""]),onClick:function(A){return m.onItemClick(Me,de)},onMouseenter:function(A){return m.onItemEnter(Me,de)}},(0,e.toDisplayString)(de.label),43,mo)}),128))],512)),(0,e.renderSlot)(m.$slots,"suffix")],34)}var go={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},ho=(0,e.createElementVNode)("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),yo=(0,e.createElementVNode)("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),bo=(0,e.createElementVNode)("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1),_o=[ho,yo,bo];function xo(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",go,_o)}const ko={},Co=(0,K.Z)(ko,[["render",xo]]),wo=Co,So=(0,e.defineComponent)({name:"MenuBar",emits:[],props:{options:{type:Object,default:null}},components:{MenuBarIconMenu:wo},setup:function(m){var M=(0,e.ref)(),R=(0,e.ref)(!1),U=(0,e.ref)([]),fe=(0,e.ref)(null);function he(){R.value=!0}function oe(){R.value=!1}(0,e.onMounted)(function(){U.value=m.options.items||[]}),(0,e.watch)(function(){return m.options},function(){U.value=m.options.items||[]});var ee=null,de=-1;function Me(){de<U.value.length-1?de++:de=0,Ce(de,U.value[de])}function A(){de>0?de--:de=U.value.length-1,Ce(de,U.value[de])}function Ce(te,ae){var Ne;if(de=te,ae.children){ee&&(ee.closeMenu(),ee=null,R.value=!0),fe.value=ae;var Ue=(Ne=M.value)===null||Ne===void 0?void 0:Ne.children[te];Ue&&(ee=Xt.showContextMenu(q(q({},m.options),{},{items:ae.children,x:d(Ue),y:u(Ue)+Ue.offsetHeight,onKeyFocusMoveLeft:function(){A()},onKeyFocusMoveRight:function(){Me()},onClose:function(){fe.value==ae&&(R.value=!1,fe.value=null)}})))}}function $e(){de=0;var te=M.value;te&&(ee=Xt.showContextMenu(q(q({},m.options),{},{x:d(te),y:u(te)+te.offsetHeight})))}function We(te,ae){ae?(R.value=!0,Ce(te,ae),ae.onClick&&(ae.clickableWhenHasChildren===!0&&ae.children&&ae.children.length>0||!ae.children||ae.children.length===0)&&ae.onClick()):$e()}function Be(te,ae){R.value&&Ce(te,ae)}return{menuItems:U,menuActive:fe,menuBarContent:M,menuBarActive:R,onFocus:he,onBlur:oe,onItemClick:We,onItemEnter:Be}}}),Io=(0,K.Z)(So,[["render",vo]]),Mo=Io,Eo=Xt,Oo=Eo})(),k})())})(Qn);var ze=Qn.exports;const xs=j("span",{class:"icon"},"@",-1),ks=me({__name:"index",props:{uid:{},options:{}},setup(p){var a;const s=p,l=qn(s.uid),f=(a=Ct())==null?void 0:a.userInfo,h=ct(),y=gn(),k=W(()=>y.countInfo),n=W(()=>(f==null?void 0:f.uid)===l.value),i=W(()=>(f==null?void 0:f.power)===Vn.ADMIN),e=(c,u)=>rt.emit("onSelectPerson",{uid:c,ignoreCheck:u}),t=async()=>{const c=s.uid;c&&await qe.blockUser({uid:c}).send()},r=async()=>{h.addFriendModalInfo.show=!0,h.addFriendModalInfo.uid=s.uid},o=async()=>{await qe.removeGroupMember({uid:s.uid,roomId:h.currentSession.roomId}).send(),y.getGroupUserList(!0)};return(c,u)=>{const d=at,v=gt("login-show"),b=gt("friends");return E(),ie(x(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:X(()=>[Se((E(),ie(x(ze.ContextMenuItem),{label:"艾特Ta",onClick:u[0]||(u[0]=g=>e==null?void 0:e(s.uid,!0))},{icon:X(()=>[xs]),_:1})),[[v]]),i.value?(E(),ie(x(ze.ContextMenuItem),{key:0,label:"拉黑(管理)",onClick:t},{icon:X(()=>[$(d,{icon:"lahei",size:13})]),_:1})):re("",!0),Se((E(),ie(x(ze.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:r},{icon:X(()=>[$(d,{icon:"tianjia",size:13})]),_:1})),[[b,l.value]]),[x(dn).LORD,x(dn).ADMIN].includes(k.value.role)&&!n.value?(E(),ie(x(ze.ContextMenuItem),{key:1,vLoginShow:"",label:"剔出群聊",onClick:o},{icon:X(()=>[$(d,{icon:"yichu",size:13})]),_:1})):re("",!0)]),_:1},8,["options"])}}});const Cs=me({__name:"index",props:{user:{}},setup(p){var n;const l=qn(p.user),f=Ut((n=l.value)==null?void 0:n.uid),h=D(!1),y=D({x:0,y:0}),k=i=>{if(!Ct().isSign)return;const{x:e,y:t}=i;y.value.x=e,y.value.y=t,h.value=!0};return(i,e)=>{var r;const t=yn;return E(),L("li",{class:"user-list-item",tabindex:"0",key:l.value.uid,onContextmenu:e[1]||(e[1]=It(o=>k(o),["prevent","stop"]))},[$(t,{src:x(f).avatar,size:24,showStatus:"",online:l.value.activeStatus===x(Ko).ONLINE},null,8,["src","online"]),Fe(" "+ue(x(f).name)+" ",1),$(ks,{show:h.value,"onUpdate:show":e[0]||(e[0]=o=>h.value=o),options:y.value,uid:(r=l.value)==null?void 0:r.uid},null,8,["show","options","uid"])],32)}}});const ws=ht(Cs,[["__scopeId","data-v-40783a4b"]]),Ss={class:"user-list-box"},Is={class:"user-list-header"},Ms={key:0,class:"list-no-data"},Es=me({__name:"index",setup(p){const s=D(),l=gn(),f=ct(),h=Wn(),y=W(()=>l.userList),k=W(()=>l.countInfo);yt(()=>{let e;Vt(()=>{e=new IntersectionObserver(async t=>{var r;(r=t==null?void 0:t[0])!=null&&r.isIntersecting&&(await l.loadMore(),s.value&&e.unobserve(s.value),setTimeout(()=>{s.value&&e.observe(s.value)},500))}),s.value&&e.observe(s.value)}),xn(()=>{s.value&&e.unobserve(s.value)})});const n=()=>l.showGroupList=!1,i=()=>{f.createGroupModalInfo.show=!0,f.createGroupModalInfo.isInvite=!0,console.log("cachedStore.currentAtUsersList",h.currentAtUsersList),f.createGroupModalInfo.selectedUid=h.currentAtUsersList.map(e=>e.uid)};return(e,t)=>{var a,c;const r=Gn,o=tr;return E(),L("div",Ss,[j("div",{class:ve(["user-list-mask",x(l).showGroupList?"show":""]),onClick:n},null,2),j("div",{class:ve(["user-list-wrapper",x(l).showGroupList?"show":""])},[j("div",Is,[Fe(" 在线人数："+ue(k.value.onlineNum||0)+" ",1),$(r,{type:"primary",icon:x(qo),circle:"",size:"small",onClick:i},null,8,["icon"])]),Se((E(),ie(pr,{tag:"ul",name:"fade",class:"user-list"},{default:X(()=>[(E(!0),L(st,null,Lt(y.value,u=>(E(),ie(ws,{key:u.uid,user:u},null,8,["user"]))),128)),j("li",{key:"visible_el",ref_key:"groupListLastElRef",ref:s}," ",512)]),_:1})),[[Ze,(a=y.value)==null?void 0:a.length],[o,x(l).userListOptions.loading,void 0,{lock:!0}]]),((c=y.value)==null?void 0:c.length)===0?(E(),L("div",Ms,"暂无成员~")):re("",!0)],2)])}}});const Os=ht(Es,[["__scopeId","data-v-3c6ca703"]]),Ts={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},$s=j("path",{fill:"currentColor",d:"M104.704 338.752a64 64 0 0 1 90.496 0l316.8 316.8l316.8-316.8a64 64 0 0 1 90.496 90.496L557.248 791.296a64 64 0 0 1-90.496 0L104.704 429.248a64 64 0 0 1 0-90.496z"},null,-1),Rs=[$s];function Ls(p,s){return E(),L("svg",Ts,Rs)}const js={name:"ep-arrow-down-bold",render:Ls},Bs={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ns=j("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Ps=[Ns];function zs(p,s){return E(),L("svg",Bs,Ps)}const Ds={name:"ep-loading",render:zs};var As=Xo,Fs=function(){return As.Date.now()},Us=Fs,Vs=/\s/;function Ws(p){for(var s=p.length;s--&&Vs.test(p.charAt(s)););return s}var Hs=Ws,Gs=Hs,Ks=/^\s+/;function qs(p){return p&&p.slice(0,Gs(p)+1).replace(Ks,"")}var Xs=qs,Ys=Yo,Zs=Zo,Js="[object Symbol]";function Qs(p){return typeof p=="symbol"||Zs(p)&&Ys(p)==Js}var ea=Qs,ta=Xs,Pn=hn,na=ea,zn=0/0,oa=/^[-+]0x[0-9a-f]+$/i,ra=/^0b[01]+$/i,sa=/^0o[0-7]+$/i,aa=parseInt;function ia(p){if(typeof p=="number")return p;if(na(p))return zn;if(Pn(p)){var s=typeof p.valueOf=="function"?p.valueOf():p;p=Pn(s)?s+"":s}if(typeof p!="string")return p===0?p:+p;p=ta(p);var l=ra.test(p);return l||sa.test(p)?aa(p.slice(2),l?2:8):oa.test(p)?zn:+p}var la=ia,ua=hn,un=Us,Dn=la,ca="Expected a function",da=Math.max,pa=Math.min;function fa(p,s,l){var f,h,y,k,n,i,e=0,t=!1,r=!1,o=!0;if(typeof p!="function")throw new TypeError(ca);s=Dn(s)||0,ua(l)&&(t=!!l.leading,r="maxWait"in l,y=r?da(Dn(l.maxWait)||0,s):y,o="trailing"in l?!!l.trailing:o);function a(_){var C=f,T=h;return f=h=void 0,e=_,k=p.apply(T,C),k}function c(_){return e=_,n=setTimeout(v,s),t?a(_):k}function u(_){var C=_-i,T=_-e,P=s-C;return r?pa(P,y-T):P}function d(_){var C=_-i,T=_-e;return i===void 0||C>=s||C<0||r&&T>=y}function v(){var _=un();if(d(_))return b(_);n=setTimeout(v,u(_))}function b(_){return n=void 0,o&&f?a(_):(f=h=void 0,k)}function g(){n!==void 0&&clearTimeout(n),e=0,f=i=h=n=void 0}function w(){return n===void 0?k:b(un())}function I(){var _=un(),C=d(_);if(f=arguments,h=this,i=_,C){if(n===void 0)return c(i);if(r)return clearTimeout(n),n=setTimeout(v,s),a(i)}return n===void 0&&(n=setTimeout(v,s)),k}return I.cancel=g,I.flush=w,I}var ma=fa,va=ma,ga=hn,ha="Expected a function";function ya(p,s,l){var f=!0,h=!0;if(typeof p!="function")throw new TypeError(ha);return ga(l)&&(f="leading"in l?!!l.leading:f,h="trailing"in l?!!l.trailing:h),va(p,s,{leading:f,maxWait:s,trailing:h})}var ba=ya;const eo=wr(ba);class _a{constructor(s,l){an(this,"sizes",new Map);an(this,"offset");this.init(s,l)}init(s,l){this.param=s,this.callUpdate=l,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.lastCalcIndex=0,this.fixedSizeValue=0,this.calcType="INIT",this.offset=0,this.direction="",this.range=Object.create(null),s&&this.checkRange(0,s.keeps-1)}destroy(){this.init(null,null)}getRange(){const s=Object.create(null);return s.start=this.range.start,s.end=this.range.end,s.padFront=this.range.padFront,s.padBehind=this.range.padBehind,s}isBehind(){return this.direction==="BEHIND"}isFront(){return this.direction==="FRONT"}getOffset(s){return(s<1?0:this.getIndexOffset(s))+this.param.slotHeaderSize}updateParam(s,l){this.param&&s in this.param&&(s==="uniqueIds"&&this.sizes.forEach((f,h)=>{l.includes(h)||this.sizes.delete(h)}),this.param[s]=l)}saveSize(s,l){this.sizes.set(s,l),this.calcType==="INIT"?(this.fixedSizeValue=l,this.calcType="FIXED"):this.calcType==="FIXED"&&this.fixedSizeValue!==l&&(this.calcType="DYNAMIC",delete this.fixedSizeValue),this.calcType!=="FIXED"&&typeof this.firstRangeTotalSize<"u"&&(this.sizes.size<Math.min(this.param.keeps,this.param.uniqueIds.length)?(this.firstRangeTotalSize=[...this.sizes.values()].reduce((f,h)=>f+h,0),this.firstRangeAverageSize=Math.round(this.firstRangeTotalSize/this.sizes.size)):delete this.firstRangeTotalSize)}handleDataSourcesChange(){let s=this.range.start;this.isFront()?s=s-2:this.isBehind()&&(s=s+2),s=Math.max(s,0),this.updateRange(this.range.start,this.getEndByStart(s))}handleSlotSizeChange(){this.handleDataSourcesChange()}handleScroll(s){this.direction=s<this.offset?"FRONT":"BEHIND",this.offset=s,this.param&&(this.direction==="FRONT"?this.handleFront():this.direction==="BEHIND"&&this.handleBehind())}handleFront(){const s=this.getScrollOvers();if(s>this.range.start)return;const l=Math.max(s-this.param.buffer,0);this.checkRange(l,this.getEndByStart(l))}handleBehind(){const s=this.getScrollOvers();s<this.range.start+this.param.buffer||this.checkRange(s,this.getEndByStart(s))}getScrollOvers(){const s=this.offset-this.param.slotHeaderSize;if(s<=0)return 0;if(this.isFixedType())return Math.floor(s/this.fixedSizeValue);let l=0,f=0,h=0,y=this.param.uniqueIds.length;for(;l<=y;){if(f=l+Math.floor((y-l)/2),h=this.getIndexOffset(f),h===s)return f;h<s?l=f+1:h>s&&(y=f-1)}return l>0?--l:0}getIndexOffset(s){if(!s)return 0;let l=0,f=0;for(let h=0;h<s;h++)f=this.sizes.get(this.param.uniqueIds[h]),l=l+(typeof f=="number"?f:this.getEstimateSize());return this.lastCalcIndex=Math.max(this.lastCalcIndex,s-1),this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex()),l}isFixedType(){return this.calcType==="FIXED"}getLastIndex(){return this.param.uniqueIds.length-1}checkRange(s,l){const f=this.param.keeps;this.param.uniqueIds.length<=f?(s=0,l=this.getLastIndex()):l-s<f-1&&(s=l-f+1),this.range.start!==s&&this.updateRange(s,l)}updateRange(s,l){this.range.start=s,this.range.end=l,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}getEndByStart(s){const l=s+this.param.keeps-1;return Math.min(l,this.getLastIndex())}getPadFront(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}getPadBehind(){const s=this.range.end,l=this.getLastIndex();return this.isFixedType()?(l-s)*this.fixedSizeValue:this.lastCalcIndex===l?this.getIndexOffset(l)-this.getIndexOffset(s):(l-s)*this.getEstimateSize()}getEstimateSize(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}const xa=me({name:"VirtualListItem",props:{index:{type:Number},source:{type:Object},component:{type:[Object,Function]},uniqueKey:{type:[String,Number]},itemProps:{type:Object,default:()=>{}},dataPropName:{type:String,default:"source"}},emits:["itemResize"],setup(p,{emit:s}){const l=D(null);let f=null;const h=()=>{const{uniqueKey:y}=p,k=l.value?l.value.offsetHeight:0;s("itemResize",y,k)};return yt(()=>{typeof ResizeObserver<"u"&&(f=new ResizeObserver(()=>{h()}),l.value&&f.observe(l.value))}),fr(()=>{h()}),xn(()=>{f&&(f.disconnect(),f=null)}),()=>{const{component:y,index:k,source:n,uniqueKey:i,itemProps:e,dataPropName:t}=p,r={...e,index:k,[t]:n};return $("div",bn({key:i,ref:l},{index:k}),[$(y,r,null)])}}}),to=me({name:"VirtualList",props:{data:{type:Array,required:!0,default:()=>[]},dataKey:{type:[String,Function],required:!0},item:{type:[Object,Function],required:!0},keeps:{type:Number,default:30},size:{type:Number,default:50},start:{type:Number,default:0},offset:{type:Number,default:0},topThreshold:{type:Number,default:0},bottomThreshold:{type:Number,default:0},itemProps:{type:Object},dataPropName:{type:String,default:"source"}},setup(p,{emit:s,expose:l}){const f=D(null),h=D(),y=D(null);let k;ot(()=>p.data.length,()=>{k.updateParam("uniqueIds",a()),k.handleDataSourcesChange()}),ot(()=>p.keeps,_=>{k.updateParam("keeps",_),k.handleSlotSizeChange()}),ot(()=>p.start,_=>{d(_)}),ot(()=>p.offset,_=>v(_));const n=_=>k.sizes.get(_),i=()=>h.value?Math.ceil(h.value.scrollTop):0,e=()=>{const _="clientHeight";return h.value?Math.ceil(h.value[_]):0},t=()=>{const _="scrollHeight";return h.value?Math.ceil(h.value[_]):0},r=(_,C,T)=>{s("scroll",{offset:_,clientSize:C,scrollSize:T}),k.isFront()&&p.data.length&&_-p.topThreshold<=0?s("totop"):k.isBehind()&&_+C+p.bottomThreshold>=T&&s("tobottom")},o=()=>{const _=i(),C=e(),T=t();_<0||_+C>T+1||!T||(k.handleScroll(_),r(_,C,T))},a=()=>{const{dataKey:_,data:C=[]}=p;return C.map(T=>typeof _=="function"?_(T):T[_])},c=_=>{f.value=_},u=()=>{k=new _a({slotHeaderSize:0,slotFooterSize:0,keeps:p.keeps,estimateSize:p.size,buffer:Math.round(p.keeps/3),uniqueIds:a()},c),f.value=k.getRange()},d=(_,C,T=0)=>{if(_>=p.data.length-1)w();else{const P=k.getOffset(_)-T;v(P,C)}},v=(_,C=!1)=>{h.value&&h.value.scroll({left:0,top:_,behavior:C?"smooth":"auto"})},b=()=>{const _=[],{start:C,end:T}=f.value,{data:P,dataKey:q,item:F,itemProps:J,dataPropName:V}=p;for(let Q=C;Q<=T;Q++){const le=P[Q];if(le){const O=typeof q=="function"?q(le):le[q];(typeof O=="string"||typeof O=="number")&&_.push($(xa,{index:Q,uniqueKey:O,source:le,component:F,itemProps:J,dataPropName:V,onItemResize:g},null))}}return _},g=(_,C)=>{k.saveSize(_,C),s("resized",_,C)},w=_=>{if(y.value){const C=y.value.offsetTop;v(C,_),setTimeout(()=>{i()+e()<t()&&w(_)},3)}},I=()=>k.sizes.size;return mr(()=>{u()}),vr(()=>{v(k.offset)}),yt(()=>{p.start?d(p.start):p.offset&&v(p.offset),s("ok")}),xn(()=>{k.destroy()}),l({scrollToBottom:w,getSizes:I,getSize:n,getOffset:i,getScrollSize:t,getClientSize:e,scrollToOffset:v,scrollToIndex:d}),()=>{const{padFront:_,padBehind:C}=f.value;return $("div",{ref:h,onScroll:o},[$("div",{style:{padding:`${_}px 0px ${C}px`}},[b()]),$("div",{ref:y,style:{width:"100%",height:"0px"}},null)])}}}),ka=p=>{if(p===0||!p)return"0 B";const s=["B","KB","MB","GB","TB"],l=1024,f=Math.floor(Math.log(p)/Math.log(l));return parseFloat((p/Math.pow(l,f)).toFixed(2))+" "+s[f]},no=(p,s,l={maxWidth:200,maxHeight:150})=>{const{maxWidth:f,maxHeight:h}=l;return p<f&&s<h?s:p>s?f/p*s:(p===s||p<s,h)},Ca={jpg:"jpg",jpeg:"jpg",png:"jpg",webp:"jpg",mp4:"mp4",mov:"mp4",avi:"mp4",rmvb:"mp4",doc:"doc",docx:"doc",mp3:"mp3",wav:"mp3",aac:"mp3",flac:"mp3",pdf:"pdf",ppt:"ppt",pptx:"ppt",xls:"xls",xlsx:"xls",zip:"zip",rar:"zip","7z":"zip",txt:"txt",log:"log",svg:"svg",sketch:"sketch",exe:"exe",md:"md"},wa=p=>{if(!p)return"other";const s=p.toLowerCase().split(".").pop();return s&&Ca[s]||"other"},An=(p,s,l)=>{const{size:f,width:h,height:y,downloadUrl:k,name:n,second:i,tempUrl:e,thumbWidth:t,thumbHeight:r,thumbUrl:o,thumbSize:a}=p,u={size:f,url:l?e:k};let d={};return s===ne.IMAGE?d={...u,width:h,height:y}:s===ne.VOICE?d={...u,second:i}:s===ne.VIDEO?d={...u,thumbWidth:t,thumbHeight:r,thumbUrl:o,thumbSize:a}:s===ne.FILE&&(d={...u,fileName:n,url:k}),{body:d,type:s}},Sa=async p=>await(await fetch(p)).blob(),Ia=async(p,s)=>{const l=await Sa(p),f=l.type,h=s||Date.now()+"_emoji.png";return new File([l],h,{type:f})},Ma=["src"],Ea=me({__name:"image",props:{body:{}},setup(p){const s=p,l=nr(),f=D(!1),h=D(!0),y=W(()=>{const{width:i,height:e}=s.body;return no(i,e)}),k=()=>{const{width:i,height:e}=s.body;return`width: ${y.value/e*i}px`},n=()=>{h.value=!1,f.value=!0};return(i,e)=>{var r,o;const t=at;return E(),L("div",{class:"image",style:nt({height:y.value+"px"}),onClick:e[1]||(e[1]=a=>{var c;return x(l).show((c=i.body)==null?void 0:c.url)})},[f.value?(E(),L("div",{key:0,class:"image-slot",style:nt(k())},[$(t,{icon:"dazed",size:36,colorful:""}),Fe(" 加载失败 ")],4)):(E(),L(st,{key:1},[(r=i.body)!=null&&r.url?(E(),L("img",{key:0,src:(o=i.body)==null?void 0:o.url,onClick:e[0]||(e[0]=a=>{var c;return x(l).show((c=i.body)==null?void 0:c.url)}),onError:n},null,40,Ma)):re("",!0)],64))],4)}}}),Oa={class:"saying"},Ta={class:"num"},$a=me({__name:"voice",props:{body:{}},setup(p){const s=p,l=or(),f=W(()=>l.previewUrl===s.body.url&&l.isPlaying);return(h,y)=>{var n;const k=at;return E(),L("div",{class:"voice",onClick:y[0]||(y[0]=i=>x(l).open(h.body.url))},[j("div",Oa,[j("span",{class:ve(["shelter",{play:f.value}])},null,2),$(k,{icon:"saying",size:18})]),j("span",Ta,ue((n=h.body)==null?void 0:n.second)+'"',1)])}}});const Ra=()=>{const p=D(0),s=D(!1),{on:l,trigger:f}=_t(),h=n=>{const i=new URL(n).pathname,e=i.lastIndexOf(".");return e===-1?"":i.slice(e+1)},y=n=>{const i=new URL(n).pathname,e=i.lastIndexOf("/");return e===-1?"未知文件":i.slice(e+1)};return{onLoaded:l,downloadFile:(n,i,e)=>{s.value=!0;const t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="blob",t.onprogress=r=>{if(r.lengthComputable){const o=Math.floor(r.loaded/r.total*100);p.value=o}},t.onload=()=>{if(t.status===200){const r=new Blob([t.response],{type:"application/octet-stream"}),o=document.createElement("a");o.href=URL.createObjectURL(r);const a=h(n),c=e||a;if(i)o.download=`${i}${c?".":""}${c}`;else{const u=y(n);o.download=u}o.click(),URL.revokeObjectURL(o.href),f("success")}else f("fail");p.value=0,s.value=!1},t.send()},process:p,isDownloading:s}},La=Xn("downloadQuenu",()=>{const s=jt([]),l=jt(new Map),f=e=>{s.push(e)},h=e=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},y=()=>{if(!s.length||l.size>=1)return;const e=s.shift();e&&k(e)},k=e=>{const{downloadFile:t,isDownloading:r,process:o,onLoaded:a}=Ra(),c=ot(o,()=>{l.set(e,{url:e,isDownloading:r.value,process:o.value})});a(()=>{c(),l.delete(e),y()}),e&&t(e)};return{quenu:s,addQuenuAction:f,removeQuenuAction:h,dequeue:y,downloadObjMap:l,download:e=>{f(e),y()},cancelDownload:e=>{s.includes(e)&&h(e)}}}),ja={class:"file"},Ba={class:"file-desc"},Na={class:"file-name"},Pa={class:"file-size"},za=me({__name:"file",props:{body:{}},setup(p){const s=p,{downloadObjMap:l,download:f,quenu:h,cancelDownload:y}=La(),k=()=>{f(s.body.url)},n=()=>{y(s.body.url)},i=W(()=>{var r;return((r=l.get(s.body.url))==null?void 0:r.isDownloading)||!1}),e=W(()=>{var r;return((r=l.get(s.body.url))==null?void 0:r.process)||0}),t=W(()=>h.includes(s.body.url));return(r,o)=>{var v,b,g;const a=at,c=Et,u=os,d=Jr;return E(),L("div",ja,[$(a,{icon:x(wa)((v=r.body)==null?void 0:v.fileName),size:32,colorful:""},null,8,["icon"]),j("div",Ba,[j("span",Na,ue(((b=r.body)==null?void 0:b.fileName)||"未知文件"),1),j("span",Pa,ue(x(ka)((g=r.body)==null?void 0:g.size)),1)]),t.value?(E(),ie(u,{key:0,class:"mx-1",size:"small",type:"warning",onClick:n},{default:X(()=>[Fe("等待下载 "),$(c,null,{default:X(()=>[$(x(Fn))]),_:1})]),_:1})):i.value?(E(),ie(d,{key:2,type:"circle",percentage:e.value,width:22,"stroke-width":1,"show-text":!1},null,8,["percentage"])):(E(),ie(a,{key:1,icon:"xiazai",size:22,onClick:k}))])}}}),Da=["src"],Aa=me({__name:"video",props:{body:{}},setup(p){const s=p,l=rr(),f=()=>{const h=s.body.thumbWidth||0,y=s.body.thumbHeight||0;return no(h,y)};return(h,y)=>{const k=at;return E(),L("div",{class:"video",style:nt(`height:${f()}px`),onClick:y[0]||(y[0]=n=>{var i;return x(l).open((i=h.body)==null?void 0:i.url)})},[$(k,{icon:"bofang",size:30}),j("img",{src:h.body.thumbUrl},null,8,Da)],4)}}}),Fa={class:"text"},Ua=["onClick"],Va={key:0,class:"text-card-image-wrapper"},Wa=["src"],Ha={class:"text-card-link-content"},Ga={class:"text-card-title ellipsis-1"},Ka={class:"text-card-desc ellipsis-2"},qa=me({__name:"text",props:{body:{}},setup(p){const s=p,l=s.body.urlContentMap||{},f=Object.keys(l),h=W(()=>{let n=s.body.content||"";n=n.replace(/&nbsp;/g," ");const i=new RegExp(`(@\\S+\\s|${f.join("|")}|\\S+\\s)`,"g");return n.split(i)}),y=n=>{n&&window.open(n.startsWith("http")?n:"//"+n,"_blank")};function k(n){const i=n.target;i&&(i.style.opacity="0")}return(n,i)=>(E(),L("div",Fa,[(E(!0),L(st,null,Lt(h.value,(e,t)=>(E(),L(st,null,[e.startsWith("@")&&e.trim()!==""&&e.trim()!=="@"?(E(),L("span",{key:e,class:"text-mention"},ue(e),1)):(E(),L(st,{key:1},[Fe(ue(e),1)],64)),x(f).includes(e)?(E(),L("div",{key:e+t,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-card",onClick:r=>y(e.trim())},[x(l)[e].image?(E(),L("div",Va,[j("img",{class:"text-card-image",src:x(l)[e].image,onError:k},null,40,Wa)])):re("",!0),j("div",Ha,[j("span",Ga,ue(x(l)[e].title),1),j("span",Ka,ue(x(l)[e].description),1)])],8,Ua)):re("",!0)],64))),256))]))}}),Xa={class:"image emoji"},Ya={key:0,class:"image-slot"},Za=["src"],Ja=me({__name:"emoji",props:{body:{}},setup(p){const s=D(!1),l=D(!0),f=()=>{l.value=!1,s.value=!0};return(h,y)=>{var n,i;const k=at;return E(),L("div",Xa,[s.value?(E(),L("div",Ya,[$(k,{icon:"dazed",size:36,colorful:""}),Fe(" 加载失败 ")])):(E(),L(st,{key:1},[(n=h.body)!=null&&n.url?(E(),L("img",{key:0,src:(i=h.body)==null?void 0:i.url,onError:f},null,40,Za)):re("",!0)],64))])}}}),Qa=me({__name:"index",props:{message:{}},setup(p){const s={[ne.UNKNOWN]:"",[ne.TEXT]:qa,[ne.RECALL]:"",[ne.SYSTEM]:"",[ne.IMAGE]:Ea,[ne.VOICE]:$a,[ne.FILE]:za,[ne.VIDEO]:Aa,[ne.EMOJI]:Ja};return(l,f)=>(E(),ie(_n(s[l.message.type]),{body:l.message.body},null,8,["body"]))}}),ei={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ti=j("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),ni=[ti];function oi(p,s){return E(),L("svg",ei,ni)}const ri={name:"ep-check",render:oi},oo=p=>{const s=W(()=>p.messageMark.userLike===mt.YES),l=W(()=>p.messageMark.userDislike===mt.YES),f=W(()=>p.messageMark.likeCount),h=W(()=>p.messageMark.dislikeCount);return{isLike:s,isDisLike:l,likeCount:f,dislikeCount:h,onLike:async()=>{const n=s.value?St.Cancel:St.Confirm;await qe.markMsg({actType:n,markType:Rn.LIKE,msgId:p.id}).send();const{likeCount:i}=p.messageMark,e=n===St.Confirm;p.messageMark.userLike=e?mt.YES:mt.NO,p.messageMark.likeCount=e?i+1:i-1,l.value&&(p.messageMark.userDislike=mt.NO,p.messageMark.dislikeCount=h.value-1)},onDisLike:async()=>{const n=l.value?St.Cancel:St.Confirm;await qe.markMsg({actType:n,markType:Rn.DISLIKE,msgId:p.id}).send();const{dislikeCount:i}=p.messageMark,e=n===St.Confirm;p.messageMark.userDislike=e?mt.YES:mt.NO,p.messageMark.dislikeCount=e?i+1:i-1,s.value&&(p.messageMark.userLike=mt.NO,p.messageMark.likeCount=f.value-1)}}},si={key:0,class:"msg-option"},ai={class:"msg-option-item",title:"回复"},ii={class:"msg-option-item",title:"点赞"},li={class:"msg-option-item",title:"不喜欢"},ui=me({__name:"index",props:{msg:{}},setup(p){const s=p,l=kt(),{isLike:f,isDisLike:h,onLike:y,onDisLike:k}=oo(s.msg.message),n=async i=>{i&&(l.currentMsgReply=i,rt.emit("focusMsgInput"))};return(i,e)=>{const t=at,r=gt("login");return i.msg.loading?re("",!0):(E(),L("div",si,[j("span",ai,[Se($(t,{icon:"reply",size:14},null,512),[[r,()=>n(i.msg)]])]),j("span",ii,[Se($(t,{icon:"like",size:14,class:ve([{"like-active":x(f)}])},null,8,["class"]),[[r,()=>x(y)()]])]),j("span",li,[Se($(t,{icon:"dislike",size:15,class:ve([{"dislike-active":x(h)}])},null,8,["class"]),[[r,()=>x(k)()]])])]))}}});const ci=ht(ui,[["__scopeId","data-v-80260998"]]),di=p=>new Promise((s,l)=>{try{const f=document.createElement("textarea");f.setAttribute("readonly","readonly"),f.value=p,f.style.zIndex="-1",document.body.appendChild(f),f.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(f),s(p)}catch(f){l(f)}}),pi=p=>{const s=document.createElement("canvas"),l=s.getContext("2d"),f=new Image;f.crossOrigin="Anonymous",f.src=p,f.onload=()=>{l&&(s.width=f.width,s.height=f.height,l.clearRect(0,0,l.canvas.width,l.canvas.height),l.drawImage(f,0,0),s.toBlob(async h=>{if(!h)return;const y=[new ClipboardItem({[h.type]:h})];try{await navigator.clipboard.write(y)}catch{}finally{s.remove()}}))}},kn=Xn("emoji",()=>{const p=D(!1),s=Ct(),l=D([]),f=async()=>{p.value=!0;const k=await qe.getEmoji({uid:s.userInfo.uid}).send().catch(()=>{p.value=!1});k&&(l.value=k)},h=async k=>{const{uid:n}=s.userInfo;!n||!k||(await qe.addEmoji({uid:n,expressionUrl:k}).send(),vt.success("添加成功"),await f())},y=async k=>{k&&(await qe.deleteEmoji({id:k}).send(),await f())};return f(),{emojiList:l,addEmoji:h,getEmojiList:f,deleteEmoji:y}}),ro=()=>{const p=D(!1),s=D(0),l=kn(),f=_t(),h=_t(),y=_t(),k=async(e,t)=>(p.value=!0,new Promise((r,o)=>{const a=new XMLHttpRequest;a.open("PUT",e,!0),a.setRequestHeader("Content-Type",t.type),a.upload.onprogress=c=>{s.value=Math.round(c.loaded/c.total*100)},a.onload=()=>{p.value=!1,a.status===200?(h.trigger(t),r(!0)):(y.trigger(t),o(!1))},a.onerror=()=>{y.trigger(t),o(!1)},a.send(t)})),n=async e=>new Promise(o=>{if(e.type==="image/gif"){o(e);return}const a=new Image,c=URL.createObjectURL(e);a.src=c,a.onload=()=>{const{height:u,width:d}=a;let v,b;d>u?(v=240,b=Math.round(u/d*240)):(b=240,v=Math.round(d/u*240));const g=document.createElement("canvas"),w=g.getContext("2d");g.height=240,g.width=240,w&&(w.clearRect(0,0,240,240),w.fillStyle="rgba(0, 0, 0, 0)",w.fillRect(0,0,240,240),w.drawImage(a,0,0,d,u,(240-v)/2,(240-b)/2,v,b),g.toBlob(I=>{if(!I)return;const _=Date.now()+"_emoji.png",C=new File([I],_,{type:"image/png"});o(C),URL.revokeObjectURL(c)},"image/png",.9))},a.onerror=()=>{URL.revokeObjectURL(c)}}),i=async e=>{const t=await n(e);if(!t)return;const{downloadUrl:r,uploadUrl:o}=await qe.getUploadUrl({fileName:t.name,scene:"2"}).send();o&&r&&(f.trigger({file:e,downloadUrl:r}),k(o,t).then(a=>{a&&l.addEmoji(r)}))};return{isEmojiUp:p,onStart:f.on,onFail:y.on,onSuccess:h.on,uploadEmoji:i}},fi=me({__name:"index",props:{msg:{},options:{}},setup(p){var c;const s=p,l=kn(),{uploadEmoji:f}=ro(),h=(c=Ct())==null?void 0:c.userInfo,y=kt(),k=W(()=>{var u;return((u=s.msg)==null?void 0:u.fromUser.uid)===h.uid}),n=W(()=>(h==null?void 0:h.power)===Vn.ADMIN),i=async()=>{const{id:u}=s.msg.message;u&&(await qe.recallMsg({roomId:1,msgId:u}).send(),y.updateRecallStatus({msgId:u}))},e=async()=>{const{uid:u}=s.msg.fromUser;u&&await qe.blockUser({uid:u}).send()},t=()=>{var d;const u=s.msg.message;if(u.type===ne.TEXT){const v=(d=u.body)==null?void 0:d.content;di(v),vt.success("复制成功~")}u.type===ne.IMAGE&&(pi(u.body.url),vt.success("复制成功~"))},r=()=>{const{body:u}=s.msg.message,d=u==null?void 0:u.url;if(!d)return;const v=new XMLHttpRequest;v.open("GET",d,!0),v.responseType="blob",v.onreadystatechange=()=>{if(v.status!=200)return vt.error("下载失败~");if(v.readyState===4&&v.status===200){const b=v.response;let g=document.createElement("a");g.href=URL.createObjectURL(b),g.download=u.fileName||"未知文件",g.dispatchEvent(new MouseEvent("click")),g.remove()}},v.send()},o=()=>{const{type:u,body:d}=s.msg.message;u===ne.EMOJI?l.addEmoji(d.url):Ia(d.url).then(v=>{f(v)})},a=()=>y.deleteMsg(s.msg.message.id);return(u,d)=>{const v=at,b=gt("login-show");return E(),ie(x(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:X(()=>[u.msg.message.type===x(ne).TEXT||u.msg.message.type===x(ne).IMAGE?(E(),ie(x(ze.ContextMenuItem),{key:0,label:"复制",onClick:t},{icon:X(()=>[$(v,{icon:"copy",size:13})]),_:1})):re("",!0),(u.msg.message.type===x(ne).EMOJI||u.msg.message.type===x(ne).IMAGE)&&!k.value&&x(l).emojiList.length<50?(E(),ie(x(ze.ContextMenuItem),{key:1,label:"添加到表情",onClick:o},{icon:X(()=>[$(v,{icon:"aixin",size:13})]),_:1})):re("",!0),(k.value||n.value)&&!u.msg.loading?(E(),ie(x(ze.ContextMenuItem),{key:2,label:"撤回消息",onClick:i},{icon:X(()=>[$(v,{icon:"chehui",size:14})]),_:1})):re("",!0),(u.msg.message.type===x(ne).FILE||u.msg.message.type===x(ne).IMAGE)&&!u.msg.loading?(E(),ie(x(ze.ContextMenuItem),{key:3,label:"下载",onClick:r},{icon:X(()=>[$(v,{icon:"xiazai",size:15})]),_:1})):re("",!0),Se($(x(ze.ContextMenuSeparator),null,null,512),[[b]]),Se((E(),ie(x(ze.ContextMenuItem),{label:"删除",onClick:a},{icon:X(()=>[$(v,{icon:"shanchu",size:13})]),_:1})),[[b]]),n.value?(E(),ie(x(ze.ContextMenuItem),{key:4,label:"拉黑(管理)",onClick:e},{icon:X(()=>[$(v,{icon:"lahei",size:13})]),_:1})):re("",!0)]),_:1},8,["options"])}}});const mi=j("span",{class:"icon"},"@",-1),vi=me({__name:"index",props:{uid:{},options:{}},setup(p){const s=p,l=ct(),f=async()=>{l.addFriendModalInfo.show=!0,l.addFriendModalInfo.uid=s.uid},h=(y,k)=>rt.emit("onSelectPerson",{uid:y,ignoreCheck:k});return(y,k)=>{const n=at,i=gt("login-show"),e=gt("friends");return E(),ie(x(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:X(()=>[Se((E(),ie(x(ze.ContextMenuItem),{label:"艾特Ta",onClick:k[0]||(k[0]=t=>h==null?void 0:h(s.uid,!0))},{icon:X(()=>[mi]),_:1})),[[i]]),Se((E(),ie(x(ze.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:f},{icon:X(()=>[$(n,{icon:"tianjia",size:13})]),_:1})),[[e,y.uid]])]),_:1},8,["options"])}}});const gi={key:0,class:"send-time-block"},hi={key:1,class:"send-time-block"},yi={class:"chat-item-user-info"},bi=["src"],_i={class:"user-ip"},xi={key:0,class:"send-time"},ki={key:0,class:"chat-item-read-count-text"},Ci={class:"ellipsis"},wi={key:1,class:"extra"},Si={key:0,class:"extra"},Ii=me({inheritAttrs:!1,__name:"index",props:{msg:{},isShowTime:{type:Boolean,default:!0},isShowTimeBlock:{type:Boolean,default:!0},bubbleMode:{default:"spread"},tooltipTrigger:{default:()=>"hover"}},setup(p){const s=p,{message:l,fromUser:f}=Yn(s.msg),h=Ct(),y=kt(),k=ct(),n=Ut(f.value.uid),i=W(()=>{var O;return(O=n==null?void 0:n.value)==null?void 0:O.wearingItemId}),e=ur(i),t=W(()=>f.value.uid===(h==null?void 0:h.userInfo.uid)),r=W(()=>({"chat-item":!0,"is-me":t.value,right:t.value&&s.bubbleMode==="spread"||s.bubbleMode==="right"})),o=D(null),a=D(null),c=D(),u=jt({read:0,unread:null}),d=Ft("virtualListRef"),v=D(!1),b=D(!1),g=D({x:0,y:0}),{isLike:w,isDisLike:I,likeCount:_,dislikeCount:C,onLike:T,onDisLike:P}=oo(s.msg.message),q=W(()=>[ne.RECALL,ne.SYSTEM].includes(l.value.type)),F=async O=>{var S,z;const{id:N}=O,{reply:se}=O.body;if(!se||!se.canCallback)return;const xe=y.getMsgIndex(se.id);if(xe>-1)(S=d==null?void 0:d.value)==null||S.scrollToIndex(xe,!0,12);else{const G=y.getMsgIndex(N),Y=Math.ceil((se.gapCount-G+1)/Ln)*Ln;await y.loadMore(Y),setTimeout((z=d==null?void 0:d.value)==null?void 0:z.scrollToIndex(y.getMsgIndex(se.id),!1,12),0)}},J=O=>{if(!h.isSign)return;const{x:N,y:se}=O;g.value.x=N,g.value.y=se,v.value=!0},V=O=>{if(!h.isSign||t.value)return;const{x:N,y:se}=O;g.value.x=N,g.value.y=se,b.value=!0},Q=D(null);yt(()=>{Vt(()=>{if(o.value&&a.value){const N=o.value.clientWidth,se=a.value.clientWidth;N+150<=se?c.value="right-start":s.msg.message.body.reply?c.value="top-end":c.value="bottom-end"}const O=gr(Q);t.value&&Q&&ot(O,N=>{N?rt.emit("onAddReadCountTask",{msgId:s.msg.message.id}):rt.emit("onRemoveReadCountTask",{msgId:s.msg.message.id})})}),rt.on("onGetReadCount",O=>{const N=O.get(s.msg.message.id);N&&(u.read=N.readCount,u.unread=N.unReadCount)})});const le=O=>{u.unread!==0&&(k.currentReadUnreadList.msgId=O,k.currentReadUnreadList.show=!0)};return(O,N)=>{const se=yn,xe=Hn,S=ri,z=Et,G=at,Y=Qa,K=Bn("IconLike"),Ie=Bn("IconDislike"),Oe=gt("login");return E(),L(st,null,[O.isShowTimeBlock&&O.msg.timeBlock?(E(),L("span",gi,ue(O.msg.timeBlock),1)):re("",!0),q.value?(E(),L("span",hi,ue(x(l).body),1)):re("",!0),j("div",{ref_key:"msgVisibleEl",ref:Q},[$(pt,{name:"remove"},{default:X(()=>{var ke,je;return[q.value?re("",!0):(E(),L("div",{key:0,class:ve(r.value)},[$(se,{src:x(n).avatar,onContextmenu:N[0]||(N[0]=It(ye=>V(ye),["prevent","stop"]))},null,8,["src"]),j("div",{class:"chat-item-box",ref_key:"boxRef",ref:a},[j("div",yi,[Fe(ue(x(f).uid)+" ",1),$(xe,{effect:"dark",content:(ke=x(e))==null?void 0:ke.describe,placement:t.value?"top-end":"top-start",teleported:!1},{default:X(()=>{var ye,De;return[Se(j("img",{class:"user-badge",src:(ye=x(e))==null?void 0:ye.img},null,8,bi),[[Ze,(De=x(e))==null?void 0:De.img]])]}),_:1},8,["content","placement"]),j("span",{class:"user-name",onContextmenu:N[1]||(N[1]=It(ye=>V(ye),["prevent","stop"]))},ue(x(n).name),33),j("span",_i,"("+ue(x(n).locPlace||"未知")+")",1),O.isShowTime?(E(),L("span",xi,ue(x(Un)(O.msg.message.sendTime)),1)):re("",!0)]),$(xe,{effect:"light","popper-class":"option-tooltip",trigger:O.tooltipTrigger,placement:c.value||"bottom-end",offset:2,"show-arrow":!1,teleported:!1},{content:X(()=>[$(ci,{msg:O.msg},null,8,["msg"])]),default:X(()=>{var ye,De;return[j("div",{ref_key:"renderMsgRef",ref:o,class:ve(["chat-item-content",{uploading:(ye=O.msg)==null?void 0:ye.loading}]),onContextmenu:N[3]||(N[3]=It(_e=>J(_e),["prevent","stop"]))},[t.value?(E(),L("div",{key:0,onClick:N[2]||(N[2]=_e=>le(O.msg.message.id)),class:ve(["chat-item-read-count",{"is-gray":u.unread===0}])},[u.unread!==0?(E(),L("span",ki,ue(u.read),1)):(E(),ie(z,{key:1},{default:X(()=>[$(S)]),_:1}))],2)):re("",!0),(De=O.msg)!=null&&De.loading?(E(),ie(G,{key:1,icon:"loading",size:20,spin:""})):re("",!0),$(Y,{message:x(l)},null,8,["message"])],34)]}),_:1},8,["trigger","placement"]),(je=x(l).body)!=null&&je.reply?(E(),L("div",{key:0,class:ve(["chat-item-reply",{pointer:x(l).body.reply.canCallback}]),onClick:N[4]||(N[4]=ye=>F(x(l)))},[x(l).body.reply.canCallback?(E(),ie(G,{key:0,icon:"totop",size:12})):re("",!0),j("span",Ci,ue(x(l).body.reply.username)+": "+ue(x(l).body.reply.body),1)],2)):re("",!0),x(_)+x(C)>0?(E(),L("div",wi,[$(pt,{name:"fade"},{default:X(()=>[x(_)>0?Se((E(),L("span",{key:0,class:ve(["extra-item like",{active:x(w)}])},[$(G,{icon:"like"}),$(pt,{name:"count-up",mode:"out-in"},{default:X(()=>[(E(),L("span",{class:"count",key:x(_)},ue(x(_)),1))]),_:1})],2)),[[Oe,x(T)]]):re("",!0)]),_:1}),$(pt,{name:"fade"},{default:X(()=>[x(C)>0?Se((E(),L("span",{key:0,class:ve(["extra-item dlike",{active:x(I)}])},[$(G,{icon:"dislike",size:17}),$(pt,{name:"count-up",mode:"out-in"},{default:X(()=>[(E(),L("span",{class:"count",key:x(C)},ue(x(C)),1))]),_:1})],2)),[[Oe,x(P)]]):re("",!0)]),_:1})])):re("",!0)],512),x(_)+x(C)>0?(E(),L("div",Si,[$(pt,{name:"fade"},{default:X(()=>[x(_)>0?(E(),L("span",{key:0,class:ve(["extra-item like",{active:x(w)}]),onClick:N[5]||(N[5]=(...ye)=>x(T)&&x(T)(...ye))},[$(K),$(pt,{name:"count-up",mode:"out-in"},{default:X(()=>[(E(),L("span",{class:"count",key:x(_)},ue(x(_)),1))]),_:1})],2)):re("",!0)]),_:1}),$(pt,{name:"fade"},{default:X(()=>[x(C)>0?(E(),L("span",{key:0,class:ve(["extra-item dlike",{active:x(I)}]),onClick:N[6]||(N[6]=(...ye)=>x(P)&&x(P)(...ye))},[$(Ie),$(pt,{name:"count-up",mode:"out-in"},{default:X(()=>[(E(),L("span",{class:"count",key:x(C)},ue(x(C)),1))]),_:1})],2)):re("",!0)]),_:1})])):re("",!0)],2))]}),_:1})],512),$(fi,{show:v.value,"onUpdate:show":N[7]||(N[7]=ke=>v.value=ke),options:g.value,msg:O.msg},null,8,["show","options","msg"]),$(vi,{show:b.value,"onUpdate:show":N[8]||(N[8]=ke=>b.value=ke),options:g.value,uid:O.msg.fromUser.uid},null,8,["show","options","uid"])],64)}}});const Mi={key:2,class:"empty"},Ei=me({__name:"index",setup(p){const s=kt(),l=D(),f=W(()=>s.currentMessageOptions),h=W(()=>s.chatMessageList),y=W(()=>s.currentNewMsgCount),k=()=>{l.value&&(l.value.scrollToBottom(),s.clearNewMsgCount())},n=()=>{var r;l.value.scrollToIndex(h.value.length-(((r=y.value)==null?void 0:r.count)||0)),s.clearNewMsgCount()};Rt("virtualListRef",l),yt(()=>{Vt(()=>{s.chatListToBottomAction=()=>{k()}})});const i=async()=>{var o;if((o=f.value)!=null&&o.isLoading)return;const r=l.value.getSizes();await s.loadMore(),l.value.scrollToIndex(l.value.getSizes()-r)},e=eo(r=>{const{offset:o,clientSize:a,scrollSize:c}=r;if(!o||!a||!c)return;o+a>=c-a?(y.value&&(y.value.isStart=!1),s.clearNewMsgCount()):y.value&&(y.value.isStart=!0)},100),t=r=>r.message.id;return(r,o)=>{var d,v,b,g,w,I;const a=Ds,c=Et,u=js;return E(),L("div",{class:"chat-msg-list",onContextmenu:o[0]||(o[0]=It(()=>{},["prevent"]))},[(d=f.value)!=null&&d.isLoading?(E(),ie(c,{key:0,size:14,class:"loading"},{default:X(()=>[$(a),Fe("消息加载中 ")]),_:1})):re("",!0),(v=h.value)!=null&&v.length?(E(),ie(x(to),{key:1,ref_key:"virtualListRef",ref:l,class:"virtual-list scroll-hover",dataPropName:"msg",data:h.value,"data-key":t,item:Ii,size:20,onTotop:i,onScroll:x(e),onOk:k},null,8,["data","onScroll"])):re("",!0),!((b=f.value)!=null&&b.isLoading)&&((g=h.value)==null?void 0:g.length)===0?(E(),L("div",Mi,"暂无消息，快来发送第一条消息吧~")):re("",!0),Se(j("span",{class:"new-msgs-tips",onClick:n},[Fe(ue((w=y.value)==null?void 0:w.count)+" 条新消息 ",1),$(c,{size:10},{default:X(()=>[$(u)]),_:1})],512),[[Ze,((I=y.value)==null?void 0:I.count)&&y.value.count>0]])],32)}}});const Oi=ht(Ei,[["__scopeId","data-v-9f52c487"]]),Ti={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},$i=j("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),Ri=j("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),Li=[$i,Ri];function ji(p,s){return E(),L("svg",Ti,Li)}const Bi={name:"ep-lock",render:ji};const Ni={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Pi=j("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88L259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512L214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),zi=[Pi];function Di(p,s){return E(),L("svg",Ni,zi)}const Ai={name:"ep-close",render:Di};var Ke=(p=>(p.text="text",p.br="br",p.at="at",p))(Ke||{});const Fi=p=>{let s="";const l=[];return p.forEach(f=>{if((f.type===Ke.text||f.type===Ke.br)&&(s+=f.data),f.type===Ke.at){const{uid:h=0,name:y="",avatar:k=""}=f.data;l.push({uid:h,name:y,avatar:k,length:y.length+1,offset:s.length}),s+="@"+y}}),{pureString:s,mentionList:l}},Ui=(p,s)=>{let l=0;const f=[];if(s.length>0){s.forEach(y=>{const{offset:k,length:n}=y,i=p.slice(l,k);i.length>0&&f.push({type:Ke.text,data:i}),f.push({type:Ke.at,data:{uid:y.uid,name:y.name,avatar:y.avatar}}),l=k+n});const h=p.slice(l);h.length>0&&f.push({type:Ke.text,data:h})}else p.length>0&&f.push({type:Ke.text,data:p});return f},cn=()=>{let p=null,s=null;return window.getSelection?(s=window.getSelection(),s&&s.getRangeAt&&s.rangeCount?(p=s.getRangeAt(0),{range:p,selection:s}):null):null},Vi=()=>{const p=window,s=p.document;let l=s.selection,f,h,y,k=0,n=0;if(l)l.type!=="Control"&&(f=l.createRange(),f.collapse(!0),k=f.boundingLeft,n=f.boundingTop);else if(p.getSelection&&(l=p.getSelection(),l.rangeCount&&(f=l.getRangeAt(0).cloneRange(),f.getClientRects&&(f.collapse(!0),h=f.getClientRects(),h.length>0&&(y=h[0]),y&&(k=y.left,n=y.top)),k===0&&n===0||y===void 0))){const i=s.createElement("span");if(i.getClientRects){i.appendChild(s.createTextNode("​")),f.insertNode(i),y=i.getClientRects()[0],k=y.left,n=y.top;const e=i.parentNode;e==null||e.removeChild(i),e==null||e.normalize()}}return{x:k,y:n}},fn=({content:p,selection:s,range:l})=>{if(!(!s||!l||!p)&&s.getRangeAt(0)&&s.rangeCount){l.deleteContents();const f=document.createElement("div"),h=document.createTextNode(p);f.appendChild(h);const y=document.createDocumentFragment();let k,n;for(;k=f.firstChild;)n=y.appendChild(k);if(l.insertNode(y),n){const i=l.cloneRange();if(!i)return;i.setStartAfter(n),i.collapse(!0),s.removeAllRanges(),s.addRange(i)}}},Wi={class:"person-item__name"},Hi=me({__name:"item",props:{item:{},activeIndex:{},index:{},onSelect:{type:Function}},setup(p){const s=p,l=()=>{var f;(f=s.onSelect)==null||f.call(s,s.item.uid)};return(f,h)=>{const y=yn;return E(),L("div",{class:ve(["person-item",{"person-item--active":f.activeIndex===f.index}]),onClick:l},[$(y,{class:"avatar",src:f.item.avatar,size:26},null,8,["src"]),j("div",Wi,ue(f.item.name),1)],2)}}});const Gi=["src"],Ki={class:"dialog-footer"},qi=me({__name:"index",setup(p){const s=D({url:""}),l=D(),f=D(!1),h=Ct(),y=Ft("onChangeMsgType"),k=Ft("onChangeFile");hr(window,"paste",e=>{var t;if(e.preventDefault(),!h.isSign)return!1;if(e.clipboardData&&((t=e.clipboardData.files)!=null&&t.length)){const r=e.clipboardData.files[0];r!=null&&r.type.includes("image")&&(l.value=r)}return!1}),Zn(()=>{l!=null&&l.value?(f.value=!0,s.value={url:URL.createObjectURL(l==null?void 0:l.value)}):f.value=!1});const n=()=>{s.value.url&&URL.revokeObjectURL(s.value.url),l.value=void 0,s.value={url:""}},i=async()=>{l!=null&&l.value&&(y==null||y(ne.IMAGE),await(k==null?void 0:k([l==null?void 0:l.value])),f.value=!1,n())};return(e,t)=>{const r=Gn,o=sr;return E(),ie(o,{class:"image-paste-modal",title:"粘贴图片",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),"close-on-click-modal":!1,center:"",onClose:n},{footer:X(()=>[j("span",Ki,[$(r,{onClick:t[0]||(t[0]=a=>f.value=!1)},{default:X(()=>[Fe("取消")]),_:1}),$(r,{type:"primary",onClick:i},{default:X(()=>[Fe(" 发送 ")]),_:1})])]),default:X(()=>[s.value.url?(E(),L("img",{key:0,src:s.value.url},null,8,Gi)):re("",!0)]),_:1},8,["modelValue"])}}});const Xi=["text","contenteditable"],Yi=me({inheritAttrs:!1,__name:"index",props:{disabled:{type:Boolean,default:!1},modelValue:{default:""},mentions:{default:()=>[]},maxLength:{default:-1},className:{},style:{}},emits:["update:modelValue","change","focus","blur","callBackRefAndRange","send"],setup(p,{expose:s,emit:l}){const f=p,{modelValue:h,mentions:y,maxLength:k,disabled:n}=Yn(f),i=D(),e=D(),t=Wn(),r=ct(),o=D(!1),a=D([]),c=jt({x:0,y:0}),u=D(0),d=D(""),v=D(!1),b=D(null),g=D(""),w=W(()=>r.currentSession.roomId);g.value=h.value;const I=()=>{const S=Ui(h==null?void 0:h.value,y.value);i.value&&(S.forEach(z=>{var G,Y;if(z.type===Ke.text){const K=document.createTextNode(z.data);(G=i.value)==null||G.appendChild(K)}if(z.type===Ke.at){const K=document.createElement("button");K.dataset.person=JSON.stringify(z.data),K.textContent=`@${z.data.name}`,K.className="at_member",K.contentEditable="false",K.addEventListener("click",()=>!1,!1),K.tabIndex=0,(Y=i.value)==null||Y.appendChild(K)}}),v.value=!0)};Zn(()=>{var S;if(h.value&&h.value.length>0&&!v.value&&I(),!(h.value&&h.value.length>0)&&!v.value&&setTimeout(()=>{I()},500),!(h.value&&h.value.length>0)&&v&&i.value)for(;(S=i.value)!=null&&S.firstChild;)i.value.removeChild(i.value.firstChild);g.value=h.value}),ot(d,()=>{a.value=t.filterUsers(d.value)}),ot(w,(S,z)=>{S!==z&&(g.value="",a.value=t.currentAtUsersList)},{immediate:!0}),ot(o,()=>{o.value||(u.value=0)}),ot(o,()=>{if(o.value){const{x:S,y:z}=Vi();if(i.value){const G=i.value.offsetWidth,K=i.value.getBoundingClientRect().left+G,Ie=300;S+Ie>K?(c.x=K-Ie,c.y=z):(c.x=S,c.y=z)}else c.x=S,c.y=z}}),ot(n,S=>{S||setTimeout(()=>{var z;(z=i.value)==null||z.focus()})}),yt(()=>{Vt(()=>{var S;(S=i.value)==null||S.focus()})});const _=()=>{if(i.value){const S=[],z=[].slice.call(i.value.childNodes);z.length>0&&z.forEach(K=>{if(K.nodeName==="#text"){const Ie=K;Ie.data&&Ie.data.length>0&&S.push({type:Ke.text,data:Ie.data})}if(K.nodeName==="BR"&&S.push({type:Ke.br,data:`
`}),K.nodeName==="BUTTON"){const Oe=JSON.parse(K.dataset.person);S.push({type:Ke.at,data:Oe})}});const{pureString:G,mentionList:Y}=Fi(S);G.length>0&&G.charAt(G.length-1)===`
`?l("change",G.substring(0,G.length-1),Y):l("change",G,Y)}},C=()=>{const S=cn();if(!S||!S.range||!S.selection){o.value=!1;return}const z=S.range.endContainer;if(!z||!z.textContent||z.nodeName!=="#text"){o.value=!1;return}const G=z.textContent.slice(0,S.selection.focusOffset),Y=/@([^@]*)$/.exec(G);if(Y&&Y.length>=2){const[,K]=Y;if(K&&K.length>20){o.value=!1,d.value="",a.value=[];return}o.value=!0,d.value=K,b.value=S}else d.value="",o.value=!1},T=([S,z],G,Y)=>{var K,Ie;if(G.getRangeAt(0)&&G.rangeCount){if(((Ie=(K=G.focusNode)==null?void 0:K.parentNode)==null?void 0:Ie.nodeName)==="BUTTON")return;Y.deleteContents();const Oe=document.createElement("div");Oe.appendChild(S),z&&Oe.appendChild(z);const ke=document.createDocumentFragment();let je,ye;for(;je=Oe.firstChild;)ye=ke.appendChild(je);Y.insertNode(ke),ye&&(Y=Y.cloneRange(),Y.setStartAfter(ye),Y.collapse(!0),G.removeAllRanges(),G.addRange(Y))}},P=(S,z=!1)=>{var Y,K,Ie,Oe;o.value=!1,(Y=e.value)==null||Y.scrollToIndex(0);const G=i.value;if(G){G.focus();const ke=(K=b==null?void 0:b.value)==null?void 0:K.range;if(!ke)return;const je=ke.endContainer,ye=ke.endOffset,De=je.nodeValue,_e=/@([^@]*)$/.exec(De);if(_e&&_e.length>1||z){!z&&(_e!=null&&_e.length)&&(ke.setStart(je,_e.index),ke.setEnd(je,ye),ke.deleteContents());const Je=document.createElement("button");Je.dataset.person=JSON.stringify(S),Je.textContent=`@${S.name}`,Je.className="at_member",Je.contentEditable="false",Je.addEventListener("click",()=>!1,!1),Je.tabIndex=0;const Ot=document.createTextNode(" ");T([Je,Ot],(Ie=b==null?void 0:b.value)==null?void 0:Ie.selection,(Oe=b==null?void 0:b.value)==null?void 0:Oe.range)}_()}},q=S=>{S.key==="2"&&S.shiftKey?o.value=!0:C()},F=S=>{if(!e.value)return;let z=0;if(S==="up"){if(z=u.value-1,z<0)return;z<e.value.getOffset()/34&&e.value.scrollToIndex(z)}if(S==="down"){if(z=u.value+1,z>a.value.length+1)return;z>6&&e.value.scrollToIndex(z-6)}u.value=z},J=S=>{if(k.value&&k.value>0&&S.target.innerText.length>=k.value&&(S.key==="Backspace"||S.key==="Delete"||S.preventDefault()),o.value&&a.value.length>0)S.key==="ArrowDown"&&(S.preventDefault(),F("down")),S.key==="ArrowUp"&&(S.preventDefault(),F("up")),S.key==="Enter"&&(S.preventDefault(),P(a.value[u.value]),V());else{if(S.ctrlKey&&S.key==="Enter"||S.shiftKey&&S.key==="Enter"||S.metaKey&&S.key==="Enter"){S.preventDefault(),le();return}if(S.isComposing)return S.preventDefault();S.key==="Enter"&&(S.preventDefault(),l("send",S))}if(S.ctrlKey||S.metaKey)switch(S.key){case"B":case"2":case"I":case"9":case"U":case"F6":{S.preventDefault();break}}S.key==="Tab"&&(S.preventDefault(),document.execCommand("insertHTML",!1,"  "))},V=()=>{if(i.value){const S=i.value.innerText;g.value=S,l("update:modelValue",S)}_()},Q=()=>{l("blur"),b.value=cn(),l("callBackRefAndRange",i.value,b.value),setTimeout(()=>{var S;o.value=!1,(S=e.value)==null||S.scrollToIndex(0),setTimeout(()=>{d.value=""},0)},300)},le=()=>{const S=cn();!S||!S.range||!S.selection||fn({content:`
`,selection:S.selection,range:S.range})},O=()=>{l("focus"),C()},N=S=>{S.preventDefault();let z;return window.clipboardData&&window.clipboardData.getData?z=window.clipboardData.getData("Text"):S.clipboardData&&S.clipboardData.getData&&(z=S.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,z),!1},se=(S,z=!1)=>{S&&(rt.emit("focusMsgInput"),setTimeout(()=>{const G=t.userCachedList[S];G&&(P==null||P(G,z))},10))};s({input:i,range:b,onSelectPerson:se});const xe=S=>S.uid;return(S,z)=>{var G;return E(),L("div",{class:ve(["input-wrapper",[S.className,S.$attrs.class]]),style:nt([S.style,S.$attrs.style])},[j("div",bn({ref_key:"editorRef",ref:i},S.$attrs,{class:"input",id:"at-mentions-input",text:S.modelValue,contenteditable:!x(n),onInput:V,onKeyup:q,onKeydown:J,onBlur:Q,onFocus:O,onMouseup:C,onPaste:N}),null,16,Xi),Se(j("div",{className:"at-mentions__dialog",style:nt({top:`${c.y-14}px`,left:`${c.x||0}px`})},[(G=a.value)!=null&&G.length?(E(),ie(x(to),{key:0,ref_key:"scrollRef",ref:e,class:"person-wrapper",dataPropName:"item",itemProps:{activeIndex:u.value,onSelect:se},data:a.value,"data-key":xe,item:Hi,size:20},null,8,["itemProps","data"])):re("",!0)],4),[[Ze,o.value]]),$(qi)],6)}}});const Zi=ht(Yi,[["__scopeId","data-v-84756aeb"]]),Ji=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","😏","😒","😞","😔","😟","😕","🙁","😣","😖","😫","😩","😢","😭","😮","💨","😤","😠","😡","🤬","🤯","😳","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","🌫️","😐","😑","😬","🙄","😯","😦","😧","😮","😲","😴","🤤","😪","😵","💫","🤐","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🐶"],so=100,Qi=so*1024*1024,el=()=>{const p=D(!1),s=D(0),l=D(null),{on:f,trigger:h}=_t(),y=_t(),k=async(o,a,c)=>{p.value=!0;const u=new XMLHttpRequest;u.open("PUT",o,!0),u.setRequestHeader("Content-Type",a.type),u.upload.onprogress=function(d){c||(s.value=Math.round(d.loaded/d.total*100))},u.onload=function(){p.value=!1,!c&&(u.status===200?h("success"):h("fail"))},u.send(a)},n=o=>new Promise((a,c)=>{const u=document.createElement("video"),d=URL.createObjectURL(o);u.src=d,u.crossOrigin="anonymous",u.currentTime=2,u.oncanplay=()=>{var b;const v=document.createElement("canvas");v.width=u.videoWidth,v.height=u.videoHeight,(b=v.getContext("2d"))==null||b.drawImage(u,0,0,v.width,v.height),v.toBlob(g=>{if(!g)return;const w=Date.now()+"thumb.jpg",I=new File([g],w,{type:"image/jpeg"});qe.getUploadUrl({fileName:w,scene:"1"}).send().then(_=>{if(_.uploadUrl&&_.downloadUrl){k(_.uploadUrl,I,!0);const C=setInterval(()=>{p.value||(clearInterval(C),a({thumbWidth:v.width,thumbHeight:v.height,thumbUrl:_.downloadUrl,thumbSize:I.size,tempUrl:d}))})}})})},u.onerror=function(){URL.revokeObjectURL(d),c({width:0,height:0,url:null})}}),i=o=>{const a=new Image,c=URL.createObjectURL(o);return a.src=c,new Promise((u,d)=>{a.onload=function(){u({width:a.width,height:a.height,tempUrl:c})},a.onerror=function(){URL.revokeObjectURL(c),d({width:0,height:0,url:null})}})},e=o=>new Promise((a,c)=>{const u=new Audio,d=URL.createObjectURL(o);u.src=d,(async()=>{for(;isNaN(u.duration)||u.duration===1/0;)await new Promise(g=>setTimeout(g,100)),u.currentTime=1e5*Math.random();const b=Math.round(u.duration||0);a({second:b,tempUrl:d})})(),u.onerror=function(){c({second:0,tempUrl:d})}}),t=async(o,a={})=>{var g;const{name:c,size:u,type:d}=o,v=((g=c.split(".").pop())==null?void 0:g.trim().toLowerCase())||"",b={name:c,size:u,type:d,suffix:v,...a};if(d.includes("image")){const{width:w,height:I,tempUrl:_}=await i(o);return{...b,width:w,height:I,tempUrl:_}}if(d.includes("audio")){const{second:w,tempUrl:I}=await e(o);return{second:w,tempUrl:I,...b}}if(d.includes("video")){const{thumbWidth:w,thumbHeight:I,tempUrl:_,thumbTempUrl:C,thumbUrl:T,thumbSize:P}=await n(o);return{...b,thumbWidth:w,thumbHeight:I,tempUrl:_,thumbTempUrl:C,thumbUrl:T,thumbSize:P}}return b},r=async(o,a)=>{if(p.value||!o)return;const c=await t(o,a);if(c.size>Qi){vt.warning(`文件不得大于 ${so} MB`);return}const{downloadUrl:u,uploadUrl:d}=await qe.getUploadUrl({fileName:c.name,scene:"1"}).send();d&&u?(l.value={...c,downloadUrl:u},y.trigger(l),k(d,o)):h("fail")};return{fileInfo:l,isUploading:p,progress:s,onStart:y.on,onChange:f,uploadFile:r}},tl=()=>{const p=D(!1),s=D(null),l=D(0),f=D(null),h=_t(),{isSupported:y,stream:k,start:n,stop:i}=yr({constraints:{audio:!0}}),e=()=>{p.value=!1,l.value=0,f.value=null,s.value&&clearInterval(s.value)},t=async()=>{if(!y.value){vt.warning("当前环境不支持录音");return}if(e(),await n(),!k.value)return;f.value=new MediaRecorder(k.value),f.value.start(),p.value=!0,s.value=setInterval(()=>{l.value++,l.value>=59&&r()},1e3);const o=[];f.value.addEventListener("dataavailable",a=>{o.push(a.data)}),f.value.addEventListener("stop",()=>{s.value&&clearInterval(s.value);const a=new Blob(o,{type:"audio/wav"}),c=new File([a],`${Date.now()}.wav`,{type:"audio/wav"});if(l.value<2){vt.warning("录制时间太短");return}h.trigger(c),e()})},r=()=>{f.value&&(f.value.stop(),i())};return{isRecording:p,second:l,start:t,stop:r,reset:e,onEnd:h.on}},nl=()=>{const p=ct(),s=W(()=>JSON.parse(localStorage.getItem("USER_INFO")||"{}")),l=W(()=>p.currentSession.roomId);return{mockMessage:(h,y,k)=>{const n=Date.now(),i=Math.floor(Math.random()*15),e=Number(String(n).slice(-7)+i),t=h===1?y.content:null,{uid:r,name:o,avatar:a}=s.value;return{fromUser:{username:o,uid:r,avatar:a,locPlace:"XX"},message:{id:e,roomId:l.value,sendTime:Number(n),content:t,urlContentMap:{},type:h,body:y,messageMark:{likeCount:0,userLike:0,dislikeCount:0,userDislike:0,...k}},sendTime:String(n),loading:!0}}}},ao=p=>(_r("data-v-cf0dabe3"),p=p(),xr(),p),ol={class:"chat-edit"},rl={class:"reply-msg-wrapper"},sl={class:"msg-input"},al={class:"recorded-tips"},il={class:"emoji-panel"},ll={class:"emoji-panel-content"},ul={class:"emoji-list"},cl={class:"emoji-panel-content"},dl=["onClick","onContextmenu"],pl=["src"],fl={key:1,class:"item-add"},ml={class:"footer"},vl=ao(()=>j("div",{class:"divider"},null,-1)),gl=ao(()=>j("span",{class:"tips-text"},"登录",-1)),hl={key:1,class:"tips"},yl=me({__name:"index",setup(p){const s=ar(),l=kt(),f=ct(),h=D(!1),y=D(""),k=D(),n=D([]),i=D(!1),e=D(!1),t=D(0),r=D(!1),o=D(ne.FILE),a=D(0),c=D(!1),u=D(-1),d=()=>{setTimeout(()=>{var B,ce,Te,we;if(!k.value)return;(ce=(B=k.value)==null?void 0:B.focus)==null||ce.call(B);const Z=(we=(Te=k.value)==null?void 0:Te.range)==null?void 0:we.selection;Z==null||Z.selectAllChildren(k.value.input),Z==null||Z.collapseToEnd()})},v=({uid:Z,ignoreCheck:B})=>{var ce,Te;(Te=(ce=k.value)==null?void 0:ce.onSelectPerson)==null||Te.call(ce,Z,B),i.value=!1};yt(()=>{rt.on("onSelectPerson",v),rt.on("focusMsgInput",d)}),Kn(()=>{rt.off("onSelectPerson",v),rt.off("focusMsgInput",d)});const b=(Z,B)=>{qe.sendMsg({roomId:f.currentSession.roomId,msgType:Z,body:B}).send().then(ce=>{ce.message.type===ne.TEXT?l.pushMsg(ce):l.updateMsg(t.value,ce),y.value="",le(),l.getSessionList(!0)}).finally(()=>{var ce;h.value=!1,d(),(ce=l.chatListToBottomAction)==null||ce.call(l)})},g=()=>{var Z,B;!((Z=y.value)!=null&&Z.trim().length)||h.value||(h.value=!0,b(ne.TEXT,{content:y.value,replyMsgId:(B=P.value.message)==null?void 0:B.id,atUidList:n.value.map(ce=>ce.uid)}))},w=Jo(),I=Ct(),_=kn(),C=gn(),T=W(()=>I.isSign),P=W(()=>I.isSign&&l.currentMsgReply||{}),q=W(()=>{var Z;return(Z=P==null?void 0:P.value.fromUser)==null?void 0:Z.uid}),F=Ut(q),J=W(()=>_.emojiList),V=W(()=>C.countInfo.role===dn.REMOVED),Q=()=>{var ce,Te,we;const Z=F==null?void 0:F.value.name,B=(ce=P==null?void 0:P.value.message)==null?void 0:ce.type;return Jn(Z,B,(we=(Te=P==null?void 0:P.value.message)==null?void 0:Te.body)==null?void 0:we.content)},le=()=>l.currentMsgReply={},O=Z=>{var Te,we;const B=(Te=k.value)==null?void 0:Te.input,ce=(we=k.value)==null?void 0:we.range;!B||!ce||(fn({content:Z,...ce}),y.value=B.innerText,r.value=!1,d())},N=(Z,B)=>{n.value=B},se=jt({multiple:!1,accept:".jpg,.png"}),{open:xe,reset:S,onChange:z}=br(se),{isUploading:G,fileInfo:Y,uploadFile:K,onStart:Ie,onChange:Oe}=el(),{uploadEmoji:ke,isEmojiUp:je}=ro(),{isRecording:ye,start:De,stop:_e,onEnd:Je,second:Ot}=tl(),{mockMessage:Nt}=nl(),Tt=(Z,B=!1)=>{Z==="img"&&(o.value=ne.IMAGE,se.accept=".jpg,.png,.gif,.jpeg,.webp"),Z==="file"&&(o.value=ne.FILE,se.accept="*"),c.value=B,xe()},Pt=async Z=>{if(!(Z!=null&&Z.length))return;const B=Z[0];if(o.value===ne.IMAGE&&!B.type.includes("image"))return vt.error("请选择图片文件");c.value?await ke(B):await K(B)};Rt("onChangeFile",Pt),Rt("onChangeMsgType",Z=>{o.value=Z}),z(Pt),Ie(()=>{var Te;if(!Y.value)return;Y.value.type.includes("video")&&(o.value=ne.VIDEO);const{type:Z,body:B}=An(Y.value,o.value,!0),ce=Nt(Z,B);t.value=ce.message.id,l.pushMsg(ce),(Te=l.chatListToBottomAction)==null||Te.call(l)}),Oe(Z=>{if(Z==="success"){if(!Y.value)return;const{body:B,type:ce}=An(Y.value,o.value);b(ce,B)}S()}),Je(Z=>K(Z));const bt=()=>{o.value=ne.VOICE,De()},Wt=(Z,B)=>{Z.preventDefault(),u.value=u.value===B?-1:B},Ht=eo(Z=>{b(ne.EMOJI,{url:Z}),r.value=!1},1e3);return(Z,B)=>{const ce=Ai,Te=Et,we=at,$t=Ur,Gt=Bi,Kt=gt("login");return E(),L("div",ol,[Se(j("div",rl,[j("span",null,ue(Q()),1),$(Te,{class:"reply-msg-icon",size:14,onClick:le},{default:X(()=>[$(ce)]),_:1})],512),[[Ze,Object.keys(P.value).length]]),j("div",sl,[j("div",{class:"action",onClick:B[0]||(B[0]=ge=>i.value=!i.value)},[Se($(we,{icon:"voice",class:"audio"},null,512),[[Ze,!i.value]]),Se($(we,{icon:"jianpan"},null,512),[[Ze,i.value]])]),Se(j("div",{class:"recorded",onMousedown:B[1]||(B[1]=ge=>bt()),onMouseup:B[2]||(B[2]=ge=>x(_e)()),onTouchstartPassive:B[3]||(B[3]=ge=>bt()),onTouchendPassive:B[4]||(B[4]=ge=>x(_e)())},[j("div",al,ue(x(ye)?`录制中 ${x(Ot)}s`:"按住说话"),1)],544),[[Ze,i.value]]),Se($(Zi,{class:"m-input",modelValue:y.value,"onUpdate:modelValue":B[5]||(B[5]=ge=>y.value=ge),ref_key:"mentionRef",ref:k,autofocus:"",tabindex:!T.value||h.value,disabled:!T.value||h.value,placeholder:T.value?h.value?"消息发送中":"来聊点什么吧~":"",mentions:n.value,onChange:N,onSend:g},null,8,["modelValue","tabindex","disabled","placeholder","mentions"]),[[Ze,!i.value]]),$($t,{placement:"top",effect:"dark",title:"",visible:r.value,"onUpdate:visible":B[11]||(B[11]=ge=>r.value=ge),"popper-class":"emoji-warpper","show-arrow":!1,width:x(s)==="PC"?385:"95%",trigger:"click"},{reference:X(()=>[j("div",{class:"action",onMouseover:B[6]||(B[6]=ge=>e.value=!0),onMouseleave:B[7]||(B[7]=ge=>e.value=!1)},[e.value?(E(),ie(we,{key:0,icon:"shocked",size:18,colorful:""})):(E(),ie(we,{key:1,icon:"happy1",size:18,colorful:""}))],32)]),default:X(()=>[j("div",il,[Se(j("div",ll,[j("ul",ul,[(E(!0),L(st,null,Lt(x(Ji),(ge,it)=>Se((E(),L("li",{class:"emoji-item",key:it},[Fe(ue(ge),1)])),[[Kt,()=>O(ge)]])),128))])],512),[[Ze,a.value===0]]),Se(j("div",cl,[(E(!0),L(st,null,Lt(J.value,ge=>(E(),L("div",{key:ge.id,class:"item",onClick:it=>x(Ht)(ge.expressionUrl),onContextmenu:it=>Wt(it,ge.id)},[j("img",{src:ge.expressionUrl},null,8,pl),ge.id===u.value?(E(),ie(we,{key:0,icon:"guanbi1",class:"del",onClick:It(it=>x(_).deleteEmoji(ge.id),["stop"])},null,8,["onClick"])):re("",!0)],40,dl))),128)),J.value.length<50&&!x(je)?(E(),ie(we,{key:0,class:"cursor-pointer item-add",icon:"tianjia",size:30,onClick:B[8]||(B[8]=ge=>Tt("img",!0))})):(E(),L("div",fl,[$(we,{icon:"loading",spin:"",size:30})]))],512),[[Ze,a.value===1]]),j("div",ml,[$(we,{class:ve(["cursor-pointer","footer-act",{active:a.value===0}]),icon:"biaoqing",size:18,onClick:B[9]||(B[9]=ge=>a.value=0)},null,8,["class"]),$(we,{class:ve(["cursor-pointer","footer-act",{active:a.value===1}]),icon:"aixin",size:18,onClick:B[10]||(B[10]=ge=>a.value=1)},null,8,["class"])])])]),_:1},8,["visible","width"]),$(we,{class:"action",icon:"at",size:20,colorful:"",onClick:B[12]||(B[12]=ge=>{var it;return x(fn)({content:"@",...(it=k.value)==null?void 0:it.range})})}),$(we,{class:ve(["action",{disabled:x(G)}]),icon:"tupian",size:18,colorful:"",onClick:B[13]||(B[13]=ge=>Tt("img"))},null,8,["class"]),$(we,{class:"action",icon:"wenjianjia2",size:20,colorful:"",onClick:B[14]||(B[14]=ge=>Tt("file"))}),vl,j("div",{class:ve(["action",{"is-edit":y.value.length,disabled:!y.value.length}]),onClick:g},[$(we,{class:"send",icon:"huojian",size:20})],2)]),T.value?re("",!0):(E(),L("span",{key:0,class:"tips",onClick:B[15]||(B[15]=ge=>x(w).showLogin=!0)},[$(Te,{class:"icon-lock"},{default:X(()=>[$(Gt)]),_:1}),Fe(" 点我"),gl,Fe("之后再发言~ ")])),T.value&&V.value?(E(),L("span",hl," 您已被踢出群聊，无法再发送消息 ")):re("",!0)])}}});const bl=ht(yl,[["__scopeId","data-v-cf0dabe3"]]),_l={class:"chat-box"},xl={class:"chat-wrapper"},kl={key:1,class:"chat"},Cl=me({__name:"index",setup(p){const s=D(!1),l=ct(),f=W(()=>l.currentSession);return(h,y)=>{const k=bs,n=Et;return E(),L("div",_l,[j("div",xl,[s.value?(E(),ie(n,{key:0,size:160,color:"var(--font-light)"},{default:X(()=>[$(k)]),_:1})):(E(),L("div",kl,[$(Oi),$(bl)]))]),Se($(Os,null,null,512),[[Ze,f.value.type===x(Qo).Group]])])}}});const wl=ht(Cl,[["__scopeId","data-v-18afe9df"]]),Rl=me({__name:"index",setup(p){const s=kt(),l=ct();return s.getSessionList(),l.unReadMark.newMsgUnreadCount=0,(f,h)=>(E(),L(st,null,[$(fs),$(wl)],64))}});export{Rl as default};

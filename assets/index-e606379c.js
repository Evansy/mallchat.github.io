var Lo=Object.defineProperty;var jo=(p,s,l)=>s in p?Lo(p,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[s]=l;var an=(p,s,l)=>(jo(p,typeof s!="symbol"?s+"":s,l),l);import{_ as Lt,m as St,x as it,ai as Bo,s as No,u as mn,aj as Po,ak as zo,w as vn,al as Do,am as Fo,an as Ao,ao as Uo,F as Fn,E as It,ap as Vo,aq as ee,ar as xt,ac as mt,as as An,at as Wo,a0 as vt,a1 as kt,au as Un,av as nt,a4 as Ye,aw as Ho,ab as Vn,ax as dn,V as Ko,ay as Go,az as qo,aA as Xo,aB as gn,a5 as pt,aC as wt,aD as $n,aa as ft,aE as Rn,a2 as Yo,Z as Zo,af as Jo}from"./index-c7739005.js";import{d as pn,e as at,b as Wn,a as Qo,v as er,u as tr,f as nr,c as or,E as rr,j as sr}from"./preview-557b4e8c.js";import{I as ar}from"./types-c26e2409.js";import{b as ir,h as Ft,g as rt,_ as hn,E as Hn,j as lr}from"./useCached-c100afd7.js";import{z as me,A as bt,r as D,y as Ot,t as Dt,e as gt,u as k,af as Kn,v as H,k as E,J as le,D as X,l as L,F as ve,G as de,L as oe,a1 as Ue,B as yn,R as ur,h as Ln,m as B,K as tt,M as bn,O as ot,a7 as Tt,C as $,ag as cr,ae as _t,E as Ce,ah as dr,P as $t,n as At,o as _n,H as Xe,ai as pr,a9 as fr,w as lt,aj as mr,ak as vr,al as yt,U as Gn,V as Rt,a4 as qn,am as gr,ad as jn,T as ct,an as hr,a as Xn,ao as yr,ap as br,ab as _r,ac as xr}from"./vue-1c6f3db6.js";import{a as kr,c as Cr,g as wr}from"./xgplayer-2fc91dd5.js";const Sr=me({inheritAttrs:!1});function Ir(p,s,l,f,y,h){return bt(p.$slots,"default")}var Mr=Lt(Sr,[["render",Ir],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Er=me({name:"ElCollectionItem",inheritAttrs:!1});function Or(p,s,l,f,y,h){return bt(p.$slots,"default")}var Tr=Lt(Er,[["render",Or],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const $r="data-el-collection-item",Rr=p=>{const s=`El${p}Collection`,l=`${s}Item`,f=Symbol(s),y=Symbol(l),h={...Mr,name:s,setup(){const n=D(null),i=new Map;Ot(f,{itemMap:i,getItems:()=>{const t=k(n);if(!t)return[];const o=Array.from(t.querySelectorAll(`[${$r}]`));return[...i.values()].sort((a,c)=>o.indexOf(a.ref)-o.indexOf(c.ref))},collectionRef:n})}},_={...Tr,name:l,setup(n,{attrs:i}){const e=D(null),t=Dt(f,void 0);Ot(y,{collectionItemRef:e}),gt(()=>{const o=k(e);o&&t.itemMap.set(o,{ref:o,...i})}),Kn(()=>{const o=k(e);t.itemMap.delete(o)})}};return{COLLECTION_INJECTION_KEY:f,COLLECTION_ITEM_INJECTION_KEY:y,ElCollection:h,ElCollectionItem:_}},ln=St({trigger:pn.trigger,effect:{...at.effect,default:"light"},type:{type:it(String)},placement:{type:it(String),default:"bottom"},popperOptions:{type:it(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:it([Number,String]),default:0},maxHeight:{type:it([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:it(Object)},teleported:at.teleported});St({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Bo}});St({onKeydown:{type:it(Function)}});Rr("Dropdown");const Lr=St({trigger:pn.trigger,placement:ln.placement,disabled:pn.disabled,visible:at.visible,transition:at.transition,popperOptions:ln.popperOptions,tabindex:ln.tabindex,content:at.content,popperStyle:at.popperStyle,popperClass:at.popperClass,enterable:{...at.enterable,default:!0},effect:{...at.effect,default:"light"},teleported:at.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),jr={"update:visible":p=>No(p),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Br="onUpdate:visible",Nr=me({name:"ElPopover"}),Pr=me({...Nr,props:Lr,emits:jr,setup(p,{expose:s,emit:l}){const f=p,y=H(()=>f[Br]),h=mn("popover"),_=D(),n=H(()=>{var d;return(d=k(_))==null?void 0:d.popperRef}),i=H(()=>[{width:Po(f.width)},f.popperStyle]),e=H(()=>[h.b(),f.popperClass,{[h.m("plain")]:!!f.content}]),t=H(()=>f.transition===`${h.namespace.value}-fade-in-linear`),o=()=>{var d;(d=_.value)==null||d.hide()},r=()=>{l("before-enter")},a=()=>{l("before-leave")},c=()=>{l("after-enter")},u=()=>{l("update:visible",!1),l("after-leave")};return s({popperRef:n,hide:o}),(d,v)=>(E(),le(k(Wn),yn({ref_key:"tooltipRef",ref:_},d.$attrs,{trigger:d.trigger,placement:d.placement,disabled:d.disabled,visible:d.visible,transition:d.transition,"popper-options":d.popperOptions,tabindex:d.tabindex,content:d.content,offset:d.offset,"show-after":d.showAfter,"hide-after":d.hideAfter,"auto-close":d.autoClose,"show-arrow":d.showArrow,"aria-label":d.title,effect:d.effect,enterable:d.enterable,"popper-class":k(e),"popper-style":k(i),teleported:d.teleported,persistent:d.persistent,"gpu-acceleration":k(t),"onUpdate:visible":k(y),onBeforeShow:r,onBeforeHide:a,onShow:c,onHide:u}),{content:X(()=>[d.title?(E(),L("div",{key:0,class:ve(k(h).e("title")),role:"title"},de(d.title),3)):oe("v-if",!0),bt(d.$slots,"default",{},()=>[Ue(de(d.content),1)])]),default:X(()=>[d.$slots.reference?bt(d.$slots,"reference",{key:0}):oe("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var zr=Lt(Pr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const Bn=(p,s)=>{const l=s.arg||s.value,f=l==null?void 0:l.popperRef;f&&(f.triggerRef=p)};var Dr={mounted(p,s){Bn(p,s)},updated(p,s){Bn(p,s)}};const Fr="popover",Ar=zo(Dr,Fr),Ur=vn(zr,{directive:Ar}),Vr=St({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:p=>p>=0&&p<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:it(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:it([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:it(Function),default:p=>`${p}%`}}),Wr=["aria-valuenow"],Hr={viewBox:"0 0 100 100"},Kr=["d","stroke","stroke-linecap","stroke-width"],Gr=["d","stroke","opacity","stroke-linecap","stroke-width"],qr={key:0},Xr=me({name:"ElProgress"}),Yr=me({...Xr,props:Vr,setup(p){const s=p,l={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},f=mn("progress"),y=H(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:x(s.percentage)})),h=H(()=>(s.strokeWidth/s.width*100).toFixed(1)),_=H(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(h.value)/2}`,10):0),n=H(()=>{const g=_.value,S=s.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${g}
          a ${g} ${g} 0 1 1 0 ${S?"-":""}${g*2}
          a ${g} ${g} 0 1 1 0 ${S?"":"-"}${g*2}
          `}),i=H(()=>2*Math.PI*_.value),e=H(()=>s.type==="dashboard"?.75:1),t=H(()=>`${-1*i.value*(1-e.value)/2}px`),o=H(()=>({strokeDasharray:`${i.value*e.value}px, ${i.value}px`,strokeDashoffset:t.value})),r=H(()=>({strokeDasharray:`${i.value*e.value*(s.percentage/100)}px, ${i.value}px`,strokeDashoffset:t.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),a=H(()=>{let g;return s.color?g=x(s.percentage):g=l[s.status]||l.default,g}),c=H(()=>s.status==="warning"?Do:s.type==="line"?s.status==="success"?Fo:Ao:s.status==="success"?Uo:Fn),u=H(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),d=H(()=>s.format(s.percentage));function v(g){const S=100/g.length;return g.map((b,w)=>Ln(b)?{color:b,percentage:(w+1)*S}:b).sort((b,w)=>b.percentage-w.percentage)}const x=g=>{var S;const{color:I}=s;if(ur(I))return I(g);if(Ln(I))return I;{const b=v(I);for(const w of b)if(w.percentage>g)return w.color;return(S=b[b.length-1])==null?void 0:S.color}};return(g,S)=>(E(),L("div",{class:ve([k(f).b(),k(f).m(g.type),k(f).is(g.status),{[k(f).m("without-text")]:!g.showText,[k(f).m("text-inside")]:g.textInside}]),role:"progressbar","aria-valuenow":g.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[g.type==="line"?(E(),L("div",{key:0,class:ve(k(f).b("bar"))},[B("div",{class:ve(k(f).be("bar","outer")),style:tt({height:`${g.strokeWidth}px`})},[B("div",{class:ve([k(f).be("bar","inner"),{[k(f).bem("bar","inner","indeterminate")]:g.indeterminate},{[k(f).bem("bar","inner","striped")]:g.striped},{[k(f).bem("bar","inner","striped-flow")]:g.stripedFlow}]),style:tt(k(y))},[(g.showText||g.$slots.default)&&g.textInside?(E(),L("div",{key:0,class:ve(k(f).be("bar","innerText"))},[bt(g.$slots,"default",{percentage:g.percentage},()=>[B("span",null,de(k(d)),1)])],2)):oe("v-if",!0)],6)],6)],2)):(E(),L("div",{key:1,class:ve(k(f).b("circle")),style:tt({height:`${g.width}px`,width:`${g.width}px`})},[(E(),L("svg",Hr,[B("path",{class:ve(k(f).be("circle","track")),d:k(n),stroke:`var(${k(f).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":g.strokeLinecap,"stroke-width":k(h),fill:"none",style:tt(k(o))},null,14,Kr),B("path",{class:ve(k(f).be("circle","path")),d:k(n),stroke:k(a),fill:"none",opacity:g.percentage?1:0,"stroke-linecap":g.strokeLinecap,"stroke-width":k(h),style:tt(k(r))},null,14,Gr)]))],6)),(g.showText||g.$slots.default)&&!g.textInside?(E(),L("div",{key:2,class:ve(k(f).e("text")),style:tt({fontSize:`${k(u)}px`})},[bt(g.$slots,"default",{percentage:g.percentage},()=>[g.status?(E(),le(k(It),{key:1},{default:X(()=>[(E(),le(bn(k(c))))]),_:1})):(E(),L("span",qr,de(k(d)),1))])],6)):oe("v-if",!0)],10,Wr))}});var Zr=Lt(Yr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Jr=vn(Zr),Qr=St({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Vo,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),es=me({name:"ElText"}),ts=me({...es,props:Qr,setup(p){const s=p,l=ir(),f=mn("text"),y=H(()=>[f.b(),f.m(s.type),f.m(l.value),f.is("truncated",s.truncated)]);return(h,_)=>(E(),le(bn(h.tag),{class:ve(k(y))},{default:X(()=>[bt(h.$slots,"default")]),_:3},8,["class"]))}});var ns=Lt(ts,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const os=vn(ns),Yn=(p,s,l)=>{switch(s){case ee.SYSTEM:case ee.TEXT:return`${p}: ${l}`;case ee.IMAGE:return`${p}: [图片]`;case ee.FILE:return`${p}: [文件]`;case ee.VOICE:return`${p}: [语音]`;case ee.VIDEO:return`${p}: [视频]`;case ee.EMOJI:return`${p}: [表情]`;default:return""}},rs={class:"chat-message"},ss=["onClick"],as={class:"message-info"},is={style:{"white-space":"nowrap"}},ls={class:"person"},us={key:0,class:"tag"},cs={class:"message-message"},ds={class:"message-time"},ps=me({__name:"index",setup(p){const s=xt(),l=mt(),f=H(()=>l.currentSession),y=H(()=>s.sessionList.map(_=>{var e,t,o,r,a,c,u,d;const n=(o=(t=Array.from(((e=s.messageMap.get(_.roomId))==null?void 0:e.values())||[]))==null?void 0:t.slice(-1))==null?void 0:o[0];let i="";if(n){const v=Ft(n.fromUser.uid);i=((r=n.message)==null?void 0:r.type)===ee.RECALL?`${v.value.name}:'撤回了一条消息'`:Yn(v.value.name,(a=n.message)==null?void 0:a.type,((u=(c=n.message)==null?void 0:c.body)==null?void 0:u.content)||((d=n.message)==null?void 0:d.body))}return{..._,tag:_.hot_Flag===ar.Yes?"官方":"",lastMsg:i||_.text||"欢迎使用MallChat",lastMsgTime:An(_==null?void 0:_.activeTime)}})),h=(_,n)=>{l.currentSession.roomId=_,l.currentSession.type=n};return(_,n)=>{const i=Qo,e=Wo;return E(),L("div",rs,[(E(!0),L(ot,null,Tt(y.value,(t,o)=>(E(),L("div",{key:o,class:ve(["chat-message-item ",{active:f.value.roomId===t.roomId}]),onClick:r=>h(t.roomId,t.type)},[$(e,{value:t.unreadCount,max:999,hidden:t.unreadCount<1,class:"item"},{default:X(()=>[$(i,{shape:"circle",size:38,src:t.avatar},null,8,["src"])]),_:2},1032,["value","hidden"]),B("div",as,[B("div",is,[B("span",ls,de(t.name),1),t.tag?(E(),L("span",us,de(t.tag),1)):oe("",!0)]),B("div",cs,de(t.lastMsg),1)]),B("span",ds,de(t.lastMsgTime),1)],10,ss))),128))])}}});const fs=vt(ps,[["__scopeId","data-v-176a5711"]]),ms={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},vs=B("path",{fill:"currentColor",d:"m174.72 855.68l135.296-45.12l23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160S128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8l-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512C64 299.904 256 96 512 96s448 203.904 448 416s-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"},null,-1),gs=B("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4z"},null,-1),hs=[vs,gs];function ys(p,s){return E(),L("svg",ms,hs)}const bs={name:"ep-chat-dot-round",render:ys};var Zn={exports:{}};const _s=kr(cr);(function(p,s){(function(l,f){p.exports=f(_s)})(typeof self<"u"?self:Cr,l=>(()=>{var f={9662:(n,i,e)=>{var t=e(614),o=e(6330),r=TypeError;n.exports=function(a){if(t(a))return a;throw r(o(a)+" is not a function")}},6077:(n,i,e)=>{var t=e(614),o=String,r=TypeError;n.exports=function(a){if(typeof a=="object"||t(a))return a;throw r("Can't set "+o(a)+" as a prototype")}},1223:(n,i,e)=>{var t=e(5112),o=e(30),r=e(3070).f,a=t("unscopables"),c=Array.prototype;c[a]==null&&r(c,a,{configurable:!0,value:o(null)}),n.exports=function(u){c[a][u]=!0}},9670:(n,i,e)=>{var t=e(111),o=String,r=TypeError;n.exports=function(a){if(t(a))return a;throw r(o(a)+" is not an object")}},8533:(n,i,e)=>{var t=e(2092).forEach,o=e(9341),r=o("forEach");n.exports=r?[].forEach:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}},1318:(n,i,e)=>{var t=e(5656),o=e(1400),r=e(6244),a=function(c){return function(u,d,v){var x,g=t(u),S=r(g),I=o(v,S);if(c&&d!=d){for(;S>I;)if(x=g[I++],x!=x)return!0}else for(;S>I;I++)if((c||I in g)&&g[I]===d)return c||I||0;return!c&&-1}};n.exports={includes:a(!0),indexOf:a(!1)}},2092:(n,i,e)=>{var t=e(9974),o=e(1702),r=e(8361),a=e(7908),c=e(6244),u=e(5417),d=o([].push),v=function(x){var g=x==1,S=x==2,I=x==3,b=x==4,w=x==6,T=x==7,z=x==5||w;return function(G,A,Z,V){for(var te,ie,O=a(G),P=r(O),C=t(A,Z),j=c(P),q=0,se=V||u,K=g?se(G,j):S||T?se(G,0):void 0;j>q;q++)if((z||q in P)&&(te=P[q],ie=C(te,q,O),x))if(g)K[q]=ie;else if(ie)switch(x){case 3:return!0;case 5:return te;case 6:return q;case 2:d(K,te)}else switch(x){case 4:return!1;case 7:d(K,te)}return w?-1:I||b?b:K}};n.exports={forEach:v(0),map:v(1),filter:v(2),some:v(3),every:v(4),find:v(5),findIndex:v(6),filterReject:v(7)}},1194:(n,i,e)=>{var t=e(7293),o=e(5112),r=e(7392),a=o("species");n.exports=function(c){return r>=51||!t(function(){var u=[],d=u.constructor={};return d[a]=function(){return{foo:1}},u[c](Boolean).foo!==1})}},9341:(n,i,e)=>{var t=e(7293);n.exports=function(o,r){var a=[][o];return!!a&&t(function(){a.call(null,r||function(){return 1},1)})}},3658:(n,i,e)=>{var t=e(9781),o=e(3157),r=TypeError,a=Object.getOwnPropertyDescriptor,c=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(u){return u instanceof TypeError}}();n.exports=c?function(u,d){if(o(u)&&!a(u,"length").writable)throw r("Cannot set read only .length");return u.length=d}:function(u,d){return u.length=d}},206:(n,i,e)=>{var t=e(1702);n.exports=t([].slice)},7475:(n,i,e)=>{var t=e(3157),o=e(4411),r=e(111),a=e(5112),c=a("species"),u=Array;n.exports=function(d){var v;return t(d)&&(v=d.constructor,o(v)&&(v===u||t(v.prototype))?v=void 0:r(v)&&(v=v[c],v===null&&(v=void 0))),v===void 0?u:v}},5417:(n,i,e)=>{var t=e(7475);n.exports=function(o,r){return new(t(o))(r===0?0:r)}},4326:(n,i,e)=>{var t=e(1702),o=t({}.toString),r=t("".slice);n.exports=function(a){return r(o(a),8,-1)}},648:(n,i,e)=>{var t=e(1694),o=e(614),r=e(4326),a=e(5112),c=a("toStringTag"),u=Object,d=r(function(){return arguments}())=="Arguments",v=function(x,g){try{return x[g]}catch{}};n.exports=t?r:function(x){var g,S,I;return x===void 0?"Undefined":x===null?"Null":typeof(S=v(g=u(x),c))=="string"?S:d?r(g):(I=r(g))=="Object"&&o(g.callee)?"Arguments":I}},9920:(n,i,e)=>{var t=e(2597),o=e(3887),r=e(1236),a=e(3070);n.exports=function(c,u,d){for(var v=o(u),x=a.f,g=r.f,S=0;S<v.length;S++){var I=v[S];t(c,I)||d&&t(d,I)||x(c,I,g(u,I))}}},4964:(n,i,e)=>{var t=e(5112),o=t("match");n.exports=function(r){var a=/./;try{"/./"[r](a)}catch{try{return a[o]=!1,"/./"[r](a)}catch{}}return!1}},8880:(n,i,e)=>{var t=e(9781),o=e(3070),r=e(9114);n.exports=t?function(a,c,u){return o.f(a,c,r(1,u))}:function(a,c,u){return a[c]=u,a}},9114:n=>{n.exports=function(i,e){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:e}}},6135:(n,i,e)=>{var t=e(4948),o=e(3070),r=e(9114);n.exports=function(a,c,u){var d=t(c);d in a?o.f(a,d,r(0,u)):a[d]=u}},8052:(n,i,e)=>{var t=e(614),o=e(3070),r=e(6339),a=e(3072);n.exports=function(c,u,d,v){v||(v={});var x=v.enumerable,g=v.name!==void 0?v.name:u;if(t(d)&&r(d,g,v),v.global)x?c[u]=d:a(u,d);else{try{v.unsafe?c[u]&&(x=!0):delete c[u]}catch{}x?c[u]=d:o.f(c,u,{value:d,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return c}},3072:(n,i,e)=>{var t=e(7854),o=Object.defineProperty;n.exports=function(r,a){try{o(t,r,{value:a,configurable:!0,writable:!0})}catch{t[r]=a}return a}},5117:(n,i,e)=>{var t=e(6330),o=TypeError;n.exports=function(r,a){if(!delete r[a])throw o("Cannot delete property "+t(a)+" of "+t(r))}},9781:(n,i,e)=>{var t=e(7293);n.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(n,i,e)=>{var t=e(7854),o=e(111),r=t.document,a=o(r)&&o(r.createElement);n.exports=function(c){return a?r.createElement(c):{}}},7207:n=>{var i=TypeError,e=9007199254740991;n.exports=function(t){if(t>e)throw i("Maximum allowed index exceeded");return t}},8113:(n,i,e)=>{var t=e(5005);n.exports=t("navigator","userAgent")||""},7392:(n,i,e)=>{var t,o,r=e(7854),a=e(8113),c=r.process,u=r.Deno,d=c&&c.versions||u&&u.version,v=d&&d.v8;v&&(t=v.split("."),o=t[0]>0&&t[0]<4?1:+(t[0]+t[1])),!o&&a&&(t=a.match(/Edge\/(\d+)/),(!t||t[1]>=74)&&(t=a.match(/Chrome\/(\d+)/),t&&(o=+t[1]))),n.exports=o},748:n=>{n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7762:(n,i,e)=>{var t=e(9781),o=e(7293),r=e(9670),a=e(30),c=e(6277),u=Error.prototype.toString,d=o(function(){if(t){var v=a(Object.defineProperty({},"name",{get:function(){return this===v}}));if(u.call(v)!=="true")return!0}return u.call({message:1,name:2})!=="2: 1"||u.call({})!=="Error"});n.exports=d?function(){var v=r(this),x=c(v.name,"Error"),g=c(v.message);return x?g?x+": "+g:x:g}:u},2109:(n,i,e)=>{var t=e(7854),o=e(1236).f,r=e(8880),a=e(8052),c=e(3072),u=e(9920),d=e(4705);n.exports=function(v,x){var g,S,I,b,w,T,z=v.target,G=v.global,A=v.stat;if(S=G?t:A?t[z]||c(z,{}):(t[z]||{}).prototype,S)for(I in x){if(w=x[I],v.dontCallGetSet?(T=o(S,I),b=T&&T.value):b=S[I],g=d(G?I:z+(A?".":"#")+I,v.forced),!g&&b!==void 0){if(typeof w==typeof b)continue;u(w,b)}(v.sham||b&&b.sham)&&r(w,"sham",!0),a(S,I,w,v)}}},7293:n=>{n.exports=function(i){try{return!!i()}catch{return!0}}},2104:(n,i,e)=>{var t=e(4374),o=Function.prototype,r=o.apply,a=o.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(t?a.bind(r):function(){return a.apply(r,arguments)})},9974:(n,i,e)=>{var t=e(1702),o=e(9662),r=e(4374),a=t(t.bind);n.exports=function(c,u){return o(c),u===void 0?c:r?a(c,u):function(){return c.apply(u,arguments)}}},4374:(n,i,e)=>{var t=e(7293);n.exports=!t(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},6916:(n,i,e)=>{var t=e(4374),o=Function.prototype.call;n.exports=t?o.bind(o):function(){return o.apply(o,arguments)}},6530:(n,i,e)=>{var t=e(9781),o=e(2597),r=Function.prototype,a=t&&Object.getOwnPropertyDescriptor,c=o(r,"name"),u=c&&(function(){}).name==="something",d=c&&(!t||t&&a(r,"name").configurable);n.exports={EXISTS:c,PROPER:u,CONFIGURABLE:d}},1702:(n,i,e)=>{var t=e(4374),o=Function.prototype,r=o.bind,a=o.call,c=t&&r.bind(a,a);n.exports=t?function(u){return u&&c(u)}:function(u){return u&&function(){return a.apply(u,arguments)}}},5005:(n,i,e)=>{var t=e(7854),o=e(614),r=function(a){return o(a)?a:void 0};n.exports=function(a,c){return arguments.length<2?r(t[a]):t[a]&&t[a][c]}},8173:(n,i,e)=>{var t=e(9662),o=e(8554);n.exports=function(r,a){var c=r[a];return o(c)?void 0:t(c)}},7854:(n,i,e)=>{var t=function(o){return o&&o.Math==Math&&o};n.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof e.g=="object"&&e.g)||function(){return this}()||Function("return this")()},2597:(n,i,e)=>{var t=e(1702),o=e(7908),r=t({}.hasOwnProperty);n.exports=Object.hasOwn||function(a,c){return r(o(a),c)}},3501:n=>{n.exports={}},490:(n,i,e)=>{var t=e(5005);n.exports=t("document","documentElement")},4664:(n,i,e)=>{var t=e(9781),o=e(7293),r=e(317);n.exports=!t&&!o(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!=7})},8361:(n,i,e)=>{var t=e(1702),o=e(7293),r=e(4326),a=Object,c=t("".split);n.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(u){return r(u)=="String"?c(u,""):a(u)}:a},9587:(n,i,e)=>{var t=e(614),o=e(111),r=e(7674);n.exports=function(a,c,u){var d,v;return r&&t(d=c.constructor)&&d!==u&&o(v=d.prototype)&&v!==u.prototype&&r(a,v),a}},2788:(n,i,e)=>{var t=e(1702),o=e(614),r=e(5465),a=t(Function.toString);o(r.inspectSource)||(r.inspectSource=function(c){return a(c)}),n.exports=r.inspectSource},9909:(n,i,e)=>{var t,o,r,a=e(4811),c=e(7854),u=e(1702),d=e(111),v=e(8880),x=e(2597),g=e(5465),S=e(6200),I=e(3501),b="Object already initialized",w=c.TypeError,T=c.WeakMap,z=function(O){return r(O)?o(O):t(O,{})},G=function(O){return function(P){var C;if(!d(P)||(C=o(P)).type!==O)throw w("Incompatible receiver, "+O+" required");return C}};if(a||g.state){var A=g.state||(g.state=new T),Z=u(A.get),V=u(A.has),te=u(A.set);t=function(O,P){if(V(A,O))throw w(b);return P.facade=O,te(A,O,P),P},o=function(O){return Z(A,O)||{}},r=function(O){return V(A,O)}}else{var ie=S("state");I[ie]=!0,t=function(O,P){if(x(O,ie))throw w(b);return P.facade=O,v(O,ie,P),P},o=function(O){return x(O,ie)?O[ie]:{}},r=function(O){return x(O,ie)}}n.exports={set:t,get:o,has:r,enforce:z,getterFor:G}},3157:(n,i,e)=>{var t=e(4326);n.exports=Array.isArray||function(o){return t(o)=="Array"}},614:n=>{n.exports=function(i){return typeof i=="function"}},4411:(n,i,e)=>{var t=e(1702),o=e(7293),r=e(614),a=e(648),c=e(5005),u=e(2788),d=function(){},v=[],x=c("Reflect","construct"),g=/^\s*(?:class|function)\b/,S=t(g.exec),I=!g.exec(d),b=function(T){if(!r(T))return!1;try{return x(d,v,T),!0}catch{return!1}},w=function(T){if(!r(T))return!1;switch(a(T)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return I||!!S(g,u(T))}catch{return!0}};w.sham=!0,n.exports=!x||o(function(){var T;return b(b.call)||!b(Object)||!b(function(){T=!0})||T})?w:b},4705:(n,i,e)=>{var t=e(7293),o=e(614),r=/#|\.prototype\./,a=function(x,g){var S=u[c(x)];return S==v||S!=d&&(o(g)?t(g):!!g)},c=a.normalize=function(x){return String(x).replace(r,".").toLowerCase()},u=a.data={},d=a.NATIVE="N",v=a.POLYFILL="P";n.exports=a},8554:n=>{n.exports=function(i){return i==null}},111:(n,i,e)=>{var t=e(614),o=typeof document=="object"&&document.all,r=typeof o>"u"&&o!==void 0;n.exports=r?function(a){return typeof a=="object"?a!==null:t(a)||a===o}:function(a){return typeof a=="object"?a!==null:t(a)}},1913:n=>{n.exports=!1},7850:(n,i,e)=>{var t=e(111),o=e(4326),r=e(5112),a=r("match");n.exports=function(c){var u;return t(c)&&((u=c[a])!==void 0?!!u:o(c)=="RegExp")}},2190:(n,i,e)=>{var t=e(5005),o=e(614),r=e(7976),a=e(3307),c=Object;n.exports=a?function(u){return typeof u=="symbol"}:function(u){var d=t("Symbol");return o(d)&&r(d.prototype,c(u))}},6244:(n,i,e)=>{var t=e(7466);n.exports=function(o){return t(o.length)}},6339:(n,i,e)=>{var t=e(7293),o=e(614),r=e(2597),a=e(9781),c=e(6530).CONFIGURABLE,u=e(2788),d=e(9909),v=d.enforce,x=d.get,g=Object.defineProperty,S=a&&!t(function(){return g(function(){},"length",{value:8}).length!==8}),I=String(String).split("String"),b=n.exports=function(w,T,z){String(T).slice(0,7)==="Symbol("&&(T="["+String(T).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),z&&z.getter&&(T="get "+T),z&&z.setter&&(T="set "+T),(!r(w,"name")||c&&w.name!==T)&&(a?g(w,"name",{value:T,configurable:!0}):w.name=T),S&&z&&r(z,"arity")&&w.length!==z.arity&&g(w,"length",{value:z.arity});try{z&&r(z,"constructor")&&z.constructor?a&&g(w,"prototype",{writable:!1}):w.prototype&&(w.prototype=void 0)}catch{}var G=v(w);return r(G,"source")||(G.source=I.join(typeof T=="string"?T:"")),w};Function.prototype.toString=b(function(){return o(this)&&x(this).source||u(this)},"toString")},4758:n=>{var i=Math.ceil,e=Math.floor;n.exports=Math.trunc||function(t){var o=+t;return(o>0?e:i)(o)}},6277:(n,i,e)=>{var t=e(1340);n.exports=function(o,r){return o===void 0?arguments.length<2?"":r:t(o)}},3929:(n,i,e)=>{var t=e(7850),o=TypeError;n.exports=function(r){if(t(r))throw o("The method doesn't accept regular expressions");return r}},30:(n,i,e)=>{var t,o=e(9670),r=e(6048),a=e(748),c=e(3501),u=e(490),d=e(317),v=e(6200),x=">",g="<",S="prototype",I="script",b=v("IE_PROTO"),w=function(){},T=function(Z){return g+I+x+Z+g+"/"+I+x},z=function(Z){Z.write(T("")),Z.close();var V=Z.parentWindow.Object;return Z=null,V},G=function(){var Z,V=d("iframe"),te="java"+I+":";return V.style.display="none",u.appendChild(V),V.src=String(te),Z=V.contentWindow.document,Z.open(),Z.write(T("document.F=Object")),Z.close(),Z.F},A=function(){try{t=new ActiveXObject("htmlfile")}catch{}A=typeof document<"u"?document.domain&&t?z(t):G():z(t);for(var Z=a.length;Z--;)delete A[S][a[Z]];return A()};c[b]=!0,n.exports=Object.create||function(Z,V){var te;return Z!==null?(w[S]=o(Z),te=new w,w[S]=null,te[b]=Z):te=A(),V===void 0?te:r.f(te,V)}},6048:(n,i,e)=>{var t=e(9781),o=e(3353),r=e(3070),a=e(9670),c=e(5656),u=e(1956);i.f=t&&!o?Object.defineProperties:function(d,v){a(d);for(var x,g=c(v),S=u(v),I=S.length,b=0;I>b;)r.f(d,x=S[b++],g[x]);return d}},3070:(n,i,e)=>{var t=e(9781),o=e(4664),r=e(3353),a=e(9670),c=e(4948),u=TypeError,d=Object.defineProperty,v=Object.getOwnPropertyDescriptor,x="enumerable",g="configurable",S="writable";i.f=t?r?function(I,b,w){if(a(I),b=c(b),a(w),typeof I=="function"&&b==="prototype"&&"value"in w&&S in w&&!w[S]){var T=v(I,b);T&&T[S]&&(I[b]=w.value,w={configurable:g in w?w[g]:T[g],enumerable:x in w?w[x]:T[x],writable:!1})}return d(I,b,w)}:d:function(I,b,w){if(a(I),b=c(b),a(w),o)try{return d(I,b,w)}catch{}if("get"in w||"set"in w)throw u("Accessors not supported");return"value"in w&&(I[b]=w.value),I}},1236:(n,i,e)=>{var t=e(9781),o=e(6916),r=e(5296),a=e(9114),c=e(5656),u=e(4948),d=e(2597),v=e(4664),x=Object.getOwnPropertyDescriptor;i.f=t?x:function(g,S){if(g=c(g),S=u(S),v)try{return x(g,S)}catch{}if(d(g,S))return a(!o(r.f,g,S),g[S])}},8006:(n,i,e)=>{var t=e(6324),o=e(748),r=o.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(a){return t(a,r)}},5181:(n,i)=>{i.f=Object.getOwnPropertySymbols},7976:(n,i,e)=>{var t=e(1702);n.exports=t({}.isPrototypeOf)},6324:(n,i,e)=>{var t=e(1702),o=e(2597),r=e(5656),a=e(1318).indexOf,c=e(3501),u=t([].push);n.exports=function(d,v){var x,g=r(d),S=0,I=[];for(x in g)!o(c,x)&&o(g,x)&&u(I,x);for(;v.length>S;)o(g,x=v[S++])&&(~a(I,x)||u(I,x));return I}},1956:(n,i,e)=>{var t=e(6324),o=e(748);n.exports=Object.keys||function(r){return t(r,o)}},5296:(n,i)=>{var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,o=t&&!e.call({1:2},1);i.f=o?function(r){var a=t(this,r);return!!a&&a.enumerable}:e},7674:(n,i,e)=>{var t=e(1702),o=e(9670),r=e(6077);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,c=!1,u={};try{a=t(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),a(u,[]),c=u instanceof Array}catch{}return function(d,v){return o(d),r(v),c?a(d,v):d.__proto__=v,d}}():void 0)},288:(n,i,e)=>{var t=e(1694),o=e(648);n.exports=t?{}.toString:function(){return"[object "+o(this)+"]"}},2140:(n,i,e)=>{var t=e(6916),o=e(614),r=e(111),a=TypeError;n.exports=function(c,u){var d,v;if(u==="string"&&o(d=c.toString)&&!r(v=t(d,c))||o(d=c.valueOf)&&!r(v=t(d,c))||u!=="string"&&o(d=c.toString)&&!r(v=t(d,c)))return v;throw a("Can't convert object to primitive value")}},3887:(n,i,e)=>{var t=e(5005),o=e(1702),r=e(8006),a=e(5181),c=e(9670),u=o([].concat);n.exports=t("Reflect","ownKeys")||function(d){var v=r.f(c(d)),x=a.f;return x?u(v,x(d)):v}},7066:(n,i,e)=>{var t=e(9670);n.exports=function(){var o=t(this),r="";return o.hasIndices&&(r+="d"),o.global&&(r+="g"),o.ignoreCase&&(r+="i"),o.multiline&&(r+="m"),o.dotAll&&(r+="s"),o.unicode&&(r+="u"),o.unicodeSets&&(r+="v"),o.sticky&&(r+="y"),r}},4706:(n,i,e)=>{var t=e(6916),o=e(2597),r=e(7976),a=e(7066),c=RegExp.prototype;n.exports=function(u){var d=u.flags;return d!==void 0||"flags"in c||o(u,"flags")||!r(c,u)?d:t(a,u)}},4488:(n,i,e)=>{var t=e(8554),o=TypeError;n.exports=function(r){if(t(r))throw o("Can't call method on "+r);return r}},7152:(n,i,e)=>{var t=e(7854),o=e(2104),r=e(614),a=e(8113),c=e(206),u=e(8053),d=/MSIE .\./.test(a),v=t.Function,x=function(g){return d?function(S,I){var b=u(arguments.length,1)>2,w=r(S)?S:v(S),T=b?c(arguments,2):void 0;return g(b?function(){o(w,this,T)}:w,I)}:g};n.exports={setTimeout:x(t.setTimeout),setInterval:x(t.setInterval)}},6200:(n,i,e)=>{var t=e(2309),o=e(9711),r=t("keys");n.exports=function(a){return r[a]||(r[a]=o(a))}},5465:(n,i,e)=>{var t=e(7854),o=e(3072),r="__core-js_shared__",a=t[r]||o(r,{});n.exports=a},2309:(n,i,e)=>{var t=e(1913),o=e(5465);(n.exports=function(r,a){return o[r]||(o[r]=a!==void 0?a:{})})("versions",[]).push({version:"3.25.0",mode:t?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},3111:(n,i,e)=>{var t=e(1702),o=e(4488),r=e(1340),a=e(1361),c=t("".replace),u="["+a+"]",d=RegExp("^"+u+u+"*"),v=RegExp(u+u+"*$"),x=function(g){return function(S){var I=r(o(S));return 1&g&&(I=c(I,d,"")),2&g&&(I=c(I,v,"")),I}};n.exports={start:x(1),end:x(2),trim:x(3)}},6293:(n,i,e)=>{var t=e(7392),o=e(7293);n.exports=!!Object.getOwnPropertySymbols&&!o(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&t&&t<41})},863:(n,i,e)=>{var t=e(1702);n.exports=t(1 .valueOf)},1400:(n,i,e)=>{var t=e(9303),o=Math.max,r=Math.min;n.exports=function(a,c){var u=t(a);return u<0?o(u+c,0):r(u,c)}},5656:(n,i,e)=>{var t=e(8361),o=e(4488);n.exports=function(r){return t(o(r))}},9303:(n,i,e)=>{var t=e(4758);n.exports=function(o){var r=+o;return r!==r||r===0?0:t(r)}},7466:(n,i,e)=>{var t=e(9303),o=Math.min;n.exports=function(r){return r>0?o(t(r),9007199254740991):0}},7908:(n,i,e)=>{var t=e(4488),o=Object;n.exports=function(r){return o(t(r))}},7593:(n,i,e)=>{var t=e(6916),o=e(111),r=e(2190),a=e(8173),c=e(2140),u=e(5112),d=TypeError,v=u("toPrimitive");n.exports=function(x,g){if(!o(x)||r(x))return x;var S,I=a(x,v);if(I){if(g===void 0&&(g="default"),S=t(I,x,g),!o(S)||r(S))return S;throw d("Can't convert object to primitive value")}return g===void 0&&(g="number"),c(x,g)}},4948:(n,i,e)=>{var t=e(7593),o=e(2190);n.exports=function(r){var a=t(r,"string");return o(a)?a:a+""}},1694:(n,i,e)=>{var t=e(5112),o=t("toStringTag"),r={};r[o]="z",n.exports=String(r)==="[object z]"},1340:(n,i,e)=>{var t=e(648),o=String;n.exports=function(r){if(t(r)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return o(r)}},6330:n=>{var i=String;n.exports=function(e){try{return i(e)}catch{return"Object"}}},9711:(n,i,e)=>{var t=e(1702),o=0,r=Math.random(),a=t(1 .toString);n.exports=function(c){return"Symbol("+(c===void 0?"":c)+")_"+a(++o+r,36)}},3307:(n,i,e)=>{var t=e(6293);n.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(n,i,e)=>{var t=e(9781),o=e(7293);n.exports=t&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:n=>{var i=TypeError;n.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},4811:(n,i,e)=>{var t=e(7854),o=e(614),r=t.WeakMap;n.exports=o(r)&&/native code/.test(String(r))},5112:(n,i,e)=>{var t=e(7854),o=e(2309),r=e(2597),a=e(9711),c=e(6293),u=e(3307),d=o("wks"),v=t.Symbol,x=v&&v.for,g=u?v:v&&v.withoutSetter||a;n.exports=function(S){if(!r(d,S)||!c&&typeof d[S]!="string"){var I="Symbol."+S;c&&r(v,S)?d[S]=v[S]:d[S]=u&&x?x(I):g(I)}return d[S]}},1361:n=>{n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},9554:(n,i,e)=>{var t=e(2109),o=e(8533);t({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},6699:(n,i,e)=>{var t=e(2109),o=e(1318).includes,r=e(7293),a=e(1223),c=r(function(){return!Array(1).includes()});t({target:"Array",proto:!0,forced:c},{includes:function(u){return o(this,u,arguments.length>1?arguments[1]:void 0)}}),a("includes")},2772:(n,i,e)=>{var t=e(2109),o=e(1702),r=e(1318).indexOf,a=e(9341),c=o([].indexOf),u=!!c&&1/c([1],1,-0)<0,d=a("indexOf");t({target:"Array",proto:!0,forced:u||!d},{indexOf:function(v){var x=arguments.length>1?arguments[1]:void 0;return u?c(this,v,x)||0:r(this,v,x)}})},561:(n,i,e)=>{var t=e(2109),o=e(7908),r=e(1400),a=e(9303),c=e(6244),u=e(3658),d=e(7207),v=e(5417),x=e(6135),g=e(5117),S=e(1194),I=S("splice"),b=Math.max,w=Math.min;t({target:"Array",proto:!0,forced:!I},{splice:function(T,z){var G,A,Z,V,te,ie,O=o(this),P=c(O),C=r(T,P),j=arguments.length;for(j===0?G=A=0:j===1?(G=0,A=P-C):(G=j-2,A=w(b(a(z),0),P-C)),d(P+G-A),Z=v(O,A),V=0;V<A;V++)te=C+V,te in O&&x(Z,V,O[te]);if(Z.length=A,G<A){for(V=C;V<P-A;V++)te=V+A,ie=V+G,te in O?O[ie]=O[te]:g(O,ie);for(V=P;V>P-A+G;V--)g(O,V-1)}else if(G>A)for(V=P-A;V>C;V--)te=V+A-1,ie=V+G-1,te in O?O[ie]=O[te]:g(O,ie);for(V=0;V<G;V++)O[V+C]=arguments[V+2];return u(O,P-A+G),Z}})},3710:(n,i,e)=>{var t=e(1702),o=e(8052),r=Date.prototype,a="Invalid Date",c="toString",u=t(r[c]),d=t(r.getTime);String(new Date(NaN))!=a&&o(r,c,function(){var v=d(this);return v===v?u(this):a})},6647:(n,i,e)=>{var t=e(8052),o=e(7762),r=Error.prototype;r.toString!==o&&t(r,"toString",o)},9653:(n,i,e)=>{var t=e(9781),o=e(7854),r=e(1702),a=e(4705),c=e(8052),u=e(2597),d=e(9587),v=e(7976),x=e(2190),g=e(7593),S=e(7293),I=e(8006).f,b=e(1236).f,w=e(3070).f,T=e(863),z=e(3111).trim,G="Number",A=o[G],Z=A.prototype,V=o.TypeError,te=r("".slice),ie=r("".charCodeAt),O=function(K){var ae=g(K,"number");return typeof ae=="bigint"?ae:P(ae)},P=function(K){var ae,ye,Oe,je,we,Ze,be,Se,Ie=g(K,"number");if(x(Ie))throw V("Cannot convert a Symbol value to a number");if(typeof Ie=="string"&&Ie.length>2){if(Ie=z(Ie),ae=ie(Ie,0),ae===43||ae===45){if(ye=ie(Ie,2),ye===88||ye===120)return NaN}else if(ae===48){switch(ie(Ie,1)){case 66:case 98:Oe=2,je=49;break;case 79:case 111:Oe=8,je=55;break;default:return+Ie}for(we=te(Ie,2),Ze=we.length,be=0;be<Ze;be++)if(Se=ie(we,be),Se<48||Se>je)return NaN;return parseInt(we,Oe)}}return+Ie};if(a(G,!A(" 0o1")||!A("0b1")||A("+0x1"))){for(var C,j=function(K){var ae=arguments.length<1?0:A(O(K)),ye=this;return v(Z,ye)&&S(function(){T(ye)})?d(Object(ae),ye,j):ae},q=t?I(A):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),se=0;q.length>se;se++)u(A,C=q[se])&&!u(j,C)&&w(j,C,b(A,C));j.prototype=Z,Z.constructor=j,c(o,G,j,{constructor:!0})}},1539:(n,i,e)=>{var t=e(1694),o=e(8052),r=e(288);t||o(Object.prototype,"toString",r,{unsafe:!0})},9714:(n,i,e)=>{var t=e(6530).PROPER,o=e(8052),r=e(9670),a=e(1340),c=e(7293),u=e(4706),d="toString",v=RegExp.prototype,x=v[d],g=c(function(){return x.call({source:"a",flags:"b"})!="/a/b"}),S=t&&x.name!=d;(g||S)&&o(RegExp.prototype,d,function(){var I=r(this),b=a(I.source),w=a(u(I));return"/"+b+"/"+w},{unsafe:!0})},2023:(n,i,e)=>{var t=e(2109),o=e(1702),r=e(3929),a=e(4488),c=e(1340),u=e(4964),d=o("".indexOf);t({target:"String",proto:!0,forced:!u("includes")},{includes:function(v){return!!~d(c(a(this)),c(r(v)),arguments.length>1?arguments[1]:void 0)}})},6815:(n,i,e)=>{var t=e(2109),o=e(7854),r=e(7152).setInterval;t({global:!0,bind:!0,forced:o.setInterval!==r},{setInterval:r})},8417:(n,i,e)=>{var t=e(2109),o=e(7854),r=e(7152).setTimeout;t({global:!0,bind:!0,forced:o.setTimeout!==r},{setTimeout:r})},2564:(n,i,e)=>{e(6815),e(8417)},3744:(n,i)=>{i.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[r,a]of t)o[r]=a;return o}},7203:n=>{n.exports=l}},y={};function h(n){var i=y[n];if(i!==void 0)return i.exports;var e=y[n]={exports:{}};return f[n](e,e.exports,h),e.exports}h.d=(n,i)=>{for(var e in i)h.o(i,e)&&!h.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},h.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),h.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),h.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},h.p="";var _={};return(()=>{if(h.r(_),h.d(_,{ContextMenu:()=>kn,ContextMenuGroup:()=>Cn,ContextMenuItem:()=>ht,ContextMenuSeparator:()=>ue,MenuBar:()=>So,default:()=>Mo}),typeof window<"u"){var n=window.document.currentScript,i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(h.p=i[1])}var e=h(7203),t=null;function o(m){t&&a(),t=m}function r(m){m===t&&(t=null)}function a(){t&&(t.closeMenu(),t=null)}h(6647),h(3710),h(1539),h(9714);var c={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultAdjustPadding:{x:0,y:10}};function u(m,M){var R=m.offsetTop;return m.offsetParent!=null&&m.offsetParent!=M&&(R-=m.offsetParent.scrollTop,R+=u(m.offsetParent,M)),R}function d(m,M){var R=m.offsetLeft;return m.offsetParent!=null&&m.offsetParent!=M&&(R-=m.offsetParent.scrollLeft,R+=d(m.offsetParent,M)),R}function v(m,M,R,U){return{x:d(m,U)+M,y:u(m,U)+R}}var x="mx-menu-default-container",g="mx-menu-container-",S=0;function I(m){var M=m.getContainer,R=m.zIndex;if(M){var U=typeof M=="function"?M():M;if(U){var fe=U.getAttribute("id");return fe||(fe=g+S++,U.setAttribute("id",fe)),U.style.zIndex=(R==null?void 0:R.toString())||c.defaultZindex.toString(),{eleId:fe,container:U,isNew:!1}}}var he=document.getElementById(x);return he||(he=document.createElement("div"),he.setAttribute("id",x),he.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(he)),he.style.zIndex=(R==null?void 0:R.toString())||c.defaultZindex.toString(),{eleId:x,container:he,isNew:!0}}function b(m){return typeof m=="number"?"".concat(m,"px"):m}var w=(0,e.defineComponent)({props:{vnode:{type:[Object,Function],default:null},data:{type:Object,default:null}},setup:function(m){var M=(0,e.toRefs)(m),R=M.vnode,U=M.data;return function(){return typeof R.value=="function"?R.value(U.value):R.value}}});function T(m,M,R){return M in m?Object.defineProperty(m,M,{value:R,enumerable:!0,configurable:!0,writable:!0}):m[M]=R,m}function z(m,M){var R=Object.keys(m);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(m);M&&(U=U.filter(function(fe){return Object.getOwnPropertyDescriptor(m,fe).enumerable})),R.push.apply(R,U)}return R}function G(m){for(var M=1;M<arguments.length;M++){var R=arguments[M]!=null?arguments[M]:{};M%2?z(Object(R),!0).forEach(function(U){T(m,U,R[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(R)):z(Object(R)).forEach(function(U){Object.defineProperty(m,U,Object.getOwnPropertyDescriptor(R,U))})}return m}h(2564);var A={class:"mx-context-menu-scroll",ref:"scroll"};function Z(m,M,R,U,fe,he){var ne=(0,e.resolveComponent)("ContextMenuSeparator"),J=(0,e.resolveComponent)("ContextSubMenu",!0),ce=(0,e.resolveComponent)("ContextMenuItem"),Me=(0,e.resolveComponent)("ContextMenuIconRight");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)("mx-context-menu "+(m.options.customClass?m.options.customClass:"")+" "+m.globalTheme),style:(0,e.normalizeStyle)({maxWidth:m.maxWidth?m.solveNumberOrStringSize(m.maxWidth):"".concat(m.constOptions.defaultMaxWidth,"px"),minWidth:m.minWidth?m.solveNumberOrStringSize(m.minWidth):"".concat(m.constOptions.defaultMinWidth,"px"),maxHeight:m.overflow&&m.maxHeight>0?"".concat(m.maxHeight,"px"):void 0,zIndex:m.zIndex,left:"".concat(m.position.x,"px"),top:"".concat(m.position.y,"px")}),"data-type":"ContextSubMenu",onClick:M[2]||(M[2]=function(){return m.onSubMenuBodyClick&&m.onSubMenuBodyClick.apply(m,arguments)})},[(0,e.createElementVNode)("div",{class:"mx-context-menu-items",ref:"menu",style:(0,e.normalizeStyle)({top:"".concat(m.scrollValue,"px")})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.items,function(F,xe){return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:xe},[F.hidden!==!0&&F.divided==="up"?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:0})):(0,e.createCommentVNode)("",!0),F.hidden!==!0&&F.divided==="self"?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:1})):((0,e.openBlock)(),(0,e.createBlock)(ce,{key:2,clickHandler:F.onClick?function($e){return F.onClick($e)}:void 0,disabled:F.disabled,hidden:F.hidden,icon:F.icon,iconFontClass:F.iconFontClass,svgIcon:F.svgIcon,svgProps:F.svgProps,label:F.label,customRender:F.customRender,customClass:F.customClass,checked:F.checked,shortcut:F.shortcut,clickClose:F.clickClose,clickableWhenHasChildren:F.clickableWhenHasChildren,preserveIconWidth:F.preserveIconWidth!==void 0?F.preserveIconWidth:m.options.preserveIconWidth,showRightArrow:F.children&&F.children.length>0,hasChildren:F.children&&F.children.length>0,rawMenuItem:F,onSubMenuOpen:F.onSubMenuOpen,onSubMenuClose:F.onSubMenuClose},(0,e.createSlots)({_:2},[F.children&&F.children.length>0?{name:"submenu",fn:(0,e.withCtx)(function(){return[(0,e.createVNode)(J,{items:F.children,maxWidth:F.maxWidth,minWidth:F.minWidth,adjustPosition:F.adjustSubMenuPosition!==void 0?F.adjustSubMenuPosition:m.options.adjustPosition,direction:F.direction!==void 0?F.direction:m.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]}),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),F.hidden===!0||F.divided!=="down"&&F.divided!==!0?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createBlock)(ne,{key:3}))],64)}),128))]})],4),(0,e.createElementVNode)("div",A,[(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable up",onClick:M[0]||(M[0]=function(F){return m.onScroll(!1)})},[(0,e.createVNode)(Me)],512),[[e.vShow,m.overflow&&m.scrollValue<0]]),(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable down",onClick:M[1]||(M[1]=function(F){return m.onScroll(!0)})},[(0,e.createVNode)(Me)],512),[[e.vShow,m.overflow&&m.scrollValue>-m.scrollHeight]])],512)],6)}h(9653),h(2772),h(9554),h(561),h(6699),h(2023);var V={key:0,class:"mx-context-menu-item-wrapper",ref:"menuItemRef","data-type":"ContextMenuItem"},te={class:"mx-item-row"},ie=["xlink:href"],O={key:1,class:"label"},P={class:"mx-item-row"},C={class:"mx-shortcut"};function j(m,M,R,U,fe,he){var ne=(0,e.resolveComponent)("VNodeRender"),J=(0,e.resolveComponent)("ContextMenuIconCheck"),ce=(0,e.resolveComponent)("ContextMenuIconRight");return m.hidden?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",V,[m.globalHasSlot("itemRender")?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:0,vnode:function(){return m.globalRenderSlot("itemRender",m.getItemDataForChildren())}},null,8,["vnode"])):m.customRender?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:1,vnode:m.customRender,data:m.getItemDataForChildren()},null,8,["vnode","data"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:(0,e.normalizeClass)(["mx-context-menu-item",m.disabled?"disabled":"",m.keyBoardFocusMenu?"keyboard-focus":"",m.customClass?" "+m.customClass:"",m.showSubMenu?"open":""]),onClick:M[0]||(M[0]=function(){return m.onClick&&m.onClick.apply(m,arguments)}),onMouseenter:M[1]||(M[1]=function(){return m.onMouseEnter&&m.onMouseEnter.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[(0,e.createElementVNode)("div",te,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["mx-icon-placeholder",m.preserveIconWidth?"preserve-width":""])},[(0,e.renderSlot)(m.$slots,"icon",{},function(){return[m.globalHasSlot("itemIconRender")?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:0,vnode:function(){return m.globalRenderSlot("itemIconRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.svgIcon=="string"&&m.svgIcon?((0,e.openBlock)(),(0,e.createElementBlock)("svg",(0,e.mergeProps)({key:1,class:"icon svg"},m.svgProps),[(0,e.createElementVNode)("use",{"xlink:href":m.svgIcon},null,8,ie)],16)):typeof m.icon!="string"?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:2,vnode:m.icon,data:m.icon},null,8,["vnode","data"])):typeof m.icon=="string"&&m.icon!==""?((0,e.openBlock)(),(0,e.createElementBlock)("i",{key:3,class:(0,e.normalizeClass)(m.icon+" icon "+m.iconFontClass+" "+m.globalIconFontClass)},null,2)):(0,e.createCommentVNode)("",!0)]}),m.checked?(0,e.renderSlot)(m.$slots,"check",{key:0},function(){return[m.globalHasSlot("itemCheckRender")?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:0,vnode:function(){return m.globalRenderSlot("itemCheckRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(J)]}):(0,e.createCommentVNode)("",!0)],2),(0,e.renderSlot)(m.$slots,"label",{},function(){return[m.globalHasSlot("itemLabelRender")?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:0,vnode:function(){return m.globalRenderSlot("itemLabelRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.label=="string"?((0,e.openBlock)(),(0,e.createElementBlock)("span",O,(0,e.toDisplayString)(m.label),1)):((0,e.openBlock)(),(0,e.createBlock)(ne,{key:2,vnode:m.label,data:m.label},null,8,["vnode","data"]))]})]),(0,e.createElementVNode)("div",P,[m.shortcut?(0,e.renderSlot)(m.$slots,"shortcut",{key:0},function(){return[m.globalHasSlot("itemShortcutRender")?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:0,vnode:function(){return m.globalRenderSlot("itemShortcutRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("span",C,(0,e.toDisplayString)(m.shortcut),1)]}):(0,e.createCommentVNode)("",!0),m.showRightArrow?(0,e.renderSlot)(m.$slots,"rightArrow",{key:1},function(){return[m.globalHasSlot("itemRightArrowRender")?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:0,vnode:function(){return m.globalRenderSlot("itemRightArrowRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(ce)]}):(0,e.createCommentVNode)("",!0)])]})],34)),m.showSubMenu?(0,e.renderSlot)(m.$slots,"submenu",{key:3}):(0,e.createCommentVNode)("",!0)],512))}var q={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},se=(0,e.createElementVNode)("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),K=[se];function ae(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",q,K)}var ye=h(3744);const Oe={},je=(0,ye.Z)(Oe,[["render",ae]]),we=je;var Ze={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},be=(0,e.createElementVNode)("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),Se=[be];function Ie(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",Ze,Se)}const Ut={},Vt=(0,ye.Z)(Ut,[["render",Ie]]),jt=Vt,Mt=(0,e.defineComponent)({name:"ContextMenuItem",components:{VNodeRender:w,ContextMenuIconCheck:we,ContextMenuIconRight:jt},props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup:function(m,M){var R=(0,e.toRefs)(m),U=R.clickHandler,fe=R.clickClose,he=R.clickableWhenHasChildren,ne=R.disabled,J=R.hidden,ce=R.label,Me=R.icon,F=R.iconFontClass,xe=R.showRightArrow,$e=R.shortcut,Ve=R.hasChildren,Be=(0,e.ref)(!1),Q=(0,e.ref)(!1),re=(0,e.ref)(),Ne=(0,e.inject)("globalHasSlot"),Fe=(0,e.inject)("globalRenderSlot"),ut=(0,e.inject)("globalTheme"),pe=(0,e.inject)("globalIconFontClass"),Ae=(0,e.inject)("globalClickCloseClassName"),Je=(0,e.inject)("globalIgnoreClickClassName"),Qe=(0,e.inject)("globalCloseMenu"),Re=(0,e.inject)("menuContext"),We={showSubMenu:function(){return Be.value?(Re.markActiveMenuItem(We,!0),!0):!!Ve.value&&(Ge(),!0)},isDisabledOrHidden:function(){return ne.value||J.value},getElement:function(){return re.value},focus:function(){return Q.value=!0},blur:function(){return Q.value=!1},click:He};function He(Le){if(!ne.value){if(Le){var ze=Le.target;if(ze.classList.contains("mx-context-no-clickable")||Je&&ze.classList.contains(Je))return;if(Ae&&ze.classList.contains(Ae))return Le.stopPropagation(),void Qe(m.rawMenuItem)}Ve.value?he.value?(typeof U.value=="function"&&U.value(Le),M.emit("click",Le)):Be.value||Ge():(typeof U.value=="function"&&U.value(Le),M.emit("click",Le),fe.value&&Qe(m.rawMenuItem))}}function Ge(Le){Q.value=!1,Re.checkCloseOtherSubMenuTimeOut()||Re.closeOtherSubMenu(),ne.value||(Re.markActiveMenuItem(We),Ve.value&&(Le||Re.markThisOpenedByKeyBoard(),Re.addOpenedSubMenu(function(){Q.value=!1,Be.value=!1,M.emit("subMenuClose")}),Be.value=!0,M.emit("subMenuOpen")))}return(0,e.onMounted)(function(){Re.isMenuItemDataCollectedFlag()?(0,e.nextTick)(function(){var Le=0,ze=Re.getElement();if(ze)for(var Ee=0,qe=0;qe<ze.children.length;qe++){var W=ze.children[qe];if(W.getAttribute("data-type")==="ContextMenuItem"){if(W===re.value){Le=Ee;break}Ee++}}Re.addChildMenuItem(We,Le)}):Re.addChildMenuItem(We)}),(0,e.onBeforeUnmount)(function(){Re.removeChildMenuItem(We)}),{getItemDataForChildren:function(){return{disabled:ne.value,label:ce.value,icon:Me.value,iconFontClass:F.value,showRightArrow:xe.value,clickClose:fe.value,clickableWhenHasChildren:he.value,shortcut:$e.value,theme:ut,isOpen:Be,hasChildren:Ve,onClick:He,onMouseEnter:Ge,closeMenu:Qe}},showSubMenu:Be,keyBoardFocusMenu:Q,menuItemRef:re,globalHasSlot:Ne,globalRenderSlot:Fe,globalIconFontClass:pe,onMouseEnter:Ge,onClick:He}}}),Bt=(0,ye.Z)(Mt,[["render",j]]),ht=Bt;var Wt={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function Ht(m,M,R,U,fe,he){var ne=(0,e.resolveComponent)("VNodeRender");return m.globalHasSlot("separatorRender")?((0,e.openBlock)(),(0,e.createBlock)(ne,{key:0,vnode:function(){return m.globalRenderSlot("separatorRender",{})}},null,8,["vnode"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",Wt))}const Y=(0,e.defineComponent)({name:"ContextMenuSperator",components:{VNodeRender:w},setup:function(){var m=(0,e.inject)("globalHasSlot"),M=(0,e.inject)("globalRenderSlot");return{globalHasSlot:m,globalRenderSlot:M}}}),N=(0,ye.Z)(Y,[["render",Ht]]),ue=N,Te=(0,e.defineComponent)({name:"ContextSubMenu",components:{ContextMenuItem:ht,ContextMenuSeparator:ue,ContextMenuIconRight:jt},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup:function(m){var M=(0,e.inject)("menuContext"),R=(0,e.inject)("globalOptions"),U=(0,e.inject)("globalHasSlot"),fe=(0,e.inject)("globalRenderSlot"),he=(0,e.inject)("globalTheme"),ne=M.zIndex,J=M.getParentWidth,ce=M.getParentHeight,Me=(0,e.toRefs)(m),F=Me.adjustPosition,xe=(0,e.ref)(),$e=(0,e.ref)(),Ve=[],Be=(0,e.inject)("globalSetCurrentSubMenu"),Q=[],re=null,Ne=0;function Fe(){re&&re.blur()}function ut(W,_e){if(W){for(var et=_e!==void 0?_e:0;et<Q.length;et++)if(!Q[et].isDisabledOrHidden()){pe(et);break}}else for(var dt=_e!==void 0?_e:Q.length-1;dt>=0;dt--)if(!Q[dt].isDisabledOrHidden()){pe(dt);break}}function pe(W){if(re&&Fe(),W!==void 0&&(re=Q[Math.max(0,Math.min(W,Q.length-1))]),re&&(re.focus(),ze.value)){var _e=re.getElement();_e&&(He.value=Math.min(Math.max(-Ge.value,-_e.offsetTop-_e.offsetHeight+qe.value),0))}}function Ae(){Be(Je)}var Je={isTopLevel:function(){return M.getParentContext()===null},closeSelfAndActiveParent:function(){var W=We.getParentContext();if(W){W.closeOtherSubMenu();var _e=W.getSubMenuInstanceContext();if(_e)return _e.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:function(){var W;return(W=We.getParentContext())===null||W===void 0?void 0:W.closeOtherSubMenu()},moveCurrentItemFirst:function(){return ut(!0)},moveCurrentItemLast:function(){return ut(!1)},moveCurrentItemDown:function(){return ut(!0,re?Q.indexOf(re)+1:0)},moveCurrentItemUp:function(){return ut(!1,re?Q.indexOf(re)-1:0)},focusCurrentItem:function(){return pe()},openCurrentItemSubMenu:function(){var W;return!!re&&((W=re)===null||W===void 0?void 0:W.showSubMenu())},triggerCurrentItemClick:function(W){var _e;return(_e=re)===null||_e===void 0?void 0:_e.click(W)}},Qe=!1,Re=!1,We={zIndex:ne+1,container:M.container,adjustPadding:R.adjustPadding||c.defaultAdjustPadding,getParentWidth:function(){var W;return((W=xe.value)===null||W===void 0?void 0:W.offsetWidth)||0},getParentHeight:function(){var W;return((W=xe.value)===null||W===void 0?void 0:W.offsetHeight)||0},getParentX:function(){return Ee.value.x},getParentY:function(){return Ee.value.y},getParentAbsX:function(){return xe.value?d(xe.value,M.container):0},getParentAbsY:function(){return xe.value?u(xe.value,M.container):0},getPositon:function(){return[0,0]},addOpenedSubMenu:function(W){Ve.push(W)},closeOtherSubMenu:function(){Ve.forEach(function(W){return W()}),Ve.splice(0,Ve.length),Be(Je)},checkCloseOtherSubMenuTimeOut:function(){return!!Ne&&(clearTimeout(Ne),Ne=0,!0)},closeOtherSubMenuWithTimeOut:function(){var W=this;Ne=setTimeout(function(){Ne=0,W.closeOtherSubMenu()},200)},addChildMenuItem:function(W,_e){_e===void 0?Q.push(W):Q.splice(_e,0,W)},removeChildMenuItem:function(W){Q.splice(Q.indexOf(W),1)},markActiveMenuItem:function(W){var _e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];Fe(),re=W,_e&&pe()},markThisOpenedByKeyBoard:function(){Qe=!0},isOpenedByKeyBoardFlag:function(){return!!Qe&&(Qe=!1,!0)},isMenuItemDataCollectedFlag:function(){return Re},getElement:function(){return xe.value||null},getParentContext:function(){return M},getSubMenuInstanceContext:function(){return Je}};(0,e.provide)("menuContext",We);var He=(0,e.ref)(0),Ge=(0,e.ref)(0);function Le(W){He.value=W?Math.max(He.value-50,-Ge.value):Math.min(He.value+50,0)}var ze=(0,e.ref)(!1),Ee=(0,e.ref)({x:0,y:0}),qe=(0,e.ref)(0);return(0,e.onMounted)(function(){var W,_e,et,dt,Sn=M.getPositon();Ee.value={x:(W=(_e=Sn[0])!==null&&_e!==void 0?_e:R.xOffset)!==null&&W!==void 0?W:0,y:(et=(dt=Sn[1])!==null&&dt!==void 0?dt:R.yOffset)!==null&&et!==void 0?et:0},Be(Je),(0,e.nextTick)(function(){var Pe=xe.value;if(Pe&&$e.value){var Yt,Zt,Jt,Qt,en,tn,Ct=M.container,nn=(Yt=J==null?void 0:J())!==null&&Yt!==void 0?Yt:0,Eo=(Zt=ce==null?void 0:ce())!==null&&Zt!==void 0?Zt:0,Nt=typeof M.adjustPadding=="number"?M.adjustPadding:(Jt=(Qt=M.adjustPadding)===null||Qt===void 0?void 0:Qt.x)!==null&&Jt!==void 0?Jt:0,Pt=typeof M.adjustPadding=="number"?M.adjustPadding:(en=(tn=M.adjustPadding)===null||tn===void 0?void 0:tn.y)!==null&&en!==void 0?en:0,zt=Eo>0?Pt:0,Oo=document.documentElement.scrollHeight,To=document.documentElement.scrollWidth,$o=Math.min(To,Ct.offsetWidth),on=Math.min(Oo,Ct.offsetHeight),rn=d(Pe,Ct),sn=u(Pe,Ct);m.direction.includes("l")?Ee.value.x-=Pe.offsetWidth+Nt:m.direction.includes("r")?Ee.value.x+=nn+Nt:(Ee.value.x+=nn/2,Ee.value.x-=(Pe.offsetWidth+Nt)/2),m.direction.includes("t")?Ee.value.y-=Pe.offsetHeight+2*Pt:m.direction.includes("b")?Ee.value.y-=Pt:Ee.value.y-=(Pe.offsetHeight+Pt)/2,F.value&&(0,e.nextTick)(function(){rn=d(Pe,Ct),sn=u(Pe,Ct);var Ro=rn+Pe.offsetWidth-$o,In=sn+Pe.offsetHeight-on;if(Ge.value=Pe.offsetHeight-on-2*zt,ze.value=In>0,Ro>0){var Mn=nn+Pe.offsetWidth-Nt,En=rn;Ee.value.x-=Mn>En?En:Mn}if(ze.value){var On=In,Tn=sn;Ee.value.y-=On>Tn?Tn-zt:On-2*zt,qe.value=on-2*zt}else qe.value=0})}Pe==null||Pe.focus({preventScroll:!0}),M.isOpenedByKeyBoardFlag()&&ut(!0),Re=!0})}),{menu:xe,scroll:$e,options:R,zIndex:ne,constOptions:c,scrollValue:He,overflow:ze,position:Ee,scrollHeight:Ge,maxHeight:qe,globalHasSlot:U,globalRenderSlot:fe,globalTheme:he,onScroll:Le,onSubMenuBodyClick:Ae,solveNumberOrStringSize:b}}}),ke=(0,ye.Z)(Te,[["render",Z]]),Et=ke,Kt=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},setup:function(m,M){var R,U,fe,he,ne=(0,e.toRefs)(m),J=ne.options,ce=ne.show,Me=ne.container;(0,e.onMounted)(function(){ce&&xe()}),(0,e.onBeforeUnmount)(function(){Be()}),(0,e.watch)(ce,function(pe){pe?xe():Be()});var F={closeMenu:$e};function xe(){Ve(),o(F)}function $e(pe){M.emit("update:show",!1),M.emit("close",pe),r(F)}function Ve(){setTimeout(function(){document.addEventListener("click",Fe,!0),document.addEventListener("contextmenu",Fe,!0),document.addEventListener("scroll",Ne,!0),!m.isFullScreenContainer&&Me.value&&Me.value.addEventListener("scroll",Ne,!0),J.value.keyboardControl!==!1&&document.addEventListener("keydown",re)},50)}function Be(){document.removeEventListener("contextmenu",Fe,!0),document.removeEventListener("click",Fe,!0),document.removeEventListener("scroll",Ne,!0),!m.isFullScreenContainer&&Me.value&&Me.value.removeEventListener("scroll",Ne,!0),J.value.keyboardControl!==!1&&document.removeEventListener("keydown",re)}M.expose({closeMenu:$e});var Q=(0,e.ref)();function re(pe){var Ae,Je,Qe,Re,We,He,Ge,Le,ze=!0;switch(pe.key){case"Escape":var Ee,qe;((Ee=Q.value)===null||Ee===void 0?void 0:Ee.isTopLevel())===!1?(qe=Q.value)===null||qe===void 0||qe.closeCurrentSubMenu():$e();break;case"ArrowDown":(Ae=Q.value)===null||Ae===void 0||Ae.moveCurrentItemDown();break;case"ArrowUp":(Je=Q.value)===null||Je===void 0||Je.moveCurrentItemUp();break;case"Home":(Qe=Q.value)===null||Qe===void 0||Qe.moveCurrentItemFirst();break;case"End":(Re=Q.value)===null||Re===void 0||Re.moveCurrentItemLast();break;case"ArrowLeft":var W,_e,et;(W=Q.value)!==null&&W!==void 0&&W.closeSelfAndActiveParent()||(_e=(et=J.value).onKeyFocusMoveLeft)===null||_e===void 0||_e.call(et);break;case"ArrowRight":(We=Q.value)!==null&&We!==void 0&&We.openCurrentItemSubMenu()||(He=(Ge=J.value).onKeyFocusMoveRight)===null||He===void 0||He.call(Ge);break;case"Enter":(Le=Q.value)===null||Le===void 0||Le.triggerCurrentItemClick(pe);break;default:ze=!1;break}ze&&Q.value&&(pe.stopPropagation(),pe.preventDefault())}function Ne(){J.value.closeWhenScroll!==!1&&$e()}function Fe(pe){ut(pe.target)}function ut(pe){for(;pe;){if(pe.classList&&pe.classList.contains("mx-menu-host"))return;pe=pe.parentNode}Be(),$e()}return(0,e.provide)("globalSetCurrentSubMenu",function(pe){return Q.value=pe}),(0,e.provide)("globalOptions",J.value),(0,e.provide)("globalCloseMenu",$e),(0,e.provide)("globalTheme",((R=J.value)===null||R===void 0?void 0:R.theme)||"light"),(0,e.provide)("globalIsFullScreenContainer",m.isFullScreenContainer),(0,e.provide)("globalClickCloseClassName",(U=J.value)===null||U===void 0?void 0:U.clickCloseClassName),(0,e.provide)("globalIgnoreClickClassName",(fe=J.value)===null||fe===void 0?void 0:fe.ignoreClickClassName),(0,e.provide)("globalIconFontClass",((he=J.value)===null||he===void 0?void 0:he.iconFontClass)||"iconfont"),(0,e.provide)("globalHasSlot",function(pe){return M.slots[pe]!==void 0}),(0,e.provide)("globalRenderSlot",function(pe,Ae){return(0,e.renderSlot)(M.slots,pe,G({},Ae),function(){return[(0,e.h)("span","Render slot failed")]},!1)}),(0,e.provide)("menuContext",{zIndex:J.value.zIndex||c.defaultZindex,container:Me.value,adjustPadding:{x:0,y:0},getParentAbsY:function(){return J.value.x},getParentAbsX:function(){return J.value.y},getParentX:function(){return 0},getParentY:function(){return 0},getParentWidth:function(){return 0},getParentHeight:function(){return 0},getPositon:function(){return[J.value.x,J.value.y]},closeOtherSubMenuWithTimeOut:function(){},checkCloseOtherSubMenuTimeOut:function(){return!1},addOpenedSubMenu:function(){},closeOtherSubMenu:function(){},getParentContext:function(){return null},getSubMenuInstanceContext:function(){return null},getElement:function(){return null},addChildMenuItem:function(){},removeChildMenuItem:function(){},markActiveMenuItem:function(){},markThisOpenedByKeyBoard:function(){},isOpenedByKeyBoardFlag:function(){return!1},isMenuItemDataCollectedFlag:function(){return!1}}),function(){var pe,Ae;return ce.value?[(0,e.h)("div",{class:"mx-menu-ghost-host"},[(0,e.h)(Et,{class:"mx-menu-host",items:(pe=J.value)===null||pe===void 0?void 0:pe.items,adjustPosition:(Ae=J.value)===null||Ae===void 0?void 0:Ae.adjustPosition,maxWidth:J.value.maxWidth||c.defaultMaxWidth,minWidth:J.value.minWidth||c.defaultMinWidth,direction:J.value.direction||c.defaultDirection},{default:M.slots.default})])]:[]}}}),Gt=Kt,ge=Gt,st=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup:function(m,M){var R=(0,e.toRefs)(m),U=R.options,fe=R.show;return M.expose({closeMenu:function(){return M.emit("update:show",!1)}}),function(){var he=I(U.value),ne=he.isNew,J=he.container,ce=he.eleId,Me=fe.value?[(0,e.h)(ge,{options:U,show:!0,container:J,isFullScreenContainer:!ne,"onUpdate:show":function(F){return M.emit("update:show",F)},onClose:function(F){var xe,$e;M.emit("update:show",!1),M.emit("close"),(xe=($e=U.value).onClose)===null||xe===void 0||xe.call($e,F)}},M.slots)]:[];return[(0,e.h)(e.Teleport,{to:"#".concat(ce)},Me)]}}}),so=st,kn=so;function qt(m){return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},qt(m)}const ao=(0,e.defineComponent)({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup:function(m,M){var R=(0,e.inject)("globalOptions"),U=(0,e.toRefs)(m),fe=U.adjustSubMenuPosition,he=U.maxWidth,ne=U.minWidth,J=typeof fe.value<"u"?fe.value:R.adjustPosition;return function(){return(0,e.h)(ht,G(G({},m),{},{showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:qt(M.slots.default)!==void 0}),M.slots.default?{submenu:function(){return(0,e.h)(Et,{maxWidth:he.value,minWidth:ne.value,adjustPosition:J},{default:M.slots.default})}}:void 0)}}}),io=ao,Cn=io;function lo(m,M,R,U){var fe=(0,e.h)(ge,{options:m,show:!0,container:M,isFullScreenContainer:!R,onClose:function(he){var ne;(0,e.render)(null,M),(ne=m.onClose)===null||ne===void 0||ne.call(m,he)}},U);return(0,e.render)(fe,M),fe.component}function wn(m,M){var R=I(m),U=lo(m,R.container,R.isNew,M);return U.exposed}const Xt={install:function(m){m.config.globalProperties.$contextmenu=wn,m.component("ContextMenu",kn),m.component("ContextMenuItem",ht),m.component("ContextMenuGroup",Cn),m.component("ContextMenuSperator",ue),m.component("ContextMenuSeparator",ue),m.component("ContextSubMenu",Et)},showContextMenu:function(m,M){return wn(m,M)},closeContextMenu:a,transformMenuPosition:v};var uo={key:0,ref:"menuBarContent",class:"mx-menu-bar-content"},co={key:1,ref:"menuBarContent",class:"mx-menu-bar-content"},po=["onClick","onMouseenter"];function fo(m,M,R,U,fe,he){var ne,J=(0,e.resolveComponent)("MenuBarIconMenu");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(["mx-menu-bar",(ne=m.options.theme)!==null&&ne!==void 0?ne:"",m.options.mini?"mini":""]),onFocus:M[1]||(M[1]=function(){return m.onFocus&&m.onFocus.apply(m,arguments)}),onBlur:M[2]||(M[2]=function(){return m.onBlur&&m.onBlur.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"prefix"),m.options.mini?((0,e.openBlock)(),(0,e.createElementBlock)("div",uo,[(0,e.createElementVNode)("div",{class:"mx-menu-bar-item",onClick:M[0]||(M[0]=function(ce){return m.onItemClick(0,null)})},[(0,e.createVNode)(J)])],512)):((0,e.openBlock)(),(0,e.createElementBlock)("div",co,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.menuItems,function(ce,Me){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:Me,class:(0,e.normalizeClass)(["mx-menu-bar-item",ce==m.menuActive?"active":""]),onClick:function(F){return m.onItemClick(Me,ce)},onMouseenter:function(F){return m.onItemEnter(Me,ce)}},(0,e.toDisplayString)(ce.label),43,po)}),128))],512)),(0,e.renderSlot)(m.$slots,"suffix")],34)}var mo={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},vo=(0,e.createElementVNode)("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),go=(0,e.createElementVNode)("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),ho=(0,e.createElementVNode)("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1),yo=[vo,go,ho];function bo(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",mo,yo)}const _o={},xo=(0,ye.Z)(_o,[["render",bo]]),ko=xo,Co=(0,e.defineComponent)({name:"MenuBar",emits:[],props:{options:{type:Object,default:null}},components:{MenuBarIconMenu:ko},setup:function(m){var M=(0,e.ref)(),R=(0,e.ref)(!1),U=(0,e.ref)([]),fe=(0,e.ref)(null);function he(){R.value=!0}function ne(){R.value=!1}(0,e.onMounted)(function(){U.value=m.options.items||[]}),(0,e.watch)(function(){return m.options},function(){U.value=m.options.items||[]});var J=null,ce=-1;function Me(){ce<U.value.length-1?ce++:ce=0,xe(ce,U.value[ce])}function F(){ce>0?ce--:ce=U.value.length-1,xe(ce,U.value[ce])}function xe(Q,re){var Ne;if(ce=Q,re.children){J&&(J.closeMenu(),J=null,R.value=!0),fe.value=re;var Fe=(Ne=M.value)===null||Ne===void 0?void 0:Ne.children[Q];Fe&&(J=Xt.showContextMenu(G(G({},m.options),{},{items:re.children,x:d(Fe),y:u(Fe)+Fe.offsetHeight,onKeyFocusMoveLeft:function(){F()},onKeyFocusMoveRight:function(){Me()},onClose:function(){fe.value==re&&(R.value=!1,fe.value=null)}})))}}function $e(){ce=0;var Q=M.value;Q&&(J=Xt.showContextMenu(G(G({},m.options),{},{x:d(Q),y:u(Q)+Q.offsetHeight})))}function Ve(Q,re){re?(R.value=!0,xe(Q,re),re.onClick&&(re.clickableWhenHasChildren===!0&&re.children&&re.children.length>0||!re.children||re.children.length===0)&&re.onClick()):$e()}function Be(Q,re){R.value&&xe(Q,re)}return{menuItems:U,menuActive:fe,menuBarContent:M,menuBarActive:R,onFocus:he,onBlur:ne,onItemClick:Ve,onItemEnter:Be}}}),wo=(0,ye.Z)(Co,[["render",fo]]),So=wo,Io=Xt,Mo=Io})(),_})())})(Zn);var De=Zn.exports;const xs=B("span",{class:"icon"},"@",-1),ks=me({__name:"index",props:{uid:{},options:{}},setup(p){var i;const s=p,l=(i=kt())==null?void 0:i.userInfo,f=mt(),y=H(()=>(l==null?void 0:l.power)===Un.ADMIN),h=(e,t)=>nt.emit("onSelectPerson",{uid:e,ignoreCheck:t}),_=async()=>{const e=s.uid;e&&await Ye.blockUser({uid:e}).send()},n=async()=>{f.addFriendModalInfo.show=!0,f.addFriendModalInfo.uid=s.uid};return(e,t)=>{const o=rt,r=_t("login-show");return E(),le(k(De.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:X(()=>[Ce((E(),le(k(De.ContextMenuItem),{label:"艾特Ta",onClick:t[0]||(t[0]=a=>h==null?void 0:h(s.uid,!0))},{icon:X(()=>[xs]),_:1})),[[r]]),y.value?(E(),le(k(De.ContextMenuItem),{key:0,label:"拉黑(管理)",onClick:_},{icon:X(()=>[$(o,{icon:"lahei",size:13})]),_:1})):oe("",!0),$(k(De.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:n},{icon:X(()=>[$(o,{icon:"tianjia",size:13})]),_:1})]),_:1},8,["options"])}}});const Cs=me({__name:"index",props:{user:{}},setup(p){var n;const l=dr(p.user),f=Ft((n=l.value)==null?void 0:n.uid),y=D(!1),h=D({x:0,y:0}),_=i=>{if(!kt().isSign)return;const{x:e,y:t}=i;h.value.x=e,h.value.y=t,y.value=!0};return(i,e)=>{var o;const t=hn;return E(),L("li",{class:"user-list-item",tabindex:"0",key:l.value.uid,onContextmenu:e[1]||(e[1]=$t(r=>_(r),["prevent","stop"]))},[$(t,{src:k(f).avatar,size:24,showStatus:"",online:l.value.activeStatus===k(Ho).ONLINE},null,8,["src","online"]),Ue(" "+de(k(f).name)+" ",1),$(ks,{show:y.value,"onUpdate:show":e[0]||(e[0]=r=>y.value=r),options:h.value,uid:(o=l.value)==null?void 0:o.uid},null,8,["show","options","uid"])],32)}}});const ws=vt(Cs,[["__scopeId","data-v-40783a4b"]]),Ss={class:"user-list-box"},Is={class:"user-list-header"},Ms={key:0,class:"list-no-data"},Es=me({__name:"index",setup(p){const s=D(),l=Vn(),f=mt(),y=H(()=>l.userList),h=H(()=>l.countInfo);gt(()=>{let i;At(()=>{i=new IntersectionObserver(async e=>{var t;(t=e==null?void 0:e[0])!=null&&t.isIntersecting&&(await l.loadMore(),s.value&&i.unobserve(s.value),setTimeout(()=>{s.value&&i.observe(s.value)},500))}),s.value&&i.observe(s.value)}),_n(()=>{s.value&&i.unobserve(s.value)})});const _=()=>l.showGroupList=!1,n=()=>{f.createGroupModalInfo.show=!0};return(i,e)=>{var r,a;const t=Hn,o=er;return E(),L("div",Ss,[B("div",{class:ve(["user-list-mask",k(l).showGroupList?"show":""]),onClick:_},null,2),B("div",{class:ve(["user-list-wrapper",k(l).showGroupList?"show":""])},[B("div",Is,[Ue(" 在线人数："+de(h.value.onlineNum||0)+" ",1),[k(dn).LORD,k(dn).ADMIN].includes(h.value.role)?(E(),le(t,{key:0,type:"primary",icon:k(Ko),circle:"",size:"small",onClick:n},null,8,["icon"])):oe("",!0)]),Ce((E(),le(pr,{tag:"ul",name:"fade",class:"user-list"},{default:X(()=>[(E(!0),L(ot,null,Tt(y.value,c=>(E(),le(ws,{key:c.uid,user:c},null,8,["user"]))),128)),B("li",{key:"visible_el",ref_key:"groupListLastElRef",ref:s}," ",512)]),_:1})),[[Xe,(r=y.value)==null?void 0:r.length],[o,k(l).userListOptions.loading,void 0,{lock:!0}]]),((a=y.value)==null?void 0:a.length)===0?(E(),L("div",Ms,"暂无成员~")):oe("",!0)],2)])}}});const Os=vt(Es,[["__scopeId","data-v-eadf7f08"]]),Ts={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},$s=B("path",{fill:"currentColor",d:"M104.704 338.752a64 64 0 0 1 90.496 0l316.8 316.8l316.8-316.8a64 64 0 0 1 90.496 90.496L557.248 791.296a64 64 0 0 1-90.496 0L104.704 429.248a64 64 0 0 1 0-90.496z"},null,-1),Rs=[$s];function Ls(p,s){return E(),L("svg",Ts,Rs)}const js={name:"ep-arrow-down-bold",render:Ls},Bs={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ns=B("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Ps=[Ns];function zs(p,s){return E(),L("svg",Bs,Ps)}const Ds={name:"ep-loading",render:zs};var Fs=Go,As=function(){return Fs.Date.now()},Us=As,Vs=/\s/;function Ws(p){for(var s=p.length;s--&&Vs.test(p.charAt(s)););return s}var Hs=Ws,Ks=Hs,Gs=/^\s+/;function qs(p){return p&&p.slice(0,Ks(p)+1).replace(Gs,"")}var Xs=qs,Ys=qo,Zs=Xo,Js="[object Symbol]";function Qs(p){return typeof p=="symbol"||Zs(p)&&Ys(p)==Js}var ea=Qs,ta=Xs,Nn=gn,na=ea,Pn=0/0,oa=/^[-+]0x[0-9a-f]+$/i,ra=/^0b[01]+$/i,sa=/^0o[0-7]+$/i,aa=parseInt;function ia(p){if(typeof p=="number")return p;if(na(p))return Pn;if(Nn(p)){var s=typeof p.valueOf=="function"?p.valueOf():p;p=Nn(s)?s+"":s}if(typeof p!="string")return p===0?p:+p;p=ta(p);var l=ra.test(p);return l||sa.test(p)?aa(p.slice(2),l?2:8):oa.test(p)?Pn:+p}var la=ia,ua=gn,un=Us,zn=la,ca="Expected a function",da=Math.max,pa=Math.min;function fa(p,s,l){var f,y,h,_,n,i,e=0,t=!1,o=!1,r=!0;if(typeof p!="function")throw new TypeError(ca);s=zn(s)||0,ua(l)&&(t=!!l.leading,o="maxWait"in l,h=o?da(zn(l.maxWait)||0,s):h,r="trailing"in l?!!l.trailing:r);function a(b){var w=f,T=y;return f=y=void 0,e=b,_=p.apply(T,w),_}function c(b){return e=b,n=setTimeout(v,s),t?a(b):_}function u(b){var w=b-i,T=b-e,z=s-w;return o?pa(z,h-T):z}function d(b){var w=b-i,T=b-e;return i===void 0||w>=s||w<0||o&&T>=h}function v(){var b=un();if(d(b))return x(b);n=setTimeout(v,u(b))}function x(b){return n=void 0,r&&f?a(b):(f=y=void 0,_)}function g(){n!==void 0&&clearTimeout(n),e=0,f=i=y=n=void 0}function S(){return n===void 0?_:x(un())}function I(){var b=un(),w=d(b);if(f=arguments,y=this,i=b,w){if(n===void 0)return c(i);if(o)return clearTimeout(n),n=setTimeout(v,s),a(i)}return n===void 0&&(n=setTimeout(v,s)),_}return I.cancel=g,I.flush=S,I}var ma=fa,va=ma,ga=gn,ha="Expected a function";function ya(p,s,l){var f=!0,y=!0;if(typeof p!="function")throw new TypeError(ha);return ga(l)&&(f="leading"in l?!!l.leading:f,y="trailing"in l?!!l.trailing:y),va(p,s,{leading:f,maxWait:s,trailing:y})}var ba=ya;const Jn=wr(ba);class _a{constructor(s,l){an(this,"sizes",new Map);an(this,"offset");this.init(s,l)}init(s,l){this.param=s,this.callUpdate=l,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.lastCalcIndex=0,this.fixedSizeValue=0,this.calcType="INIT",this.offset=0,this.direction="",this.range=Object.create(null),s&&this.checkRange(0,s.keeps-1)}destroy(){this.init(null,null)}getRange(){const s=Object.create(null);return s.start=this.range.start,s.end=this.range.end,s.padFront=this.range.padFront,s.padBehind=this.range.padBehind,s}isBehind(){return this.direction==="BEHIND"}isFront(){return this.direction==="FRONT"}getOffset(s){return(s<1?0:this.getIndexOffset(s))+this.param.slotHeaderSize}updateParam(s,l){this.param&&s in this.param&&(s==="uniqueIds"&&this.sizes.forEach((f,y)=>{l.includes(y)||this.sizes.delete(y)}),this.param[s]=l)}saveSize(s,l){this.sizes.set(s,l),this.calcType==="INIT"?(this.fixedSizeValue=l,this.calcType="FIXED"):this.calcType==="FIXED"&&this.fixedSizeValue!==l&&(this.calcType="DYNAMIC",delete this.fixedSizeValue),this.calcType!=="FIXED"&&typeof this.firstRangeTotalSize<"u"&&(this.sizes.size<Math.min(this.param.keeps,this.param.uniqueIds.length)?(this.firstRangeTotalSize=[...this.sizes.values()].reduce((f,y)=>f+y,0),this.firstRangeAverageSize=Math.round(this.firstRangeTotalSize/this.sizes.size)):delete this.firstRangeTotalSize)}handleDataSourcesChange(){let s=this.range.start;this.isFront()?s=s-2:this.isBehind()&&(s=s+2),s=Math.max(s,0),this.updateRange(this.range.start,this.getEndByStart(s))}handleSlotSizeChange(){this.handleDataSourcesChange()}handleScroll(s){this.direction=s<this.offset?"FRONT":"BEHIND",this.offset=s,this.param&&(this.direction==="FRONT"?this.handleFront():this.direction==="BEHIND"&&this.handleBehind())}handleFront(){const s=this.getScrollOvers();if(s>this.range.start)return;const l=Math.max(s-this.param.buffer,0);this.checkRange(l,this.getEndByStart(l))}handleBehind(){const s=this.getScrollOvers();s<this.range.start+this.param.buffer||this.checkRange(s,this.getEndByStart(s))}getScrollOvers(){const s=this.offset-this.param.slotHeaderSize;if(s<=0)return 0;if(this.isFixedType())return Math.floor(s/this.fixedSizeValue);let l=0,f=0,y=0,h=this.param.uniqueIds.length;for(;l<=h;){if(f=l+Math.floor((h-l)/2),y=this.getIndexOffset(f),y===s)return f;y<s?l=f+1:y>s&&(h=f-1)}return l>0?--l:0}getIndexOffset(s){if(!s)return 0;let l=0,f=0;for(let y=0;y<s;y++)f=this.sizes.get(this.param.uniqueIds[y]),l=l+(typeof f=="number"?f:this.getEstimateSize());return this.lastCalcIndex=Math.max(this.lastCalcIndex,s-1),this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex()),l}isFixedType(){return this.calcType==="FIXED"}getLastIndex(){return this.param.uniqueIds.length-1}checkRange(s,l){const f=this.param.keeps;this.param.uniqueIds.length<=f?(s=0,l=this.getLastIndex()):l-s<f-1&&(s=l-f+1),this.range.start!==s&&this.updateRange(s,l)}updateRange(s,l){this.range.start=s,this.range.end=l,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}getEndByStart(s){const l=s+this.param.keeps-1;return Math.min(l,this.getLastIndex())}getPadFront(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}getPadBehind(){const s=this.range.end,l=this.getLastIndex();return this.isFixedType()?(l-s)*this.fixedSizeValue:this.lastCalcIndex===l?this.getIndexOffset(l)-this.getIndexOffset(s):(l-s)*this.getEstimateSize()}getEstimateSize(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}const xa=me({name:"VirtualListItem",props:{index:{type:Number},source:{type:Object},component:{type:[Object,Function]},uniqueKey:{type:[String,Number]},itemProps:{type:Object,default:()=>{}},dataPropName:{type:String,default:"source"}},emits:["itemResize"],setup(p,{emit:s}){const l=D(null);let f=null;const y=()=>{const{uniqueKey:h}=p,_=l.value?l.value.offsetHeight:0;s("itemResize",h,_)};return gt(()=>{typeof ResizeObserver<"u"&&(f=new ResizeObserver(()=>{y()}),l.value&&f.observe(l.value))}),fr(()=>{y()}),_n(()=>{f&&(f.disconnect(),f=null)}),()=>{const{component:h,index:_,source:n,uniqueKey:i,itemProps:e,dataPropName:t}=p,o={...e,index:_,[t]:n};return $("div",yn({key:i,ref:l},{index:_}),[$(h,o,null)])}}}),Qn=me({name:"VirtualList",props:{data:{type:Array,required:!0,default:()=>[]},dataKey:{type:[String,Function],required:!0},item:{type:[Object,Function],required:!0},keeps:{type:Number,default:30},size:{type:Number,default:50},start:{type:Number,default:0},offset:{type:Number,default:0},topThreshold:{type:Number,default:0},bottomThreshold:{type:Number,default:0},itemProps:{type:Object},dataPropName:{type:String,default:"source"}},setup(p,{emit:s,expose:l}){const f=D(null),y=D(),h=D(null);let _;lt(()=>p.data.length,()=>{_.updateParam("uniqueIds",a()),_.handleDataSourcesChange()}),lt(()=>p.keeps,b=>{_.updateParam("keeps",b),_.handleSlotSizeChange()}),lt(()=>p.start,b=>{d(b)}),lt(()=>p.offset,b=>v(b));const n=b=>_.sizes.get(b),i=()=>y.value?Math.ceil(y.value.scrollTop):0,e=()=>{const b="clientHeight";return y.value?Math.ceil(y.value[b]):0},t=()=>{const b="scrollHeight";return y.value?Math.ceil(y.value[b]):0},o=(b,w,T)=>{s("scroll",{offset:b,clientSize:w,scrollSize:T}),_.isFront()&&p.data.length&&b-p.topThreshold<=0?s("totop"):_.isBehind()&&b+w+p.bottomThreshold>=T&&s("tobottom")},r=()=>{const b=i(),w=e(),T=t();b<0||b+w>T+1||!T||(_.handleScroll(b),o(b,w,T))},a=()=>{const{dataKey:b,data:w=[]}=p;return w.map(T=>typeof b=="function"?b(T):T[b])},c=b=>{f.value=b},u=()=>{_=new _a({slotHeaderSize:0,slotFooterSize:0,keeps:p.keeps,estimateSize:p.size,buffer:Math.round(p.keeps/3),uniqueIds:a()},c),f.value=_.getRange()},d=(b,w,T=0)=>{if(b>=p.data.length-1)S();else{const z=_.getOffset(b)-T;v(z,w)}},v=(b,w=!1)=>{y.value&&y.value.scroll({left:0,top:b,behavior:w?"smooth":"auto"})},x=()=>{const b=[],{start:w,end:T}=f.value,{data:z,dataKey:G,item:A,itemProps:Z,dataPropName:V}=p;for(let te=w;te<=T;te++){const ie=z[te];if(ie){const O=typeof G=="function"?G(ie):ie[G];(typeof O=="string"||typeof O=="number")&&b.push($(xa,{index:te,uniqueKey:O,source:ie,component:A,itemProps:Z,dataPropName:V,onItemResize:g},null))}}return b},g=(b,w)=>{_.saveSize(b,w),s("resized",b,w)},S=b=>{if(h.value){const w=h.value.offsetTop;v(w,b),setTimeout(()=>{i()+e()<t()&&S(b)},3)}},I=()=>_.sizes.size;return mr(()=>{u()}),vr(()=>{v(_.offset)}),gt(()=>{p.start?d(p.start):p.offset&&v(p.offset),s("ok")}),_n(()=>{_.destroy()}),l({scrollToBottom:S,getSizes:I,getSize:n,getOffset:i,getScrollSize:t,getClientSize:e,scrollToOffset:v,scrollToIndex:d}),()=>{const{padFront:b,padBehind:w}=f.value;return $("div",{ref:y,onScroll:r},[$("div",{style:{padding:`${b}px 0px ${w}px`}},[x()]),$("div",{ref:h,style:{width:"100%",height:"0px"}},null)])}}}),ka=p=>{if(p===0||!p)return"0 B";const s=["B","KB","MB","GB","TB"],l=1024,f=Math.floor(Math.log(p)/Math.log(l));return parseFloat((p/Math.pow(l,f)).toFixed(2))+" "+s[f]},eo=(p,s,l={maxWidth:200,maxHeight:150})=>{const{maxWidth:f,maxHeight:y}=l;return p<f&&s<y?s:p>s?f/p*s:(p===s||p<s,y)},Ca={jpg:"jpg",jpeg:"jpg",png:"jpg",webp:"jpg",mp4:"mp4",mov:"mp4",avi:"mp4",rmvb:"mp4",doc:"doc",docx:"doc",mp3:"mp3",wav:"mp3",aac:"mp3",flac:"mp3",pdf:"pdf",ppt:"ppt",pptx:"ppt",xls:"xls",xlsx:"xls",zip:"zip",rar:"zip","7z":"zip",txt:"txt",log:"log",svg:"svg",sketch:"sketch",exe:"exe",md:"md"},wa=p=>{if(!p)return"other";const s=p.toLowerCase().split(".").pop();return s&&Ca[s]||"other"},Dn=(p,s,l)=>{const{size:f,width:y,height:h,downloadUrl:_,name:n,second:i,tempUrl:e,thumbWidth:t,thumbHeight:o,thumbUrl:r,thumbSize:a}=p,u={size:f,url:l?e:_};let d={};return s===ee.IMAGE?d={...u,width:y,height:h}:s===ee.VOICE?d={...u,second:i}:s===ee.VIDEO?d={...u,thumbWidth:t,thumbHeight:o,thumbUrl:r,thumbSize:a}:s===ee.FILE&&(d={...u,fileName:n,url:_}),{body:d,type:s}},Sa=async p=>await(await fetch(p)).blob(),Ia=async(p,s)=>{const l=await Sa(p),f=l.type,y=s||Date.now()+"_emoji.png";return new File([l],y,{type:f})},Ma=["src"],Ea=me({__name:"image",props:{body:{}},setup(p){const s=p,l=tr(),f=D(!1),y=D(!0),h=H(()=>{const{width:i,height:e}=s.body;return eo(i,e)}),_=()=>{const{width:i,height:e}=s.body;return`width: ${h.value/e*i}px`},n=()=>{y.value=!1,f.value=!0};return(i,e)=>{var o,r;const t=rt;return E(),L("div",{class:"image",style:tt({height:h.value+"px"}),onClick:e[1]||(e[1]=a=>{var c;return k(l).show((c=i.body)==null?void 0:c.url)})},[f.value?(E(),L("div",{key:0,class:"image-slot",style:tt(_())},[$(t,{icon:"dazed",size:36,colorful:""}),Ue(" 加载失败 ")],4)):(E(),L(ot,{key:1},[(o=i.body)!=null&&o.url?(E(),L("img",{key:0,src:(r=i.body)==null?void 0:r.url,onClick:e[0]||(e[0]=a=>{var c;return k(l).show((c=i.body)==null?void 0:c.url)}),onError:n},null,40,Ma)):oe("",!0)],64))],4)}}}),Oa={class:"saying"},Ta={class:"num"},$a=me({__name:"voice",props:{body:{}},setup(p){const s=p,l=nr(),f=H(()=>l.previewUrl===s.body.url&&l.isPlaying);return(y,h)=>{var n;const _=rt;return E(),L("div",{class:"voice",onClick:h[0]||(h[0]=i=>k(l).open(y.body.url))},[B("div",Oa,[B("span",{class:ve(["shelter",{play:f.value}])},null,2),$(_,{icon:"saying",size:18})]),B("span",Ta,de((n=y.body)==null?void 0:n.second)+'"',1)])}}});const Ra=()=>{const p=D(0),s=D(!1),{on:l,trigger:f}=yt(),y=n=>{const i=new URL(n).pathname,e=i.lastIndexOf(".");return e===-1?"":i.slice(e+1)},h=n=>{const i=new URL(n).pathname,e=i.lastIndexOf("/");return e===-1?"未知文件":i.slice(e+1)};return{onLoaded:l,downloadFile:(n,i,e)=>{s.value=!0;const t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="blob",t.onprogress=o=>{if(o.lengthComputable){const r=Math.floor(o.loaded/o.total*100);p.value=r}},t.onload=()=>{if(t.status===200){const o=new Blob([t.response],{type:"application/octet-stream"}),r=document.createElement("a");r.href=URL.createObjectURL(o);const a=y(n),c=e||a;if(i)r.download=`${i}${c?".":""}${c}`;else{const u=h(n);r.download=u}r.click(),URL.revokeObjectURL(r.href),f("success")}else f("fail");p.value=0,s.value=!1},t.send()},process:p,isDownloading:s}},La=Gn("downloadQuenu",()=>{const s=Rt([]),l=Rt(new Map),f=e=>{s.push(e)},y=e=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},h=()=>{if(!s.length||l.size>=1)return;const e=s.shift();e&&_(e)},_=e=>{const{downloadFile:t,isDownloading:o,process:r,onLoaded:a}=Ra(),c=lt(r,()=>{l.set(e,{url:e,isDownloading:o.value,process:r.value})});a(()=>{c(),l.delete(e),h()}),e&&t(e)};return{quenu:s,addQuenuAction:f,removeQuenuAction:y,dequeue:h,downloadObjMap:l,download:e=>{f(e),h()},cancelDownload:e=>{s.includes(e)&&y(e)}}}),ja={class:"file"},Ba={class:"file-desc"},Na={class:"file-name"},Pa={class:"file-size"},za=me({__name:"file",props:{body:{}},setup(p){const s=p,{downloadObjMap:l,download:f,quenu:y,cancelDownload:h}=La(),_=()=>{f(s.body.url)},n=()=>{h(s.body.url)},i=H(()=>{var o;return((o=l.get(s.body.url))==null?void 0:o.isDownloading)||!1}),e=H(()=>{var o;return((o=l.get(s.body.url))==null?void 0:o.process)||0}),t=H(()=>y.includes(s.body.url));return(o,r)=>{var v,x,g;const a=rt,c=It,u=os,d=Jr;return E(),L("div",ja,[$(a,{icon:k(wa)((v=o.body)==null?void 0:v.fileName),size:32,colorful:""},null,8,["icon"]),B("div",Ba,[B("span",Na,de(((x=o.body)==null?void 0:x.fileName)||"未知文件"),1),B("span",Pa,de(k(ka)((g=o.body)==null?void 0:g.size)),1)]),t.value?(E(),le(u,{key:0,class:"mx-1",size:"small",type:"warning",onClick:n},{default:X(()=>[Ue("等待下载 "),$(c,null,{default:X(()=>[$(k(Fn))]),_:1})]),_:1})):i.value?(E(),le(d,{key:2,type:"circle",percentage:e.value,width:22,"stroke-width":1,"show-text":!1},null,8,["percentage"])):(E(),le(a,{key:1,icon:"xiazai",size:22,onClick:_}))])}}}),Da=["src"],Fa=me({__name:"video",props:{body:{}},setup(p){const s=p,l=or(),f=()=>{const y=s.body.thumbWidth||0,h=s.body.thumbHeight||0;return eo(y,h)};return(y,h)=>{const _=rt;return E(),L("div",{class:"video",style:tt(`height:${f()}px`),onClick:h[0]||(h[0]=n=>{var i;return k(l).open((i=y.body)==null?void 0:i.url)})},[$(_,{icon:"bofang",size:30}),B("img",{src:y.body.thumbUrl},null,8,Da)],4)}}}),Aa={class:"text"},Ua=["onClick"],Va={key:0,class:"text-card-image-wrapper"},Wa=["src"],Ha={class:"text-card-link-content"},Ka={class:"text-card-title ellipsis-1"},Ga={class:"text-card-desc ellipsis-2"},qa=me({__name:"text",props:{body:{}},setup(p){const s=p,l=s.body.urlContentMap||{},f=Object.keys(l),y=H(()=>{let n=s.body.content||"";n=n.replace(/&nbsp;/g," ");const i=new RegExp(`(@\\S+\\s|${f.join("|")}|\\S+\\s)`,"g");return n.split(i)}),h=n=>{n&&window.open(n.startsWith("http")?n:"//"+n,"_blank")};function _(n){const i=n.target;i&&(i.style.opacity="0")}return(n,i)=>(E(),L("div",Aa,[(E(!0),L(ot,null,Tt(y.value,(e,t)=>(E(),L(ot,null,[e.startsWith("@")&&e.trim()!==""&&e.trim()!=="@"?(E(),L("span",{key:e,class:"text-mention"},de(e),1)):(E(),L(ot,{key:1},[Ue(de(e),1)],64)),k(f).includes(e)?(E(),L("div",{key:e+t,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-card",onClick:o=>h(e.trim())},[k(l)[e].image?(E(),L("div",Va,[B("img",{class:"text-card-image",src:k(l)[e].image,onError:_},null,40,Wa)])):oe("",!0),B("div",Ha,[B("span",Ka,de(k(l)[e].title),1),B("span",Ga,de(k(l)[e].description),1)])],8,Ua)):oe("",!0)],64))),256))]))}}),Xa={class:"image emoji"},Ya={key:0,class:"image-slot"},Za=["src"],Ja=me({__name:"emoji",props:{body:{}},setup(p){const s=D(!1),l=D(!0),f=()=>{l.value=!1,s.value=!0};return(y,h)=>{var n,i;const _=rt;return E(),L("div",Xa,[s.value?(E(),L("div",Ya,[$(_,{icon:"dazed",size:36,colorful:""}),Ue(" 加载失败 ")])):(E(),L(ot,{key:1},[(n=y.body)!=null&&n.url?(E(),L("img",{key:0,src:(i=y.body)==null?void 0:i.url,onError:f},null,40,Za)):oe("",!0)],64))])}}}),Qa=me({__name:"index",props:{message:{}},setup(p){const s={[ee.UNKNOWN]:"",[ee.TEXT]:qa,[ee.RECALL]:"",[ee.SYSTEM]:"",[ee.IMAGE]:Ea,[ee.VOICE]:$a,[ee.FILE]:za,[ee.VIDEO]:Fa,[ee.EMOJI]:Ja};return(l,f)=>(E(),le(bn(s[l.message.type]),{body:l.message.body},null,8,["body"]))}}),ei={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ti=B("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),ni=[ti];function oi(p,s){return E(),L("svg",ei,ni)}const ri={name:"ep-check",render:oi},to=p=>{const s=H(()=>p.messageMark.userLike===pt.YES),l=H(()=>p.messageMark.userDislike===pt.YES),f=H(()=>p.messageMark.likeCount),y=H(()=>p.messageMark.dislikeCount);return{isLike:s,isDisLike:l,likeCount:f,dislikeCount:y,onLike:async()=>{const n=s.value?wt.Cancel:wt.Confirm;await Ye.markMsg({actType:n,markType:$n.LIKE,msgId:p.id}).send();const{likeCount:i}=p.messageMark,e=n===wt.Confirm;p.messageMark.userLike=e?pt.YES:pt.NO,p.messageMark.likeCount=e?i+1:i-1,l.value&&(p.messageMark.userDislike=pt.NO,p.messageMark.dislikeCount=y.value-1)},onDisLike:async()=>{const n=l.value?wt.Cancel:wt.Confirm;await Ye.markMsg({actType:n,markType:$n.DISLIKE,msgId:p.id}).send();const{dislikeCount:i}=p.messageMark,e=n===wt.Confirm;p.messageMark.userDislike=e?pt.YES:pt.NO,p.messageMark.dislikeCount=e?i+1:i-1,s.value&&(p.messageMark.userLike=pt.NO,p.messageMark.likeCount=f.value-1)}}},si={key:0,class:"msg-option"},ai={class:"msg-option-item",title:"回复"},ii={class:"msg-option-item",title:"点赞"},li={class:"msg-option-item",title:"不喜欢"},ui=me({__name:"index",props:{msg:{}},setup(p){const s=p,l=xt(),{isLike:f,isDisLike:y,onLike:h,onDisLike:_}=to(s.msg.message),n=async i=>{i&&(l.currentMsgReply=i,nt.emit("focusMsgInput"))};return(i,e)=>{const t=rt,o=_t("login");return i.msg.loading?oe("",!0):(E(),L("div",si,[B("span",ai,[Ce($(t,{icon:"reply",size:14},null,512),[[o,()=>n(i.msg)]])]),B("span",ii,[Ce($(t,{icon:"like",size:14,class:ve([{"like-active":k(f)}])},null,8,["class"]),[[o,()=>k(h)()]])]),B("span",li,[Ce($(t,{icon:"dislike",size:15,class:ve([{"dislike-active":k(y)}])},null,8,["class"]),[[o,()=>k(_)()]])])]))}}});const ci=vt(ui,[["__scopeId","data-v-80260998"]]),di=p=>new Promise((s,l)=>{try{const f=document.createElement("textarea");f.setAttribute("readonly","readonly"),f.value=p,f.style.zIndex="-1",document.body.appendChild(f),f.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(f),s(p)}catch(f){l(f)}}),pi=p=>{const s=document.createElement("canvas"),l=s.getContext("2d"),f=new Image;f.crossOrigin="Anonymous",f.src=p,f.onload=()=>{l&&(s.width=f.width,s.height=f.height,l.clearRect(0,0,l.canvas.width,l.canvas.height),l.drawImage(f,0,0),s.toBlob(async y=>{if(!y)return;const h=[new ClipboardItem({[y.type]:y})];try{await navigator.clipboard.write(h)}catch{}finally{s.remove()}}))}},xn=Gn("emoji",()=>{const p=D(!1),s=kt(),l=D([]),f=async()=>{p.value=!0;const _=await Ye.getEmoji({uid:s.userInfo.uid}).send().catch(()=>{p.value=!1});_&&(l.value=_)},y=async _=>{const{uid:n}=s.userInfo;!n||!_||(await Ye.addEmoji({uid:n,expressionUrl:_}).send(),ft.success("添加成功"),await f())},h=async _=>{_&&(await Ye.deleteEmoji({id:_}).send(),await f())};return f(),{emojiList:l,addEmoji:y,getEmojiList:f,deleteEmoji:h}}),no=()=>{const p=D(!1),s=D(0),l=xn(),f=yt(),y=yt(),h=yt(),_=async(e,t)=>(p.value=!0,new Promise((o,r)=>{const a=new XMLHttpRequest;a.open("PUT",e,!0),a.setRequestHeader("Content-Type",t.type),a.upload.onprogress=c=>{s.value=Math.round(c.loaded/c.total*100)},a.onload=()=>{p.value=!1,a.status===200?(y.trigger(t),o(!0)):(h.trigger(t),r(!1))},a.onerror=()=>{h.trigger(t),r(!1)},a.send(t)})),n=async e=>new Promise(r=>{if(e.type==="image/gif"){r(e);return}const a=new Image,c=URL.createObjectURL(e);a.src=c,a.onload=()=>{const{height:u,width:d}=a;let v,x;d>u?(v=240,x=Math.round(u/d*240)):(x=240,v=Math.round(d/u*240));const g=document.createElement("canvas"),S=g.getContext("2d");g.height=240,g.width=240,S&&(S.clearRect(0,0,240,240),S.fillStyle="rgba(0, 0, 0, 0)",S.fillRect(0,0,240,240),S.drawImage(a,0,0,d,u,(240-v)/2,(240-x)/2,v,x),g.toBlob(I=>{if(!I)return;const b=Date.now()+"_emoji.png",w=new File([I],b,{type:"image/png"});r(w),URL.revokeObjectURL(c)},"image/png",.9))},a.onerror=()=>{URL.revokeObjectURL(c)}}),i=async e=>{const t=await n(e);if(!t)return;const{downloadUrl:o,uploadUrl:r}=await Ye.getUploadUrl({fileName:t.name,scene:"2"}).send();r&&o&&(f.trigger({file:e,downloadUrl:o}),_(r,t).then(a=>{a&&l.addEmoji(o)}))};return{isEmojiUp:p,onStart:f.on,onFail:h.on,onSuccess:y.on,uploadEmoji:i}},fi=me({__name:"index",props:{msg:{},options:{}},setup(p){var c;const s=p,l=xn(),{uploadEmoji:f}=no(),y=(c=kt())==null?void 0:c.userInfo,h=xt(),_=H(()=>{var u;return((u=s.msg)==null?void 0:u.fromUser.uid)===y.uid}),n=H(()=>(y==null?void 0:y.power)===Un.ADMIN),i=async()=>{const{id:u}=s.msg.message;u&&(await Ye.recallMsg({roomId:1,msgId:u}).send(),h.updateRecallStatus({msgId:u}))},e=async()=>{const{uid:u}=s.msg.fromUser;u&&await Ye.blockUser({uid:u}).send()},t=()=>{var d;const u=s.msg.message;if(u.type===ee.TEXT){const v=(d=u.body)==null?void 0:d.content;di(v),ft.success("复制成功~")}u.type===ee.IMAGE&&(pi(u.body.url),ft.success("复制成功~"))},o=()=>{const{body:u}=s.msg.message,d=u==null?void 0:u.url;if(!d)return;const v=new XMLHttpRequest;v.open("GET",d,!0),v.responseType="blob",v.onreadystatechange=()=>{if(v.status!=200)return ft.error("下载失败~");if(v.readyState===4&&v.status===200){const x=v.response;let g=document.createElement("a");g.href=URL.createObjectURL(x),g.download=u.fileName||"未知文件",g.dispatchEvent(new MouseEvent("click")),g.remove()}},v.send()},r=()=>{const{type:u,body:d}=s.msg.message;u===ee.EMOJI?l.addEmoji(d.url):Ia(d.url).then(v=>{f(v)})},a=()=>h.deleteMsg(s.msg.message.id);return(u,d)=>{const v=rt,x=_t("login-show");return E(),le(k(De.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:X(()=>[u.msg.message.type===k(ee).TEXT||u.msg.message.type===k(ee).IMAGE?(E(),le(k(De.ContextMenuItem),{key:0,label:"复制",onClick:t},{icon:X(()=>[$(v,{icon:"copy",size:13})]),_:1})):oe("",!0),(u.msg.message.type===k(ee).EMOJI||u.msg.message.type===k(ee).IMAGE)&&!_.value&&k(l).emojiList.length<50?(E(),le(k(De.ContextMenuItem),{key:1,label:"添加到表情",onClick:r},{icon:X(()=>[$(v,{icon:"aixin",size:13})]),_:1})):oe("",!0),(_.value||n.value)&&!u.msg.loading?(E(),le(k(De.ContextMenuItem),{key:2,label:"撤回消息",onClick:i},{icon:X(()=>[$(v,{icon:"chehui",size:14})]),_:1})):oe("",!0),(u.msg.message.type===k(ee).FILE||u.msg.message.type===k(ee).IMAGE)&&!u.msg.loading?(E(),le(k(De.ContextMenuItem),{key:3,label:"下载",onClick:o},{icon:X(()=>[$(v,{icon:"xiazai",size:15})]),_:1})):oe("",!0),Ce($(k(De.ContextMenuSeparator),null,null,512),[[x]]),Ce((E(),le(k(De.ContextMenuItem),{label:"删除",onClick:a},{icon:X(()=>[$(v,{icon:"shanchu",size:13})]),_:1})),[[x]]),n.value?(E(),le(k(De.ContextMenuItem),{key:4,label:"拉黑(管理)",onClick:e},{icon:X(()=>[$(v,{icon:"lahei",size:13})]),_:1})):oe("",!0)]),_:1},8,["options"])}}});const mi=B("span",{class:"icon"},"@",-1),vi=me({__name:"index",props:{uid:{},options:{}},setup(p){const s=p,l=mt(),f=async()=>{l.addFriendModalInfo.show=!0,l.addFriendModalInfo.uid=s.uid},y=(h,_)=>nt.emit("onSelectPerson",{uid:h,ignoreCheck:_});return(h,_)=>{const n=rt,i=_t("login-show"),e=_t("friends");return E(),le(k(De.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:X(()=>[Ce((E(),le(k(De.ContextMenuItem),{label:"艾特Ta",onClick:_[0]||(_[0]=t=>y==null?void 0:y(s.uid,!0))},{icon:X(()=>[mi]),_:1})),[[i]]),Ce((E(),le(k(De.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:f},{icon:X(()=>[$(n,{icon:"tianjia",size:13})]),_:1})),[[e,h.uid]])]),_:1},8,["options"])}}});const gi={key:0,class:"send-time-block"},hi={key:1,class:"send-time-block"},yi={class:"chat-item-user-info"},bi=["src"],_i={class:"user-ip"},xi={key:0,class:"send-time"},ki={key:0,class:"chat-item-read-count-text"},Ci={class:"ellipsis"},wi={key:1,class:"extra"},Si={key:0,class:"extra"},Ii=me({inheritAttrs:!1,__name:"index",props:{msg:{},isShowTime:{type:Boolean,default:!0},isShowTimeBlock:{type:Boolean,default:!0},bubbleMode:{default:"spread"},tooltipTrigger:{default:()=>"hover"}},setup(p){const s=p,{message:l,fromUser:f}=qn(s.msg),y=kt(),h=xt(),_=mt(),n=Ft(f.value.uid),i=H(()=>{var O;return(O=n==null?void 0:n.value)==null?void 0:O.wearingItemId}),e=lr(i),t=H(()=>{var O;return((O=s.msg)==null?void 0:O.fromUser.uid)===(y==null?void 0:y.userInfo.uid)}),o=H(()=>({"chat-item":!0,"is-me":t.value,right:t.value&&s.bubbleMode==="spread"||s.bubbleMode==="right"})),r=D(null),a=D(null),c=D(),u=Rt({read:0,unread:null}),d=Dt("virtualListRef"),v=D(!1),x=D(!1),g=D({x:0,y:0}),{isLike:S,isDisLike:I,likeCount:b,dislikeCount:w,onLike:T,onDisLike:z}=to(s.msg.message),G=H(()=>[ee.RECALL,ee.SYSTEM].includes(l.value.type)),A=async O=>{var q,se;const{id:P}=O,{reply:C}=O.body;if(!C||!C.canCallback)return;const j=h.getMsgIndex(C.id);if(j>-1)(q=d==null?void 0:d.value)==null||q.scrollToIndex(j,!0,12);else{const K=h.getMsgIndex(P),ae=Math.ceil((C.gapCount-K+1)/Rn)*Rn;await h.loadMore(ae),setTimeout((se=d==null?void 0:d.value)==null?void 0:se.scrollToIndex(h.getMsgIndex(C.id),!1,12),0)}},Z=O=>{if(!y.isSign)return;const{x:P,y:C}=O;g.value.x=P,g.value.y=C,v.value=!0},V=O=>{if(!y.isSign)return;const{x:P,y:C}=O;g.value.x=P,g.value.y=C,x.value=!0},te=D(null);gt(()=>{if(At(()=>{if(r.value&&a.value){const O=r.value.clientWidth,P=a.value.clientWidth;O+150<=P?c.value="right-start":s.msg.message.body.reply?c.value="top-end":c.value="bottom-end"}}),t.value){const O=gr(te);lt(O,P=>{P?nt.emit("onAddReadCountTask",{msgId:s.msg.message.id}):nt.emit("onRemoveReadCountTask",{msgId:s.msg.message.id})})}nt.on("onGetReadCount",O=>{const P=O.get(s.msg.message.id);P&&(u.read=P.readCount,u.unread=P.unReadCount)})});const ie=O=>{u.unread!==0&&(_.currentReadUnreadList.msgId=O,_.currentReadUnreadList.show=!0)};return(O,P)=>{const C=hn,j=Wn,q=ri,se=It,K=rt,ae=Qa,ye=jn("IconLike"),Oe=jn("IconDislike"),je=_t("login");return E(),L(ot,null,[O.isShowTimeBlock&&O.msg.timeBlock?(E(),L("span",gi,de(O.msg.timeBlock),1)):oe("",!0),G.value?(E(),L("span",hi,de(k(l).body),1)):oe("",!0),$(ct,{name:"remove"},{default:X(()=>{var we,Ze;return[G.value?oe("",!0):(E(),L("div",{key:0,ref_key:"msgVisibleEl",ref:te,class:ve(o.value)},[$(C,{src:k(n).avatar},null,8,["src"]),B("div",{class:"chat-item-box",ref_key:"boxRef",ref:a},[B("div",yi,[$(j,{effect:"dark",content:(we=k(e))==null?void 0:we.describe,placement:t.value?"top-end":"top-start",teleported:!1},{default:X(()=>{var be,Se;return[Ce(B("img",{class:"user-badge",src:(be=k(e))==null?void 0:be.img},null,8,bi),[[Xe,(Se=k(e))==null?void 0:Se.img]])]}),_:1},8,["content","placement"]),B("span",{class:"user-name",onContextmenu:P[0]||(P[0]=$t(be=>V(be),["prevent","stop"]))},de(k(n).name),33),B("span",_i,"("+de(k(n).locPlace||"未知")+")",1),O.isShowTime?(E(),L("span",xi,de(k(An)(O.msg.message.sendTime)),1)):oe("",!0)]),$(j,{effect:"light","popper-class":"option-tooltip",trigger:O.tooltipTrigger,placement:c.value||"bottom-end",offset:2,"show-arrow":!1,teleported:!1},{content:X(()=>[$(ci,{msg:O.msg},null,8,["msg"])]),default:X(()=>{var be,Se;return[B("div",{ref_key:"renderMsgRef",ref:r,class:ve(["chat-item-content",{uploading:(be=O.msg)==null?void 0:be.loading}]),onContextmenu:P[2]||(P[2]=$t(Ie=>Z(Ie),["prevent","stop"]))},[t.value?(E(),L("div",{key:0,onClick:P[1]||(P[1]=Ie=>ie(O.msg.message.id)),class:ve(["chat-item-read-count",{"is-gray":u.unread===0}])},[u.unread!==0?(E(),L("span",ki,de(u.read),1)):(E(),le(se,{key:1},{default:X(()=>[$(q)]),_:1}))],2)):oe("",!0),(Se=O.msg)!=null&&Se.loading?(E(),le(K,{key:1,icon:"loading",size:20,spin:""})):oe("",!0),$(ae,{message:k(l)},null,8,["message"])],34)]}),_:1},8,["trigger","placement"]),(Ze=k(l).body)!=null&&Ze.reply?(E(),L("div",{key:0,class:ve(["chat-item-reply",{pointer:k(l).body.reply.canCallback}]),onClick:P[3]||(P[3]=be=>A(k(l)))},[k(l).body.reply.canCallback?(E(),le(K,{key:0,icon:"totop",size:12})):oe("",!0),B("span",Ci,de(k(l).body.reply.username)+": "+de(k(l).body.reply.body),1)],2)):oe("",!0),k(b)+k(w)>0?(E(),L("div",wi,[$(ct,{name:"fade"},{default:X(()=>[k(b)>0?Ce((E(),L("span",{key:0,class:ve(["extra-item like",{active:k(S)}])},[$(K,{icon:"like"}),$(ct,{name:"count-up",mode:"out-in"},{default:X(()=>[(E(),L("span",{class:"count",key:k(b)},de(k(b)),1))]),_:1})],2)),[[je,k(T)]]):oe("",!0)]),_:1}),$(ct,{name:"fade"},{default:X(()=>[k(w)>0?Ce((E(),L("span",{key:0,class:ve(["extra-item dlike",{active:k(I)}])},[$(K,{icon:"dislike",size:17}),$(ct,{name:"count-up",mode:"out-in"},{default:X(()=>[(E(),L("span",{class:"count",key:k(w)},de(k(w)),1))]),_:1})],2)),[[je,k(z)]]):oe("",!0)]),_:1})])):oe("",!0)],512),k(b)+k(w)>0?(E(),L("div",Si,[$(ct,{name:"fade"},{default:X(()=>[k(b)>0?(E(),L("span",{key:0,class:ve(["extra-item like",{active:k(S)}]),onClick:P[4]||(P[4]=(...be)=>k(T)&&k(T)(...be))},[$(ye),$(ct,{name:"count-up",mode:"out-in"},{default:X(()=>[(E(),L("span",{class:"count",key:k(b)},de(k(b)),1))]),_:1})],2)):oe("",!0)]),_:1}),$(ct,{name:"fade"},{default:X(()=>[k(w)>0?(E(),L("span",{key:0,class:ve(["extra-item dlike",{active:k(I)}]),onClick:P[5]||(P[5]=(...be)=>k(z)&&k(z)(...be))},[$(Oe),$(ct,{name:"count-up",mode:"out-in"},{default:X(()=>[(E(),L("span",{class:"count",key:k(w)},de(k(w)),1))]),_:1})],2)):oe("",!0)]),_:1})])):oe("",!0)],2))]}),_:1}),$(fi,{show:v.value,"onUpdate:show":P[6]||(P[6]=we=>v.value=we),options:g.value,msg:O.msg},null,8,["show","options","msg"]),$(vi,{show:x.value,"onUpdate:show":P[7]||(P[7]=we=>x.value=we),options:g.value,uid:O.msg.fromUser.uid},null,8,["show","options","uid"])],64)}}});const Mi={key:2,class:"empty"},Ei=me({__name:"index",setup(p){const s=xt(),l=D(),f=H(()=>s.currentMessageOptions),y=H(()=>s.chatMessageList),h=H(()=>s.currentNewMsgCount),_=()=>{l.value&&(l.value.scrollToBottom(),s.clearNewMsgCount())},n=()=>{var o;l.value.scrollToIndex(y.value.length-(((o=h.value)==null?void 0:o.count)||0)),s.clearNewMsgCount()};Ot("virtualListRef",l),gt(()=>{At(()=>{s.chatListToBottomAction=()=>{_()}})});const i=async()=>{var r;if((r=f.value)!=null&&r.isLoading)return;const o=l.value.getSizes();await s.loadMore(),l.value.scrollToIndex(l.value.getSizes()-o)},e=Jn(o=>{const{offset:r,clientSize:a,scrollSize:c}=o;if(!r||!a||!c)return;r+a>=c-a?(h.value&&(h.value.isStart=!1),s.clearNewMsgCount()):h.value&&(h.value.isStart=!0)},100),t=o=>o.message.id;return(o,r)=>{var d,v,x,g,S,I;const a=Ds,c=It,u=js;return E(),L("div",{class:"chat-msg-list",onContextmenu:r[0]||(r[0]=$t(()=>{},["prevent"]))},[(d=f.value)!=null&&d.isLoading?(E(),le(c,{key:0,size:14,class:"loading"},{default:X(()=>[$(a),Ue("消息加载中 ")]),_:1})):oe("",!0),(v=y.value)!=null&&v.length?(E(),le(k(Qn),{key:1,ref_key:"virtualListRef",ref:l,class:"virtual-list scroll-hover",dataPropName:"msg",data:y.value,"data-key":t,item:Ii,size:20,onTotop:i,onScroll:k(e),onOk:_},null,8,["data","onScroll"])):oe("",!0),!((x=f.value)!=null&&x.isLoading)&&((g=y.value)==null?void 0:g.length)===0?(E(),L("div",Mi,"暂无消息，快来发送第一条消息吧~")):oe("",!0),Ce(B("span",{class:"new-msgs-tips",onClick:n},[Ue(de((S=h.value)==null?void 0:S.count)+" 条新消息 ",1),$(c,{size:10},{default:X(()=>[$(u)]),_:1})],512),[[Xe,((I=h.value)==null?void 0:I.count)&&h.value.count>0]])],32)}}});const Oi=vt(Ei,[["__scopeId","data-v-9f52c487"]]),Ti={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},$i=B("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),Ri=B("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),Li=[$i,Ri];function ji(p,s){return E(),L("svg",Ti,Li)}const Bi={name:"ep-lock",render:ji};const Ni={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Pi=B("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88L259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512L214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),zi=[Pi];function Di(p,s){return E(),L("svg",Ni,zi)}const Fi={name:"ep-close",render:Di};var Ke=(p=>(p.text="text",p.br="br",p.at="at",p))(Ke||{});const Ai=p=>{let s="";const l=[];return p.forEach(f=>{if((f.type===Ke.text||f.type===Ke.br)&&(s+=f.data),f.type===Ke.at){const{uid:y=0,name:h="",avatar:_=""}=f.data;l.push({uid:y,name:h,avatar:_,length:h.length+1,offset:s.length}),s+="@"+h}}),{pureString:s,mentionList:l}},Ui=(p,s)=>{let l=0;const f=[];if(s.length>0){s.forEach(h=>{const{offset:_,length:n}=h,i=p.slice(l,_);i.length>0&&f.push({type:Ke.text,data:i}),f.push({type:Ke.at,data:{uid:h.uid,name:h.name,avatar:h.avatar}}),l=_+n});const y=p.slice(l);y.length>0&&f.push({type:Ke.text,data:y})}else p.length>0&&f.push({type:Ke.text,data:p});return f},cn=()=>{let p=null,s=null;return window.getSelection?(s=window.getSelection(),s&&s.getRangeAt&&s.rangeCount?(p=s.getRangeAt(0),{range:p,selection:s}):null):null},Vi=()=>{const p=window,s=p.document;let l=s.selection,f,y,h,_=0,n=0;if(l)l.type!=="Control"&&(f=l.createRange(),f.collapse(!0),_=f.boundingLeft,n=f.boundingTop);else if(p.getSelection&&(l=p.getSelection(),l.rangeCount&&(f=l.getRangeAt(0).cloneRange(),f.getClientRects&&(f.collapse(!0),y=f.getClientRects(),y.length>0&&(h=y[0]),h&&(_=h.left,n=h.top)),_===0&&n===0||h===void 0))){const i=s.createElement("span");if(i.getClientRects){i.appendChild(s.createTextNode("​")),f.insertNode(i),h=i.getClientRects()[0],_=h.left,n=h.top;const e=i.parentNode;e==null||e.removeChild(i),e==null||e.normalize()}}return{x:_,y:n}},fn=({content:p,selection:s,range:l})=>{if(!(!s||!l||!p)&&s.getRangeAt(0)&&s.rangeCount){l.deleteContents();const f=document.createElement("div"),y=document.createTextNode(p);f.appendChild(y);const h=document.createDocumentFragment();let _,n;for(;_=f.firstChild;)n=h.appendChild(_);if(l.insertNode(h),n){const i=l.cloneRange();if(!i)return;i.setStartAfter(n),i.collapse(!0),s.removeAllRanges(),s.addRange(i)}}},Wi={class:"person-item__name"},Hi=me({__name:"item",props:{item:{},activeIndex:{},index:{},onSelect:{type:Function}},setup(p){const s=p,l=()=>{var f;(f=s.onSelect)==null||f.call(s,s.item.uid)};return(f,y)=>{const h=hn;return E(),L("div",{class:ve(["person-item",{"person-item--active":f.activeIndex===f.index}]),onClick:l},[$(h,{class:"avatar",src:f.item.avatar,size:26},null,8,["src"]),B("div",Wi,de(f.item.name),1)],2)}}});const Ki=["src"],Gi={class:"dialog-footer"},qi=me({__name:"index",setup(p){const s=D({url:""}),l=D(),f=D(!1),y=kt(),h=Dt("onChangeMsgType"),_=Dt("onChangeFile");hr(window,"paste",e=>{var t;if(e.preventDefault(),!y.isSign)return!1;if(e.clipboardData&&((t=e.clipboardData.files)!=null&&t.length)){const o=e.clipboardData.files[0];o!=null&&o.type.includes("image")&&(l.value=o)}return!1}),Xn(()=>{l!=null&&l.value?(f.value=!0,s.value={url:URL.createObjectURL(l==null?void 0:l.value)}):f.value=!1});const n=()=>{s.value.url&&URL.revokeObjectURL(s.value.url),l.value=void 0,s.value={url:""}},i=async()=>{l!=null&&l.value&&(h==null||h(ee.IMAGE),await(_==null?void 0:_([l==null?void 0:l.value])),f.value=!1,n())};return(e,t)=>{const o=Hn,r=rr;return E(),le(r,{class:"image-paste-modal",title:"粘贴图片",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),"close-on-click-modal":!1,center:"",onClose:n},{footer:X(()=>[B("span",Gi,[$(o,{onClick:t[0]||(t[0]=a=>f.value=!1)},{default:X(()=>[Ue("取消")]),_:1}),$(o,{type:"primary",onClick:i},{default:X(()=>[Ue(" 发送 ")]),_:1})])]),default:X(()=>[s.value.url?(E(),L("img",{key:0,src:s.value.url},null,8,Ki)):oe("",!0)]),_:1},8,["modelValue"])}}});const Xi=["text","contenteditable"],Yi=me({inheritAttrs:!1,__name:"index",props:{disabled:{type:Boolean,default:!1},modelValue:{default:""},mentions:{default:()=>[]},maxLength:{default:-1},className:{},style:{}},emits:["update:modelValue","change","focus","blur","callBackRefAndRange","send"],setup(p,{expose:s,emit:l}){const f=p,{modelValue:y,mentions:h,maxLength:_,disabled:n}=qn(f),i=D(),e=D(),t=Yo(),o=D(!1),r=D([]),a=Rt({x:0,y:0}),c=D(0),u=D(""),d=D(!1),v=D(null),x=D("");x.value=y.value;const g=()=>{const C=Ui(y==null?void 0:y.value,h.value);i.value&&(C.forEach(j=>{var q,se;if(j.type===Ke.text){const K=document.createTextNode(j.data);(q=i.value)==null||q.appendChild(K)}if(j.type===Ke.at){const K=document.createElement("button");K.dataset.person=JSON.stringify(j.data),K.textContent=`@${j.data.name}`,K.className="at_member",K.contentEditable="false",K.addEventListener("click",()=>!1,!1),K.tabIndex=0,(se=i.value)==null||se.appendChild(K)}}),d.value=!0)};Xn(()=>{var C;if(y.value&&y.value.length>0&&!d.value&&g(),!(y.value&&y.value.length>0)&&!d.value&&setTimeout(()=>{g()},500),!(y.value&&y.value.length>0)&&d&&i.value)for(;(C=i.value)!=null&&C.firstChild;)i.value.removeChild(i.value.firstChild);x.value=y.value}),lt(u,()=>{r.value=t.filterUsers(u.value)}),lt(o,()=>{o.value||(c.value=0)}),lt(o,()=>{if(o.value){const{x:C,y:j}=Vi();if(i.value){const q=i.value.offsetWidth,K=i.value.getBoundingClientRect().left+q,ae=300;C+ae>K?(a.x=K-ae,a.y=j):(a.x=C,a.y=j)}else a.x=C,a.y=j}}),lt(n,C=>{C||setTimeout(()=>{var j;(j=i.value)==null||j.focus()})}),gt(()=>{At(()=>{var C;(C=i.value)==null||C.focus()})});const S=()=>{if(i.value){const C=[],j=[].slice.call(i.value.childNodes);j.length>0&&j.forEach(K=>{if(K.nodeName==="#text"){const ae=K;ae.data&&ae.data.length>0&&C.push({type:Ke.text,data:ae.data})}if(K.nodeName==="BR"&&C.push({type:Ke.br,data:`
`}),K.nodeName==="BUTTON"){const ye=JSON.parse(K.dataset.person);C.push({type:Ke.at,data:ye})}});const{pureString:q,mentionList:se}=Ai(C);q.length>0&&q.charAt(q.length-1)===`
`?l("change",q.substring(0,q.length-1),se):l("change",q,se)}},I=()=>{const C=cn();if(!C||!C.range||!C.selection){o.value=!1;return}const j=C.range.endContainer;if(!j||!j.textContent||j.nodeName!=="#text"){o.value=!1;return}const q=j.textContent.slice(0,C.selection.focusOffset),se=/@([^@]*)$/.exec(q);if(se&&se.length>=2){const[,K]=se;if(K&&K.length>20){o.value=!1,u.value="",r.value=[];return}o.value=!0,u.value=K,v.value=C}else u.value="",o.value=!1},b=([C,j],q,se)=>{var K,ae;if(q.getRangeAt(0)&&q.rangeCount){if(((ae=(K=q.focusNode)==null?void 0:K.parentNode)==null?void 0:ae.nodeName)==="BUTTON")return;se.deleteContents();const ye=document.createElement("div");ye.appendChild(C),j&&ye.appendChild(j);const Oe=document.createDocumentFragment();let je,we;for(;je=ye.firstChild;)we=Oe.appendChild(je);se.insertNode(Oe),we&&(se=se.cloneRange(),se.setStartAfter(we),se.collapse(!0),q.removeAllRanges(),q.addRange(se))}},w=(C,j=!1)=>{var se,K,ae,ye;o.value=!1,(se=e.value)==null||se.scrollToIndex(0);const q=i.value;if(q){q.focus();const Oe=(K=v==null?void 0:v.value)==null?void 0:K.range;if(!Oe)return;const je=Oe.endContainer,we=Oe.endOffset,Ze=je.nodeValue,be=/@([^@]*)$/.exec(Ze);if(be&&be.length>1||j){!j&&(be!=null&&be.length)&&(Oe.setStart(je,be.index),Oe.setEnd(je,we),Oe.deleteContents());const Se=document.createElement("button");Se.dataset.person=JSON.stringify(C),Se.textContent=`@${C.name}`,Se.className="at_member",Se.contentEditable="false",Se.addEventListener("click",()=>!1,!1),Se.tabIndex=0;const Ie=document.createTextNode(" ");b([Se,Ie],(ae=v==null?void 0:v.value)==null?void 0:ae.selection,(ye=v==null?void 0:v.value)==null?void 0:ye.range)}S()}},T=C=>{C.key==="2"&&C.shiftKey?o.value=!0:I()},z=C=>{if(!e.value)return;let j=0;if(C==="up"){if(j=c.value-1,j<0)return;j<e.value.getOffset()/34&&e.value.scrollToIndex(j)}if(C==="down"){if(j=c.value+1,j>r.value.length+1)return;j>6&&e.value.scrollToIndex(j-6)}c.value=j},G=C=>{if(_.value&&_.value>0&&C.target.innerText.length>=_.value&&(C.key==="Backspace"||C.key==="Delete"||C.preventDefault()),o.value&&r.value.length>0)C.key==="ArrowDown"&&(C.preventDefault(),z("down")),C.key==="ArrowUp"&&(C.preventDefault(),z("up")),C.key==="Enter"&&(C.preventDefault(),w(r.value[c.value]),A());else{if(C.ctrlKey&&C.key==="Enter"||C.shiftKey&&C.key==="Enter"||C.metaKey&&C.key==="Enter"){C.preventDefault(),V();return}if(C.isComposing)return C.preventDefault();C.key==="Enter"&&(C.preventDefault(),l("send",C))}if(C.ctrlKey||C.metaKey)switch(C.key){case"B":case"2":case"I":case"9":case"U":case"F6":{C.preventDefault();break}}C.key==="Tab"&&(C.preventDefault(),document.execCommand("insertHTML",!1,"  "))},A=()=>{if(i.value){const C=i.value.innerText;x.value=C,l("update:modelValue",C)}S()},Z=()=>{l("blur"),v.value=cn(),l("callBackRefAndRange",i.value,v.value),setTimeout(()=>{var C;o.value=!1,(C=e.value)==null||C.scrollToIndex(0),setTimeout(()=>{u.value=""},0)},300)},V=()=>{const C=cn();!C||!C.range||!C.selection||fn({content:`
`,selection:C.selection,range:C.range})},te=()=>{l("focus"),I()},ie=C=>{C.preventDefault();let j;return window.clipboardData&&window.clipboardData.getData?j=window.clipboardData.getData("Text"):C.clipboardData&&C.clipboardData.getData&&(j=C.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,j),!1},O=(C,j=!1)=>{C&&(nt.emit("focusMsgInput"),setTimeout(()=>{const q=t.userCachedList[C];q&&(w==null||w(q,j))},10))};s({input:i,range:v,onSelectPerson:O});const P=C=>C.uid;return(C,j)=>{var q;return E(),L("div",{class:ve(["input-wrapper",[C.className,C.$attrs.class]]),style:tt([C.style,C.$attrs.style])},[B("div",yn({ref_key:"editorRef",ref:i},C.$attrs,{class:"input",id:"at-mentions-input",text:C.modelValue,contenteditable:!k(n),onInput:A,onKeyup:T,onKeydown:G,onBlur:Z,onFocus:te,onMouseup:I,onPaste:ie}),null,16,Xi),Ce(B("div",{className:"at-mentions__dialog",style:tt({top:`${a.y-14}px`,left:`${a.x||0}px`})},[(q=r.value)!=null&&q.length?(E(),le(k(Qn),{key:0,ref_key:"scrollRef",ref:e,class:"person-wrapper",dataPropName:"item",itemProps:{activeIndex:c.value,onSelect:O},data:r.value,"data-key":P,item:Hi,size:20},null,8,["itemProps","data"])):oe("",!0)],4),[[Xe,o.value]]),$(qi)],6)}}});const Zi=vt(Yi,[["__scopeId","data-v-8870bfd6"]]),Ji=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","😏","😒","😞","😔","😟","😕","🙁","😣","😖","😫","😩","😢","😭","😮","💨","😤","😠","😡","🤬","🤯","😳","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","🌫️","😐","😑","😬","🙄","😯","😦","😧","😮","😲","😴","🤤","😪","😵","💫","🤐","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🐶"],oo=100,Qi=oo*1024*1024,el=()=>{const p=D(!1),s=D(0),l=D(null),{on:f,trigger:y}=yt(),h=yt(),_=async(r,a,c)=>{p.value=!0;const u=new XMLHttpRequest;u.open("PUT",r,!0),u.setRequestHeader("Content-Type",a.type),u.upload.onprogress=function(d){c||(s.value=Math.round(d.loaded/d.total*100))},u.onload=function(){p.value=!1,!c&&(u.status===200?y("success"):y("fail"))},u.send(a)},n=r=>new Promise((a,c)=>{const u=document.createElement("video"),d=URL.createObjectURL(r);u.src=d,u.crossOrigin="anonymous",u.currentTime=2,u.oncanplay=()=>{var x;const v=document.createElement("canvas");v.width=u.videoWidth,v.height=u.videoHeight,(x=v.getContext("2d"))==null||x.drawImage(u,0,0,v.width,v.height),v.toBlob(g=>{if(!g)return;const S=Date.now()+"thumb.jpg",I=new File([g],S,{type:"image/jpeg"});Ye.getUploadUrl({fileName:S,scene:"1"}).send().then(b=>{if(b.uploadUrl&&b.downloadUrl){_(b.uploadUrl,I,!0);const w=setInterval(()=>{p.value||(clearInterval(w),a({thumbWidth:v.width,thumbHeight:v.height,thumbUrl:b.downloadUrl,thumbSize:I.size,tempUrl:d}))})}})})},u.onerror=function(){URL.revokeObjectURL(d),c({width:0,height:0,url:null})}}),i=r=>{const a=new Image,c=URL.createObjectURL(r);return a.src=c,new Promise((u,d)=>{a.onload=function(){u({width:a.width,height:a.height,tempUrl:c})},a.onerror=function(){URL.revokeObjectURL(c),d({width:0,height:0,url:null})}})},e=r=>new Promise((a,c)=>{const u=new Audio,d=URL.createObjectURL(r);u.src=d,(async()=>{for(;isNaN(u.duration)||u.duration===1/0;)await new Promise(g=>setTimeout(g,100)),u.currentTime=1e5*Math.random();const x=Math.round(u.duration||0);a({second:x,tempUrl:d})})(),u.onerror=function(){c({second:0,tempUrl:d})}}),t=async(r,a={})=>{var g;const{name:c,size:u,type:d}=r,v=((g=c.split(".").pop())==null?void 0:g.trim().toLowerCase())||"",x={name:c,size:u,type:d,suffix:v,...a};if(d.includes("image")){const{width:S,height:I,tempUrl:b}=await i(r);return{...x,width:S,height:I,tempUrl:b}}if(d.includes("audio")){const{second:S,tempUrl:I}=await e(r);return{second:S,tempUrl:I,...x}}if(d.includes("video")){const{thumbWidth:S,thumbHeight:I,tempUrl:b,thumbTempUrl:w,thumbUrl:T,thumbSize:z}=await n(r);return{...x,thumbWidth:S,thumbHeight:I,tempUrl:b,thumbTempUrl:w,thumbUrl:T,thumbSize:z}}return x},o=async(r,a)=>{if(p.value||!r)return;const c=await t(r,a);if(c.size>Qi){ft.warning(`文件不得大于 ${oo} MB`);return}const{downloadUrl:u,uploadUrl:d}=await Ye.getUploadUrl({fileName:c.name,scene:"1"}).send();d&&u?(l.value={...c,downloadUrl:u},h.trigger(l),_(d,r)):y("fail")};return{fileInfo:l,isUploading:p,progress:s,onStart:h.on,onChange:f,uploadFile:o}},tl=()=>{const p=D(!1),s=D(null),l=D(0),f=D(null),y=yt(),{isSupported:h,stream:_,start:n,stop:i}=yr({constraints:{audio:!0}}),e=()=>{p.value=!1,l.value=0,f.value=null,s.value&&clearInterval(s.value)},t=async()=>{if(!h.value){ft.warning("当前环境不支持录音");return}if(e(),await n(),!_.value)return;f.value=new MediaRecorder(_.value),f.value.start(),p.value=!0,s.value=setInterval(()=>{l.value++,l.value>=59&&o()},1e3);const r=[];f.value.addEventListener("dataavailable",a=>{r.push(a.data)}),f.value.addEventListener("stop",()=>{s.value&&clearInterval(s.value);const a=new Blob(r,{type:"audio/wav"}),c=new File([a],`${Date.now()}.wav`,{type:"audio/wav"});if(l.value<2){ft.warning("录制时间太短");return}y.trigger(c),e()})},o=()=>{f.value&&(f.value.stop(),i())};return{isRecording:p,second:l,start:t,stop:o,reset:e,onEnd:y.on}},nl=()=>{const p=mt(),s=H(()=>JSON.parse(localStorage.getItem("USER_INFO")||"{}")),l=H(()=>p.currentSession.roomId);return{mockMessage:(y,h,_)=>{const n=Date.now(),i=Math.floor(Math.random()*15),e=Number(String(n).slice(-7)+i),t=y===1?h.content:null,{uid:o,name:r,avatar:a}=s.value;return{fromUser:{username:r,uid:o,avatar:a,locPlace:"XX"},message:{id:e,roomId:l.value,sendTime:Number(n),content:t,urlContentMap:{},type:y,body:h,messageMark:{likeCount:0,userLike:0,dislikeCount:0,userDislike:0,..._}},sendTime:String(n),loading:!0}}}},ro=p=>(_r("data-v-cf0dabe3"),p=p(),xr(),p),ol={class:"chat-edit"},rl={class:"reply-msg-wrapper"},sl={class:"msg-input"},al={class:"recorded-tips"},il={class:"emoji-panel"},ll={class:"emoji-panel-content"},ul={class:"emoji-list"},cl={class:"emoji-panel-content"},dl=["onClick","onContextmenu"],pl=["src"],fl={key:1,class:"item-add"},ml={class:"footer"},vl=ro(()=>B("div",{class:"divider"},null,-1)),gl=ro(()=>B("span",{class:"tips-text"},"登录",-1)),hl={key:1,class:"tips"},yl=me({__name:"index",setup(p){const s=sr(),l=xt(),f=mt(),y=D(!1),h=D(""),_=D(),n=D([]),i=D(!1),e=D(!1),t=D(0),o=D(!1),r=D(ee.FILE),a=D(0),c=D(!1),u=D(-1),d=()=>{setTimeout(()=>{var N,ue,Te,ke;if(!_.value)return;(ue=(N=_.value)==null?void 0:N.focus)==null||ue.call(N);const Y=(ke=(Te=_.value)==null?void 0:Te.range)==null?void 0:ke.selection;Y==null||Y.selectAllChildren(_.value.input),Y==null||Y.collapseToEnd()})},v=({uid:Y,ignoreCheck:N})=>{var ue,Te;(Te=(ue=_.value)==null?void 0:ue.onSelectPerson)==null||Te.call(ue,Y,N),i.value=!1};gt(()=>{nt.on("onSelectPerson",v),nt.on("focusMsgInput",d)}),Kn(()=>{nt.off("onSelectPerson",v),nt.off("focusMsgInput",d)});const x=(Y,N)=>{Ye.sendMsg({roomId:f.currentSession.roomId,msgType:Y,body:N}).send().then(ue=>{ue.message.type===ee.TEXT?l.pushMsg(ue):l.updateMsg(t.value,ue),h.value="",ie(),l.getSessionList(!0)}).finally(()=>{var ue;y.value=!1,d(),(ue=l.chatListToBottomAction)==null||ue.call(l)})},g=()=>{var Y,N;!((Y=h.value)!=null&&Y.trim().length)||y.value||(y.value=!0,x(ee.TEXT,{content:h.value,replyMsgId:(N=z.value.message)==null?void 0:N.id,atUidList:n.value.map(ue=>ue.uid)}))},S=Zo(),I=kt(),b=xn(),w=Vn(),T=H(()=>I.isSign),z=H(()=>I.isSign&&l.currentMsgReply||{}),G=H(()=>{var Y;return(Y=z==null?void 0:z.value.fromUser)==null?void 0:Y.uid}),A=Ft(G),Z=H(()=>b.emojiList),V=H(()=>w.countInfo.role===dn.REMOVED),te=()=>{var ue,Te,ke;const Y=A==null?void 0:A.value.name,N=(ue=z==null?void 0:z.value.message)==null?void 0:ue.type;return Yn(Y,N,(ke=(Te=z==null?void 0:z.value.message)==null?void 0:Te.body)==null?void 0:ke.content)},ie=()=>l.currentMsgReply={},O=Y=>{var Te,ke;const N=(Te=_.value)==null?void 0:Te.input,ue=(ke=_.value)==null?void 0:ke.range;!N||!ue||(fn({content:Y,...ue}),h.value=N.innerText,o.value=!1,d())},P=(Y,N)=>{n.value=N},C=Rt({multiple:!1,accept:".jpg,.png"}),{open:j,reset:q,onChange:se}=br(C),{isUploading:K,fileInfo:ae,uploadFile:ye,onStart:Oe,onChange:je}=el(),{uploadEmoji:we,isEmojiUp:Ze}=no(),{isRecording:be,start:Se,stop:Ie,onEnd:Ut,second:Vt}=tl(),{mockMessage:jt}=nl(),Mt=(Y,N=!1)=>{Y==="img"&&(r.value=ee.IMAGE,C.accept=".jpg,.png,.gif,.jpeg,.webp"),Y==="file"&&(r.value=ee.FILE,C.accept="*"),c.value=N,j()},Bt=async Y=>{if(!(Y!=null&&Y.length))return;const N=Y[0];if(r.value===ee.IMAGE&&!N.type.includes("image"))return ft.error("请选择图片文件");c.value?await we(N):await ye(N)};Ot("onChangeFile",Bt),Ot("onChangeMsgType",Y=>{r.value=Y}),se(Bt),Oe(()=>{var Te;if(!ae.value)return;ae.value.type.includes("video")&&(r.value=ee.VIDEO);const{type:Y,body:N}=Dn(ae.value,r.value,!0),ue=jt(Y,N);t.value=ue.message.id,l.pushMsg(ue),(Te=l.chatListToBottomAction)==null||Te.call(l)}),je(Y=>{if(Y==="success"){if(!ae.value)return;const{body:N,type:ue}=Dn(ae.value,r.value);x(ue,N)}q()}),Ut(Y=>ye(Y));const ht=()=>{r.value=ee.VOICE,Se()},Wt=(Y,N)=>{Y.preventDefault(),u.value=u.value===N?-1:N},Ht=Jn(Y=>{x(ee.EMOJI,{url:Y}),o.value=!1},1e3);return(Y,N)=>{const ue=Fi,Te=It,ke=rt,Et=Ur,Kt=Bi,Gt=_t("login");return E(),L("div",ol,[Ce(B("div",rl,[B("span",null,de(te()),1),$(Te,{class:"reply-msg-icon",size:14,onClick:ie},{default:X(()=>[$(ue)]),_:1})],512),[[Xe,Object.keys(z.value).length]]),B("div",sl,[B("div",{class:"action",onClick:N[0]||(N[0]=ge=>i.value=!i.value)},[Ce($(ke,{icon:"voice",class:"audio"},null,512),[[Xe,!i.value]]),Ce($(ke,{icon:"jianpan"},null,512),[[Xe,i.value]])]),Ce(B("div",{class:"recorded",onMousedown:N[1]||(N[1]=ge=>ht()),onMouseup:N[2]||(N[2]=ge=>k(Ie)()),onTouchstartPassive:N[3]||(N[3]=ge=>ht()),onTouchendPassive:N[4]||(N[4]=ge=>k(Ie)())},[B("div",al,de(k(be)?`录制中 ${k(Vt)}s`:"按住说话"),1)],544),[[Xe,i.value]]),Ce($(Zi,{class:"m-input",modelValue:h.value,"onUpdate:modelValue":N[5]||(N[5]=ge=>h.value=ge),ref_key:"mentionRef",ref:_,autofocus:"",tabindex:!T.value||y.value,disabled:!T.value||y.value,placeholder:T.value?y.value?"消息发送中":"来聊点什么吧~":"",mentions:n.value,onChange:P,onSend:g},null,8,["modelValue","tabindex","disabled","placeholder","mentions"]),[[Xe,!i.value]]),$(Et,{placement:"top",effect:"dark",title:"",visible:o.value,"onUpdate:visible":N[11]||(N[11]=ge=>o.value=ge),"popper-class":"emoji-warpper","show-arrow":!1,width:k(s)==="PC"?385:"95%",trigger:"click"},{reference:X(()=>[B("div",{class:"action",onMouseover:N[6]||(N[6]=ge=>e.value=!0),onMouseleave:N[7]||(N[7]=ge=>e.value=!1)},[e.value?(E(),le(ke,{key:0,icon:"shocked",size:18,colorful:""})):(E(),le(ke,{key:1,icon:"happy1",size:18,colorful:""}))],32)]),default:X(()=>[B("div",il,[Ce(B("div",ll,[B("ul",ul,[(E(!0),L(ot,null,Tt(k(Ji),(ge,st)=>Ce((E(),L("li",{class:"emoji-item",key:st},[Ue(de(ge),1)])),[[Gt,()=>O(ge)]])),128))])],512),[[Xe,a.value===0]]),Ce(B("div",cl,[(E(!0),L(ot,null,Tt(Z.value,ge=>(E(),L("div",{key:ge.id,class:"item",onClick:st=>k(Ht)(ge.expressionUrl),onContextmenu:st=>Wt(st,ge.id)},[B("img",{src:ge.expressionUrl},null,8,pl),ge.id===u.value?(E(),le(ke,{key:0,icon:"guanbi1",class:"del",onClick:$t(st=>k(b).deleteEmoji(ge.id),["stop"])},null,8,["onClick"])):oe("",!0)],40,dl))),128)),Z.value.length<50&&!k(Ze)?(E(),le(ke,{key:0,class:"cursor-pointer item-add",icon:"tianjia",size:30,onClick:N[8]||(N[8]=ge=>Mt("img",!0))})):(E(),L("div",fl,[$(ke,{icon:"loading",spin:"",size:30})]))],512),[[Xe,a.value===1]]),B("div",ml,[$(ke,{class:ve(["cursor-pointer","footer-act",{active:a.value===0}]),icon:"biaoqing",size:18,onClick:N[9]||(N[9]=ge=>a.value=0)},null,8,["class"]),$(ke,{class:ve(["cursor-pointer","footer-act",{active:a.value===1}]),icon:"aixin",size:18,onClick:N[10]||(N[10]=ge=>a.value=1)},null,8,["class"])])])]),_:1},8,["visible","width"]),$(ke,{class:"action",icon:"at",size:20,colorful:"",onClick:N[12]||(N[12]=ge=>{var st;return k(fn)({content:"@",...(st=_.value)==null?void 0:st.range})})}),$(ke,{class:ve(["action",{disabled:k(K)}]),icon:"tupian",size:18,colorful:"",onClick:N[13]||(N[13]=ge=>Mt("img"))},null,8,["class"]),$(ke,{class:"action",icon:"wenjianjia2",size:20,colorful:"",onClick:N[14]||(N[14]=ge=>Mt("file"))}),vl,B("div",{class:ve(["action",{"is-edit":h.value.length,disabled:!h.value.length}]),onClick:g},[$(ke,{class:"send",icon:"huojian",size:20})],2)]),T.value?oe("",!0):(E(),L("span",{key:0,class:"tips",onClick:N[15]||(N[15]=ge=>k(S).showLogin=!0)},[$(Te,{class:"icon-lock"},{default:X(()=>[$(Kt)]),_:1}),Ue(" 点我"),gl,Ue("之后再发言~ ")])),T.value&&V.value?(E(),L("span",hl," 您已被踢出群聊，无法再发送消息 ")):oe("",!0)])}}});const bl=vt(yl,[["__scopeId","data-v-cf0dabe3"]]),_l={class:"chat-box"},xl={class:"chat-wrapper"},kl={key:1,class:"chat"},Cl=me({__name:"index",setup(p){const s=D(!1),l=mt(),f=H(()=>l.currentSession);return(y,h)=>{const _=bs,n=It;return E(),L("div",_l,[B("div",xl,[s.value?(E(),le(n,{key:0,size:160,color:"var(--font-light)"},{default:X(()=>[$(_)]),_:1})):(E(),L("div",kl,[$(Oi),$(bl)]))]),Ce($(Os,null,null,512),[[Xe,f.value.type===k(Jo).Group]])])}}});const wl=vt(Cl,[["__scopeId","data-v-18afe9df"]]),Rl=me({__name:"index",setup(p){return xt().getSessionList(),(l,f)=>(E(),L(ot,null,[$(fs),$(wl)],64))}});export{Rl as default};

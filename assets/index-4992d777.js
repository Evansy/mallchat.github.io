var Lo=Object.defineProperty;var Bo=(p,s,l)=>s in p?Lo(p,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[s]=l;var an=(p,s,l)=>(Bo(p,typeof s!="symbol"?s+"":s,l),l);import{_ as Nt,m as wt,x as it,av as No,s as jo,u as mn,aw as Po,ax as zo,w as vn,ay as Ao,az as Do,aA as Fo,aB as Uo,F as Dn,E as St,aC as Vo,aD as ne,aE as It,ac as ut,aF as Fn,ad as Wo,a0 as vt,a1 as Mt,ab as gn,aG as dn,aH as Un,aI as nt,a4 as lt,aJ as Ho,a2 as Vn,V as Go,aK as Ko,aL as qo,ao as Xo,aM as hn,a5 as mt,aN as kt,aO as Rn,aP as yn,aa as yt,aQ as Ln,Z as Yo,ar as Zo}from"./index-97f5576d.js";import{b as Jo,j as Ut,k as Qo,h as rt,_ as bn,E as Wn,l as er}from"./useCached-53723055.js";import{d as pn,e as at,b as Hn,a as tr,v as nr,u as or,f as rr,c as sr,E as ar,j as ir}from"./preview-a9a457f4.js";import{I as lr}from"./types-c26e2409.js";import{z as me,A as _t,r as A,y as Rt,t as Ft,e as gt,u as x,ag as Gn,v as W,k as E,J as ie,D as J,l as L,F as ye,G as fe,L as ae,a2 as Ue,B as _n,R as ur,h as Bn,m as B,K as et,M as xn,E as xe,O as ot,a8 as Lt,C as R,ah as cr,ai as Kn,af as pt,P as Ct,n as Vt,o as kn,H as Xe,aj as dr,aa as pr,w as tt,ak as fr,al as mr,am as bt,U as vr,X as Bt,a5 as qn,an as gr,T as $t,ao as hr,a as Xn,ap as yr,aq as br,ac as _r,ad as xr}from"./vue-d746028e.js";import{a as kr,c as Cr,g as wr}from"./xgplayer-2fc91dd5.js";const Sr=me({inheritAttrs:!1});function Ir(p,s,l,f,y,h){return _t(p.$slots,"default")}var Mr=Nt(Sr,[["render",Ir],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Er=me({name:"ElCollectionItem",inheritAttrs:!1});function Or(p,s,l,f,y,h){return _t(p.$slots,"default")}var Tr=Nt(Er,[["render",Or],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const $r="data-el-collection-item",Rr=p=>{const s=`El${p}Collection`,l=`${s}Item`,f=Symbol(s),y=Symbol(l),h={...Mr,name:s,setup(){const n=A(null),i=new Map;Rt(f,{itemMap:i,getItems:()=>{const t=x(n);if(!t)return[];const r=Array.from(t.querySelectorAll(`[${$r}]`));return[...i.values()].sort((a,c)=>r.indexOf(a.ref)-r.indexOf(c.ref))},collectionRef:n})}},k={...Tr,name:l,setup(n,{attrs:i}){const e=A(null),t=Ft(f,void 0);Rt(y,{collectionItemRef:e}),gt(()=>{const r=x(e);r&&t.itemMap.set(r,{ref:r,...i})}),Gn(()=>{const r=x(e);t.itemMap.delete(r)})}};return{COLLECTION_INJECTION_KEY:f,COLLECTION_ITEM_INJECTION_KEY:y,ElCollection:h,ElCollectionItem:k}},ln=wt({trigger:pn.trigger,effect:{...at.effect,default:"light"},type:{type:it(String)},placement:{type:it(String),default:"bottom"},popperOptions:{type:it(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:it([Number,String]),default:0},maxHeight:{type:it([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:it(Object)},teleported:at.teleported});wt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:No}});wt({onKeydown:{type:it(Function)}});Rr("Dropdown");const Lr=wt({trigger:pn.trigger,placement:ln.placement,disabled:pn.disabled,visible:at.visible,transition:at.transition,popperOptions:ln.popperOptions,tabindex:ln.tabindex,content:at.content,popperStyle:at.popperStyle,popperClass:at.popperClass,enterable:{...at.enterable,default:!0},effect:{...at.effect,default:"light"},teleported:at.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),Br={"update:visible":p=>jo(p),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Nr="onUpdate:visible",jr=me({name:"ElPopover"}),Pr=me({...jr,props:Lr,emits:Br,setup(p,{expose:s,emit:l}){const f=p,y=W(()=>f[Nr]),h=mn("popover"),k=A(),n=W(()=>{var d;return(d=x(k))==null?void 0:d.popperRef}),i=W(()=>[{width:Po(f.width)},f.popperStyle]),e=W(()=>[h.b(),f.popperClass,{[h.m("plain")]:!!f.content}]),t=W(()=>f.transition===`${h.namespace.value}-fade-in-linear`),r=()=>{var d;(d=k.value)==null||d.hide()},o=()=>{l("before-enter")},a=()=>{l("before-leave")},c=()=>{l("after-enter")},u=()=>{l("update:visible",!1),l("after-leave")};return s({popperRef:n,hide:r}),(d,v)=>(E(),ie(x(Hn),_n({ref_key:"tooltipRef",ref:k},d.$attrs,{trigger:d.trigger,placement:d.placement,disabled:d.disabled,visible:d.visible,transition:d.transition,"popper-options":d.popperOptions,tabindex:d.tabindex,content:d.content,offset:d.offset,"show-after":d.showAfter,"hide-after":d.hideAfter,"auto-close":d.autoClose,"show-arrow":d.showArrow,"aria-label":d.title,effect:d.effect,enterable:d.enterable,"popper-class":x(e),"popper-style":x(i),teleported:d.teleported,persistent:d.persistent,"gpu-acceleration":x(t),"onUpdate:visible":x(y),onBeforeShow:o,onBeforeHide:a,onShow:c,onHide:u}),{content:J(()=>[d.title?(E(),L("div",{key:0,class:ye(x(h).e("title")),role:"title"},fe(d.title),3)):ae("v-if",!0),_t(d.$slots,"default",{},()=>[Ue(fe(d.content),1)])]),default:J(()=>[d.$slots.reference?_t(d.$slots,"reference",{key:0}):ae("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var zr=Nt(Pr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const Nn=(p,s)=>{const l=s.arg||s.value,f=l==null?void 0:l.popperRef;f&&(f.triggerRef=p)};var Ar={mounted(p,s){Nn(p,s)},updated(p,s){Nn(p,s)}};const Dr="popover",Fr=zo(Ar,Dr),Ur=vn(zr,{directive:Fr}),Vr=wt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:p=>p>=0&&p<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:it(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:it([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:it(Function),default:p=>`${p}%`}}),Wr=["aria-valuenow"],Hr={viewBox:"0 0 100 100"},Gr=["d","stroke","stroke-linecap","stroke-width"],Kr=["d","stroke","opacity","stroke-linecap","stroke-width"],qr={key:0},Xr=me({name:"ElProgress"}),Yr=me({...Xr,props:Vr,setup(p){const s=p,l={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},f=mn("progress"),y=W(()=>({width:`${s.percentage}%`,animationDuration:`${s.duration}s`,backgroundColor:b(s.percentage)})),h=W(()=>(s.strokeWidth/s.width*100).toFixed(1)),k=W(()=>["circle","dashboard"].includes(s.type)?Number.parseInt(`${50-Number.parseFloat(h.value)/2}`,10):0),n=W(()=>{const g=k.value,C=s.type==="dashboard";return`
          M 50 50
          m 0 ${C?"":"-"}${g}
          a ${g} ${g} 0 1 1 0 ${C?"-":""}${g*2}
          a ${g} ${g} 0 1 1 0 ${C?"":"-"}${g*2}
          `}),i=W(()=>2*Math.PI*k.value),e=W(()=>s.type==="dashboard"?.75:1),t=W(()=>`${-1*i.value*(1-e.value)/2}px`),r=W(()=>({strokeDasharray:`${i.value*e.value}px, ${i.value}px`,strokeDashoffset:t.value})),o=W(()=>({strokeDasharray:`${i.value*e.value*(s.percentage/100)}px, ${i.value}px`,strokeDashoffset:t.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),a=W(()=>{let g;return s.color?g=b(s.percentage):g=l[s.status]||l.default,g}),c=W(()=>s.status==="warning"?Ao:s.type==="line"?s.status==="success"?Do:Fo:s.status==="success"?Uo:Dn),u=W(()=>s.type==="line"?12+s.strokeWidth*.4:s.width*.111111+2),d=W(()=>s.format(s.percentage));function v(g){const C=100/g.length;return g.map((_,w)=>Bn(_)?{color:_,percentage:(w+1)*C}:_).sort((_,w)=>_.percentage-w.percentage)}const b=g=>{var C;const{color:I}=s;if(ur(I))return I(g);if(Bn(I))return I;{const _=v(I);for(const w of _)if(w.percentage>g)return w.color;return(C=_[_.length-1])==null?void 0:C.color}};return(g,C)=>(E(),L("div",{class:ye([x(f).b(),x(f).m(g.type),x(f).is(g.status),{[x(f).m("without-text")]:!g.showText,[x(f).m("text-inside")]:g.textInside}]),role:"progressbar","aria-valuenow":g.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[g.type==="line"?(E(),L("div",{key:0,class:ye(x(f).b("bar"))},[B("div",{class:ye(x(f).be("bar","outer")),style:et({height:`${g.strokeWidth}px`})},[B("div",{class:ye([x(f).be("bar","inner"),{[x(f).bem("bar","inner","indeterminate")]:g.indeterminate},{[x(f).bem("bar","inner","striped")]:g.striped},{[x(f).bem("bar","inner","striped-flow")]:g.stripedFlow}]),style:et(x(y))},[(g.showText||g.$slots.default)&&g.textInside?(E(),L("div",{key:0,class:ye(x(f).be("bar","innerText"))},[_t(g.$slots,"default",{percentage:g.percentage},()=>[B("span",null,fe(x(d)),1)])],2)):ae("v-if",!0)],6)],6)],2)):(E(),L("div",{key:1,class:ye(x(f).b("circle")),style:et({height:`${g.width}px`,width:`${g.width}px`})},[(E(),L("svg",Hr,[B("path",{class:ye(x(f).be("circle","track")),d:x(n),stroke:`var(${x(f).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":g.strokeLinecap,"stroke-width":x(h),fill:"none",style:et(x(r))},null,14,Gr),B("path",{class:ye(x(f).be("circle","path")),d:x(n),stroke:x(a),fill:"none",opacity:g.percentage?1:0,"stroke-linecap":g.strokeLinecap,"stroke-width":x(h),style:et(x(o))},null,14,Kr)]))],6)),(g.showText||g.$slots.default)&&!g.textInside?(E(),L("div",{key:2,class:ye(x(f).e("text")),style:et({fontSize:`${x(u)}px`})},[_t(g.$slots,"default",{percentage:g.percentage},()=>[g.status?(E(),ie(x(St),{key:1},{default:J(()=>[(E(),ie(xn(x(c))))]),_:1})):(E(),L("span",qr,fe(x(d)),1))])],6)):ae("v-if",!0)],10,Wr))}});var Zr=Nt(Yr,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Jr=vn(Zr),Qr=wt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Vo,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),es=me({name:"ElText"}),ts=me({...es,props:Qr,setup(p){const s=p,l=Jo(),f=mn("text"),y=W(()=>[f.b(),f.m(s.type),f.m(l.value),f.is("truncated",s.truncated)]);return(h,k)=>(E(),ie(xn(h.tag),{class:ye(x(y))},{default:J(()=>[_t(h.$slots,"default")]),_:3},8,["class"]))}});var ns=Nt(ts,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const os=vn(ns),Yn=(p,s,l)=>{switch(s){case ne.SYSTEM:case ne.TEXT:return`${p}:${l}`;case ne.IMAGE:return`${p}: [图片]`;case ne.FILE:return`${p}: [文件]`;case ne.VOICE:return`${p}: [语音]`;case ne.VIDEO:return`${p}: [视频]`;case ne.EMOJI:return`${p}: [表情]`;default:return""}},rs={class:"chat-message"},ss=["onClick"],as={class:"message-info"},is={style:{"white-space":"nowrap"}},ls={class:"person"},us={key:0,class:"tag"},cs={class:"message-message"},ds={class:"message-time"},ps=me({__name:"index",setup(p){const s=It(),l=ut(),f=W(()=>l.currentSession),y=W(()=>s.sessionList.map(n=>{var t,r,o,a,c,u,d,v;const i=(o=(r=Array.from(((t=s.messageMap.get(n.roomId))==null?void 0:t.values())||[]))==null?void 0:r.slice(-1))==null?void 0:o[0];let e="";if(i){const b=Ut(i.fromUser.uid);e=((a=i.message)==null?void 0:a.type)===ne.RECALL?`${b.value.name}:'撤回了一条消息'`:Yn(b.value.name,(c=i.message)==null?void 0:c.type,((d=(u=i.message)==null?void 0:u.body)==null?void 0:d.content)||((v=i.message)==null?void 0:v.body))}return{...n,tag:n.hot_Flag===lr.Yes?"官方":"",lastMsg:e||n.text||"欢迎使用MallChat",lastMsgTime:Fn(n==null?void 0:n.activeTime)}})),h=(n,i)=>{l.currentSession.roomId=n,l.currentSession.type=i},k=()=>{s.getSessionList()};return(n,i)=>{const e=tr,t=Wo,r=Qo;return xe((E(),L("ul",rs,[(E(!0),L(ot,null,Lt(y.value,(o,a)=>(E(),L("li",{key:a,class:ye(["chat-message-item ",{active:f.value.roomId===o.roomId}]),onClick:c=>h(o.roomId,o.type)},[R(t,{value:o.unreadCount,max:999,hidden:o.unreadCount<1,class:"item"},{default:J(()=>[R(e,{shape:"circle",size:38,src:o.avatar},null,8,["src"])]),_:2},1032,["value","hidden"]),B("div",as,[B("div",is,[B("span",ls,fe(o.name),1),o.tag?(E(),L("span",us,fe(o.tag),1)):ae("",!0)]),B("div",cs,fe(o.lastMsg),1)]),B("span",ds,fe(o.lastMsgTime),1)],10,ss))),128))])),[[r,k]])}}});const fs=vt(ps,[["__scopeId","data-v-fe7e064f"]]),ms={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},vs=B("path",{fill:"currentColor",d:"m174.72 855.68l135.296-45.12l23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160S128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8l-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512C64 299.904 256 96 512 96s448 203.904 448 416s-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"},null,-1),gs=B("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm192 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4zm-384 0a51.2 51.2 0 1 1 0-102.4a51.2 51.2 0 0 1 0 102.4z"},null,-1),hs=[vs,gs];function ys(p,s){return E(),L("svg",ms,hs)}const bs={name:"ep-chat-dot-round",render:ys};var Zn={exports:{}};const _s=kr(cr);(function(p,s){(function(l,f){p.exports=f(_s)})(typeof self<"u"?self:Cr,l=>(()=>{var f={9662:(n,i,e)=>{var t=e(614),r=e(6330),o=TypeError;n.exports=function(a){if(t(a))return a;throw o(r(a)+" is not a function")}},6077:(n,i,e)=>{var t=e(614),r=String,o=TypeError;n.exports=function(a){if(typeof a=="object"||t(a))return a;throw o("Can't set "+r(a)+" as a prototype")}},1223:(n,i,e)=>{var t=e(5112),r=e(30),o=e(3070).f,a=t("unscopables"),c=Array.prototype;c[a]==null&&o(c,a,{configurable:!0,value:r(null)}),n.exports=function(u){c[a][u]=!0}},9670:(n,i,e)=>{var t=e(111),r=String,o=TypeError;n.exports=function(a){if(t(a))return a;throw o(r(a)+" is not an object")}},8533:(n,i,e)=>{var t=e(2092).forEach,r=e(9341),o=r("forEach");n.exports=o?[].forEach:function(a){return t(this,a,arguments.length>1?arguments[1]:void 0)}},1318:(n,i,e)=>{var t=e(5656),r=e(1400),o=e(6244),a=function(c){return function(u,d,v){var b,g=t(u),C=o(g),I=r(v,C);if(c&&d!=d){for(;C>I;)if(b=g[I++],b!=b)return!0}else for(;C>I;I++)if((c||I in g)&&g[I]===d)return c||I||0;return!c&&-1}};n.exports={includes:a(!0),indexOf:a(!1)}},2092:(n,i,e)=>{var t=e(9974),r=e(1702),o=e(8361),a=e(7908),c=e(6244),u=e(5417),d=r([].push),v=function(b){var g=b==1,C=b==2,I=b==3,_=b==4,w=b==6,T=b==7,z=b==5||w;return function(q,F,Z,V){for(var Q,le,O=a(q),j=o(O),re=t(F,Z),ke=c(j),S=0,P=V||u,G=g?P(q,ke):C||T?P(q,0):void 0;ke>S;S++)if((z||S in j)&&(Q=j[S],le=re(Q,S,O),b))if(g)G[S]=le;else if(le)switch(b){case 3:return!0;case 5:return Q;case 6:return S;case 2:d(G,Q)}else switch(b){case 4:return!1;case 7:d(G,Q)}return w?-1:I||_?_:G}};n.exports={forEach:v(0),map:v(1),filter:v(2),some:v(3),every:v(4),find:v(5),findIndex:v(6),filterReject:v(7)}},1194:(n,i,e)=>{var t=e(7293),r=e(5112),o=e(7392),a=r("species");n.exports=function(c){return o>=51||!t(function(){var u=[],d=u.constructor={};return d[a]=function(){return{foo:1}},u[c](Boolean).foo!==1})}},9341:(n,i,e)=>{var t=e(7293);n.exports=function(r,o){var a=[][r];return!!a&&t(function(){a.call(null,o||function(){return 1},1)})}},3658:(n,i,e)=>{var t=e(9781),r=e(3157),o=TypeError,a=Object.getOwnPropertyDescriptor,c=t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(u){return u instanceof TypeError}}();n.exports=c?function(u,d){if(r(u)&&!a(u,"length").writable)throw o("Cannot set read only .length");return u.length=d}:function(u,d){return u.length=d}},206:(n,i,e)=>{var t=e(1702);n.exports=t([].slice)},7475:(n,i,e)=>{var t=e(3157),r=e(4411),o=e(111),a=e(5112),c=a("species"),u=Array;n.exports=function(d){var v;return t(d)&&(v=d.constructor,r(v)&&(v===u||t(v.prototype))?v=void 0:o(v)&&(v=v[c],v===null&&(v=void 0))),v===void 0?u:v}},5417:(n,i,e)=>{var t=e(7475);n.exports=function(r,o){return new(t(r))(o===0?0:o)}},4326:(n,i,e)=>{var t=e(1702),r=t({}.toString),o=t("".slice);n.exports=function(a){return o(r(a),8,-1)}},648:(n,i,e)=>{var t=e(1694),r=e(614),o=e(4326),a=e(5112),c=a("toStringTag"),u=Object,d=o(function(){return arguments}())=="Arguments",v=function(b,g){try{return b[g]}catch{}};n.exports=t?o:function(b){var g,C,I;return b===void 0?"Undefined":b===null?"Null":typeof(C=v(g=u(b),c))=="string"?C:d?o(g):(I=o(g))=="Object"&&r(g.callee)?"Arguments":I}},9920:(n,i,e)=>{var t=e(2597),r=e(3887),o=e(1236),a=e(3070);n.exports=function(c,u,d){for(var v=r(u),b=a.f,g=o.f,C=0;C<v.length;C++){var I=v[C];t(c,I)||d&&t(d,I)||b(c,I,g(u,I))}}},4964:(n,i,e)=>{var t=e(5112),r=t("match");n.exports=function(o){var a=/./;try{"/./"[o](a)}catch{try{return a[r]=!1,"/./"[o](a)}catch{}}return!1}},8880:(n,i,e)=>{var t=e(9781),r=e(3070),o=e(9114);n.exports=t?function(a,c,u){return r.f(a,c,o(1,u))}:function(a,c,u){return a[c]=u,a}},9114:n=>{n.exports=function(i,e){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:e}}},6135:(n,i,e)=>{var t=e(4948),r=e(3070),o=e(9114);n.exports=function(a,c,u){var d=t(c);d in a?r.f(a,d,o(0,u)):a[d]=u}},8052:(n,i,e)=>{var t=e(614),r=e(3070),o=e(6339),a=e(3072);n.exports=function(c,u,d,v){v||(v={});var b=v.enumerable,g=v.name!==void 0?v.name:u;if(t(d)&&o(d,g,v),v.global)b?c[u]=d:a(u,d);else{try{v.unsafe?c[u]&&(b=!0):delete c[u]}catch{}b?c[u]=d:r.f(c,u,{value:d,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return c}},3072:(n,i,e)=>{var t=e(7854),r=Object.defineProperty;n.exports=function(o,a){try{r(t,o,{value:a,configurable:!0,writable:!0})}catch{t[o]=a}return a}},5117:(n,i,e)=>{var t=e(6330),r=TypeError;n.exports=function(o,a){if(!delete o[a])throw r("Cannot delete property "+t(a)+" of "+t(o))}},9781:(n,i,e)=>{var t=e(7293);n.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},317:(n,i,e)=>{var t=e(7854),r=e(111),o=t.document,a=r(o)&&r(o.createElement);n.exports=function(c){return a?o.createElement(c):{}}},7207:n=>{var i=TypeError,e=9007199254740991;n.exports=function(t){if(t>e)throw i("Maximum allowed index exceeded");return t}},8113:(n,i,e)=>{var t=e(5005);n.exports=t("navigator","userAgent")||""},7392:(n,i,e)=>{var t,r,o=e(7854),a=e(8113),c=o.process,u=o.Deno,d=c&&c.versions||u&&u.version,v=d&&d.v8;v&&(t=v.split("."),r=t[0]>0&&t[0]<4?1:+(t[0]+t[1])),!r&&a&&(t=a.match(/Edge\/(\d+)/),(!t||t[1]>=74)&&(t=a.match(/Chrome\/(\d+)/),t&&(r=+t[1]))),n.exports=r},748:n=>{n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7762:(n,i,e)=>{var t=e(9781),r=e(7293),o=e(9670),a=e(30),c=e(6277),u=Error.prototype.toString,d=r(function(){if(t){var v=a(Object.defineProperty({},"name",{get:function(){return this===v}}));if(u.call(v)!=="true")return!0}return u.call({message:1,name:2})!=="2: 1"||u.call({})!=="Error"});n.exports=d?function(){var v=o(this),b=c(v.name,"Error"),g=c(v.message);return b?g?b+": "+g:b:g}:u},2109:(n,i,e)=>{var t=e(7854),r=e(1236).f,o=e(8880),a=e(8052),c=e(3072),u=e(9920),d=e(4705);n.exports=function(v,b){var g,C,I,_,w,T,z=v.target,q=v.global,F=v.stat;if(C=q?t:F?t[z]||c(z,{}):(t[z]||{}).prototype,C)for(I in b){if(w=b[I],v.dontCallGetSet?(T=r(C,I),_=T&&T.value):_=C[I],g=d(q?I:z+(F?".":"#")+I,v.forced),!g&&_!==void 0){if(typeof w==typeof _)continue;u(w,_)}(v.sham||_&&_.sham)&&o(w,"sham",!0),a(C,I,w,v)}}},7293:n=>{n.exports=function(i){try{return!!i()}catch{return!0}}},2104:(n,i,e)=>{var t=e(4374),r=Function.prototype,o=r.apply,a=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(t?a.bind(o):function(){return a.apply(o,arguments)})},9974:(n,i,e)=>{var t=e(1702),r=e(9662),o=e(4374),a=t(t.bind);n.exports=function(c,u){return r(c),u===void 0?c:o?a(c,u):function(){return c.apply(u,arguments)}}},4374:(n,i,e)=>{var t=e(7293);n.exports=!t(function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")})},6916:(n,i,e)=>{var t=e(4374),r=Function.prototype.call;n.exports=t?r.bind(r):function(){return r.apply(r,arguments)}},6530:(n,i,e)=>{var t=e(9781),r=e(2597),o=Function.prototype,a=t&&Object.getOwnPropertyDescriptor,c=r(o,"name"),u=c&&(function(){}).name==="something",d=c&&(!t||t&&a(o,"name").configurable);n.exports={EXISTS:c,PROPER:u,CONFIGURABLE:d}},1702:(n,i,e)=>{var t=e(4374),r=Function.prototype,o=r.bind,a=r.call,c=t&&o.bind(a,a);n.exports=t?function(u){return u&&c(u)}:function(u){return u&&function(){return a.apply(u,arguments)}}},5005:(n,i,e)=>{var t=e(7854),r=e(614),o=function(a){return r(a)?a:void 0};n.exports=function(a,c){return arguments.length<2?o(t[a]):t[a]&&t[a][c]}},8173:(n,i,e)=>{var t=e(9662),r=e(8554);n.exports=function(o,a){var c=o[a];return r(c)?void 0:t(c)}},7854:(n,i,e)=>{var t=function(r){return r&&r.Math==Math&&r};n.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof e.g=="object"&&e.g)||function(){return this}()||Function("return this")()},2597:(n,i,e)=>{var t=e(1702),r=e(7908),o=t({}.hasOwnProperty);n.exports=Object.hasOwn||function(a,c){return o(r(a),c)}},3501:n=>{n.exports={}},490:(n,i,e)=>{var t=e(5005);n.exports=t("document","documentElement")},4664:(n,i,e)=>{var t=e(9781),r=e(7293),o=e(317);n.exports=!t&&!r(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})},8361:(n,i,e)=>{var t=e(1702),r=e(7293),o=e(4326),a=Object,c=t("".split);n.exports=r(function(){return!a("z").propertyIsEnumerable(0)})?function(u){return o(u)=="String"?c(u,""):a(u)}:a},9587:(n,i,e)=>{var t=e(614),r=e(111),o=e(7674);n.exports=function(a,c,u){var d,v;return o&&t(d=c.constructor)&&d!==u&&r(v=d.prototype)&&v!==u.prototype&&o(a,v),a}},2788:(n,i,e)=>{var t=e(1702),r=e(614),o=e(5465),a=t(Function.toString);r(o.inspectSource)||(o.inspectSource=function(c){return a(c)}),n.exports=o.inspectSource},9909:(n,i,e)=>{var t,r,o,a=e(4811),c=e(7854),u=e(1702),d=e(111),v=e(8880),b=e(2597),g=e(5465),C=e(6200),I=e(3501),_="Object already initialized",w=c.TypeError,T=c.WeakMap,z=function(O){return o(O)?r(O):t(O,{})},q=function(O){return function(j){var re;if(!d(j)||(re=r(j)).type!==O)throw w("Incompatible receiver, "+O+" required");return re}};if(a||g.state){var F=g.state||(g.state=new T),Z=u(F.get),V=u(F.has),Q=u(F.set);t=function(O,j){if(V(F,O))throw w(_);return j.facade=O,Q(F,O,j),j},r=function(O){return Z(F,O)||{}},o=function(O){return V(F,O)}}else{var le=C("state");I[le]=!0,t=function(O,j){if(b(O,le))throw w(_);return j.facade=O,v(O,le,j),j},r=function(O){return b(O,le)?O[le]:{}},o=function(O){return b(O,le)}}n.exports={set:t,get:r,has:o,enforce:z,getterFor:q}},3157:(n,i,e)=>{var t=e(4326);n.exports=Array.isArray||function(r){return t(r)=="Array"}},614:n=>{n.exports=function(i){return typeof i=="function"}},4411:(n,i,e)=>{var t=e(1702),r=e(7293),o=e(614),a=e(648),c=e(5005),u=e(2788),d=function(){},v=[],b=c("Reflect","construct"),g=/^\s*(?:class|function)\b/,C=t(g.exec),I=!g.exec(d),_=function(T){if(!o(T))return!1;try{return b(d,v,T),!0}catch{return!1}},w=function(T){if(!o(T))return!1;switch(a(T)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return I||!!C(g,u(T))}catch{return!0}};w.sham=!0,n.exports=!b||r(function(){var T;return _(_.call)||!_(Object)||!_(function(){T=!0})||T})?w:_},4705:(n,i,e)=>{var t=e(7293),r=e(614),o=/#|\.prototype\./,a=function(b,g){var C=u[c(b)];return C==v||C!=d&&(r(g)?t(g):!!g)},c=a.normalize=function(b){return String(b).replace(o,".").toLowerCase()},u=a.data={},d=a.NATIVE="N",v=a.POLYFILL="P";n.exports=a},8554:n=>{n.exports=function(i){return i==null}},111:(n,i,e)=>{var t=e(614),r=typeof document=="object"&&document.all,o=typeof r>"u"&&r!==void 0;n.exports=o?function(a){return typeof a=="object"?a!==null:t(a)||a===r}:function(a){return typeof a=="object"?a!==null:t(a)}},1913:n=>{n.exports=!1},7850:(n,i,e)=>{var t=e(111),r=e(4326),o=e(5112),a=o("match");n.exports=function(c){var u;return t(c)&&((u=c[a])!==void 0?!!u:r(c)=="RegExp")}},2190:(n,i,e)=>{var t=e(5005),r=e(614),o=e(7976),a=e(3307),c=Object;n.exports=a?function(u){return typeof u=="symbol"}:function(u){var d=t("Symbol");return r(d)&&o(d.prototype,c(u))}},6244:(n,i,e)=>{var t=e(7466);n.exports=function(r){return t(r.length)}},6339:(n,i,e)=>{var t=e(7293),r=e(614),o=e(2597),a=e(9781),c=e(6530).CONFIGURABLE,u=e(2788),d=e(9909),v=d.enforce,b=d.get,g=Object.defineProperty,C=a&&!t(function(){return g(function(){},"length",{value:8}).length!==8}),I=String(String).split("String"),_=n.exports=function(w,T,z){String(T).slice(0,7)==="Symbol("&&(T="["+String(T).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),z&&z.getter&&(T="get "+T),z&&z.setter&&(T="set "+T),(!o(w,"name")||c&&w.name!==T)&&(a?g(w,"name",{value:T,configurable:!0}):w.name=T),C&&z&&o(z,"arity")&&w.length!==z.arity&&g(w,"length",{value:z.arity});try{z&&o(z,"constructor")&&z.constructor?a&&g(w,"prototype",{writable:!1}):w.prototype&&(w.prototype=void 0)}catch{}var q=v(w);return o(q,"source")||(q.source=I.join(typeof T=="string"?T:"")),w};Function.prototype.toString=_(function(){return r(this)&&b(this).source||u(this)},"toString")},4758:n=>{var i=Math.ceil,e=Math.floor;n.exports=Math.trunc||function(t){var r=+t;return(r>0?e:i)(r)}},6277:(n,i,e)=>{var t=e(1340);n.exports=function(r,o){return r===void 0?arguments.length<2?"":o:t(r)}},3929:(n,i,e)=>{var t=e(7850),r=TypeError;n.exports=function(o){if(t(o))throw r("The method doesn't accept regular expressions");return o}},30:(n,i,e)=>{var t,r=e(9670),o=e(6048),a=e(748),c=e(3501),u=e(490),d=e(317),v=e(6200),b=">",g="<",C="prototype",I="script",_=v("IE_PROTO"),w=function(){},T=function(Z){return g+I+b+Z+g+"/"+I+b},z=function(Z){Z.write(T("")),Z.close();var V=Z.parentWindow.Object;return Z=null,V},q=function(){var Z,V=d("iframe"),Q="java"+I+":";return V.style.display="none",u.appendChild(V),V.src=String(Q),Z=V.contentWindow.document,Z.open(),Z.write(T("document.F=Object")),Z.close(),Z.F},F=function(){try{t=new ActiveXObject("htmlfile")}catch{}F=typeof document<"u"?document.domain&&t?z(t):q():z(t);for(var Z=a.length;Z--;)delete F[C][a[Z]];return F()};c[_]=!0,n.exports=Object.create||function(Z,V){var Q;return Z!==null?(w[C]=r(Z),Q=new w,w[C]=null,Q[_]=Z):Q=F(),V===void 0?Q:o.f(Q,V)}},6048:(n,i,e)=>{var t=e(9781),r=e(3353),o=e(3070),a=e(9670),c=e(5656),u=e(1956);i.f=t&&!r?Object.defineProperties:function(d,v){a(d);for(var b,g=c(v),C=u(v),I=C.length,_=0;I>_;)o.f(d,b=C[_++],g[b]);return d}},3070:(n,i,e)=>{var t=e(9781),r=e(4664),o=e(3353),a=e(9670),c=e(4948),u=TypeError,d=Object.defineProperty,v=Object.getOwnPropertyDescriptor,b="enumerable",g="configurable",C="writable";i.f=t?o?function(I,_,w){if(a(I),_=c(_),a(w),typeof I=="function"&&_==="prototype"&&"value"in w&&C in w&&!w[C]){var T=v(I,_);T&&T[C]&&(I[_]=w.value,w={configurable:g in w?w[g]:T[g],enumerable:b in w?w[b]:T[b],writable:!1})}return d(I,_,w)}:d:function(I,_,w){if(a(I),_=c(_),a(w),r)try{return d(I,_,w)}catch{}if("get"in w||"set"in w)throw u("Accessors not supported");return"value"in w&&(I[_]=w.value),I}},1236:(n,i,e)=>{var t=e(9781),r=e(6916),o=e(5296),a=e(9114),c=e(5656),u=e(4948),d=e(2597),v=e(4664),b=Object.getOwnPropertyDescriptor;i.f=t?b:function(g,C){if(g=c(g),C=u(C),v)try{return b(g,C)}catch{}if(d(g,C))return a(!r(o.f,g,C),g[C])}},8006:(n,i,e)=>{var t=e(6324),r=e(748),o=r.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(a){return t(a,o)}},5181:(n,i)=>{i.f=Object.getOwnPropertySymbols},7976:(n,i,e)=>{var t=e(1702);n.exports=t({}.isPrototypeOf)},6324:(n,i,e)=>{var t=e(1702),r=e(2597),o=e(5656),a=e(1318).indexOf,c=e(3501),u=t([].push);n.exports=function(d,v){var b,g=o(d),C=0,I=[];for(b in g)!r(c,b)&&r(g,b)&&u(I,b);for(;v.length>C;)r(g,b=v[C++])&&(~a(I,b)||u(I,b));return I}},1956:(n,i,e)=>{var t=e(6324),r=e(748);n.exports=Object.keys||function(o){return t(o,r)}},5296:(n,i)=>{var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,r=t&&!e.call({1:2},1);i.f=r?function(o){var a=t(this,o);return!!a&&a.enumerable}:e},7674:(n,i,e)=>{var t=e(1702),r=e(9670),o=e(6077);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a,c=!1,u={};try{a=t(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),a(u,[]),c=u instanceof Array}catch{}return function(d,v){return r(d),o(v),c?a(d,v):d.__proto__=v,d}}():void 0)},288:(n,i,e)=>{var t=e(1694),r=e(648);n.exports=t?{}.toString:function(){return"[object "+r(this)+"]"}},2140:(n,i,e)=>{var t=e(6916),r=e(614),o=e(111),a=TypeError;n.exports=function(c,u){var d,v;if(u==="string"&&r(d=c.toString)&&!o(v=t(d,c))||r(d=c.valueOf)&&!o(v=t(d,c))||u!=="string"&&r(d=c.toString)&&!o(v=t(d,c)))return v;throw a("Can't convert object to primitive value")}},3887:(n,i,e)=>{var t=e(5005),r=e(1702),o=e(8006),a=e(5181),c=e(9670),u=r([].concat);n.exports=t("Reflect","ownKeys")||function(d){var v=o.f(c(d)),b=a.f;return b?u(v,b(d)):v}},7066:(n,i,e)=>{var t=e(9670);n.exports=function(){var r=t(this),o="";return r.hasIndices&&(o+="d"),r.global&&(o+="g"),r.ignoreCase&&(o+="i"),r.multiline&&(o+="m"),r.dotAll&&(o+="s"),r.unicode&&(o+="u"),r.unicodeSets&&(o+="v"),r.sticky&&(o+="y"),o}},4706:(n,i,e)=>{var t=e(6916),r=e(2597),o=e(7976),a=e(7066),c=RegExp.prototype;n.exports=function(u){var d=u.flags;return d!==void 0||"flags"in c||r(u,"flags")||!o(c,u)?d:t(a,u)}},4488:(n,i,e)=>{var t=e(8554),r=TypeError;n.exports=function(o){if(t(o))throw r("Can't call method on "+o);return o}},7152:(n,i,e)=>{var t=e(7854),r=e(2104),o=e(614),a=e(8113),c=e(206),u=e(8053),d=/MSIE .\./.test(a),v=t.Function,b=function(g){return d?function(C,I){var _=u(arguments.length,1)>2,w=o(C)?C:v(C),T=_?c(arguments,2):void 0;return g(_?function(){r(w,this,T)}:w,I)}:g};n.exports={setTimeout:b(t.setTimeout),setInterval:b(t.setInterval)}},6200:(n,i,e)=>{var t=e(2309),r=e(9711),o=t("keys");n.exports=function(a){return o[a]||(o[a]=r(a))}},5465:(n,i,e)=>{var t=e(7854),r=e(3072),o="__core-js_shared__",a=t[o]||r(o,{});n.exports=a},2309:(n,i,e)=>{var t=e(1913),r=e(5465);(n.exports=function(o,a){return r[o]||(r[o]=a!==void 0?a:{})})("versions",[]).push({version:"3.25.0",mode:t?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.0/LICENSE",source:"https://github.com/zloirock/core-js"})},3111:(n,i,e)=>{var t=e(1702),r=e(4488),o=e(1340),a=e(1361),c=t("".replace),u="["+a+"]",d=RegExp("^"+u+u+"*"),v=RegExp(u+u+"*$"),b=function(g){return function(C){var I=o(r(C));return 1&g&&(I=c(I,d,"")),2&g&&(I=c(I,v,"")),I}};n.exports={start:b(1),end:b(2),trim:b(3)}},6293:(n,i,e)=>{var t=e(7392),r=e(7293);n.exports=!!Object.getOwnPropertySymbols&&!r(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&t&&t<41})},863:(n,i,e)=>{var t=e(1702);n.exports=t(1 .valueOf)},1400:(n,i,e)=>{var t=e(9303),r=Math.max,o=Math.min;n.exports=function(a,c){var u=t(a);return u<0?r(u+c,0):o(u,c)}},5656:(n,i,e)=>{var t=e(8361),r=e(4488);n.exports=function(o){return t(r(o))}},9303:(n,i,e)=>{var t=e(4758);n.exports=function(r){var o=+r;return o!==o||o===0?0:t(o)}},7466:(n,i,e)=>{var t=e(9303),r=Math.min;n.exports=function(o){return o>0?r(t(o),9007199254740991):0}},7908:(n,i,e)=>{var t=e(4488),r=Object;n.exports=function(o){return r(t(o))}},7593:(n,i,e)=>{var t=e(6916),r=e(111),o=e(2190),a=e(8173),c=e(2140),u=e(5112),d=TypeError,v=u("toPrimitive");n.exports=function(b,g){if(!r(b)||o(b))return b;var C,I=a(b,v);if(I){if(g===void 0&&(g="default"),C=t(I,b,g),!r(C)||o(C))return C;throw d("Can't convert object to primitive value")}return g===void 0&&(g="number"),c(b,g)}},4948:(n,i,e)=>{var t=e(7593),r=e(2190);n.exports=function(o){var a=t(o,"string");return r(a)?a:a+""}},1694:(n,i,e)=>{var t=e(5112),r=t("toStringTag"),o={};o[r]="z",n.exports=String(o)==="[object z]"},1340:(n,i,e)=>{var t=e(648),r=String;n.exports=function(o){if(t(o)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return r(o)}},6330:n=>{var i=String;n.exports=function(e){try{return i(e)}catch{return"Object"}}},9711:(n,i,e)=>{var t=e(1702),r=0,o=Math.random(),a=t(1 .toString);n.exports=function(c){return"Symbol("+(c===void 0?"":c)+")_"+a(++r+o,36)}},3307:(n,i,e)=>{var t=e(6293);n.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},3353:(n,i,e)=>{var t=e(9781),r=e(7293);n.exports=t&&r(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},8053:n=>{var i=TypeError;n.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},4811:(n,i,e)=>{var t=e(7854),r=e(614),o=t.WeakMap;n.exports=r(o)&&/native code/.test(String(o))},5112:(n,i,e)=>{var t=e(7854),r=e(2309),o=e(2597),a=e(9711),c=e(6293),u=e(3307),d=r("wks"),v=t.Symbol,b=v&&v.for,g=u?v:v&&v.withoutSetter||a;n.exports=function(C){if(!o(d,C)||!c&&typeof d[C]!="string"){var I="Symbol."+C;c&&o(v,C)?d[C]=v[C]:d[C]=u&&b?b(I):g(I)}return d[C]}},1361:n=>{n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},9554:(n,i,e)=>{var t=e(2109),r=e(8533);t({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},6699:(n,i,e)=>{var t=e(2109),r=e(1318).includes,o=e(7293),a=e(1223),c=o(function(){return!Array(1).includes()});t({target:"Array",proto:!0,forced:c},{includes:function(u){return r(this,u,arguments.length>1?arguments[1]:void 0)}}),a("includes")},2772:(n,i,e)=>{var t=e(2109),r=e(1702),o=e(1318).indexOf,a=e(9341),c=r([].indexOf),u=!!c&&1/c([1],1,-0)<0,d=a("indexOf");t({target:"Array",proto:!0,forced:u||!d},{indexOf:function(v){var b=arguments.length>1?arguments[1]:void 0;return u?c(this,v,b)||0:o(this,v,b)}})},561:(n,i,e)=>{var t=e(2109),r=e(7908),o=e(1400),a=e(9303),c=e(6244),u=e(3658),d=e(7207),v=e(5417),b=e(6135),g=e(5117),C=e(1194),I=C("splice"),_=Math.max,w=Math.min;t({target:"Array",proto:!0,forced:!I},{splice:function(T,z){var q,F,Z,V,Q,le,O=r(this),j=c(O),re=o(T,j),ke=arguments.length;for(ke===0?q=F=0:ke===1?(q=0,F=j-re):(q=ke-2,F=w(_(a(z),0),j-re)),d(j+q-F),Z=v(O,F),V=0;V<F;V++)Q=re+V,Q in O&&b(Z,V,O[Q]);if(Z.length=F,q<F){for(V=re;V<j-F;V++)Q=V+F,le=V+q,Q in O?O[le]=O[Q]:g(O,le);for(V=j;V>j-F+q;V--)g(O,V-1)}else if(q>F)for(V=j-F;V>re;V--)Q=V+F-1,le=V+q-1,Q in O?O[le]=O[Q]:g(O,le);for(V=0;V<q;V++)O[V+re]=arguments[V+2];return u(O,j-F+q),Z}})},3710:(n,i,e)=>{var t=e(1702),r=e(8052),o=Date.prototype,a="Invalid Date",c="toString",u=t(o[c]),d=t(o.getTime);String(new Date(NaN))!=a&&r(o,c,function(){var v=d(this);return v===v?u(this):a})},6647:(n,i,e)=>{var t=e(8052),r=e(7762),o=Error.prototype;o.toString!==r&&t(o,"toString",r)},9653:(n,i,e)=>{var t=e(9781),r=e(7854),o=e(1702),a=e(4705),c=e(8052),u=e(2597),d=e(9587),v=e(7976),b=e(2190),g=e(7593),C=e(7293),I=e(8006).f,_=e(1236).f,w=e(3070).f,T=e(863),z=e(3111).trim,q="Number",F=r[q],Z=F.prototype,V=r.TypeError,Q=o("".slice),le=o("".charCodeAt),O=function(G){var X=g(G,"number");return typeof X=="bigint"?X:j(X)},j=function(G){var X,K,be,Ee,he,Oe,Be,ct,Se=g(G,"number");if(b(Se))throw V("Cannot convert a Symbol value to a number");if(typeof Se=="string"&&Se.length>2){if(Se=z(Se),X=le(Se,0),X===43||X===45){if(K=le(Se,2),K===88||K===120)return NaN}else if(X===48){switch(le(Se,1)){case 66:case 98:be=2,Ee=49;break;case 79:case 111:be=8,Ee=55;break;default:return+Se}for(he=Q(Se,2),Oe=he.length,Be=0;Be<Oe;Be++)if(ct=le(he,Be),ct<48||ct>Ee)return NaN;return parseInt(he,be)}}return+Se};if(a(q,!F(" 0o1")||!F("0b1")||F("+0x1"))){for(var re,ke=function(G){var X=arguments.length<1?0:F(O(G)),K=this;return v(Z,K)&&C(function(){T(K)})?d(Object(X),K,ke):X},S=t?I(F):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),P=0;S.length>P;P++)u(F,re=S[P])&&!u(ke,re)&&w(ke,re,_(F,re));ke.prototype=Z,Z.constructor=ke,c(r,q,ke,{constructor:!0})}},1539:(n,i,e)=>{var t=e(1694),r=e(8052),o=e(288);t||r(Object.prototype,"toString",o,{unsafe:!0})},9714:(n,i,e)=>{var t=e(6530).PROPER,r=e(8052),o=e(9670),a=e(1340),c=e(7293),u=e(4706),d="toString",v=RegExp.prototype,b=v[d],g=c(function(){return b.call({source:"a",flags:"b"})!="/a/b"}),C=t&&b.name!=d;(g||C)&&r(RegExp.prototype,d,function(){var I=o(this),_=a(I.source),w=a(u(I));return"/"+_+"/"+w},{unsafe:!0})},2023:(n,i,e)=>{var t=e(2109),r=e(1702),o=e(3929),a=e(4488),c=e(1340),u=e(4964),d=r("".indexOf);t({target:"String",proto:!0,forced:!u("includes")},{includes:function(v){return!!~d(c(a(this)),c(o(v)),arguments.length>1?arguments[1]:void 0)}})},6815:(n,i,e)=>{var t=e(2109),r=e(7854),o=e(7152).setInterval;t({global:!0,bind:!0,forced:r.setInterval!==o},{setInterval:o})},8417:(n,i,e)=>{var t=e(2109),r=e(7854),o=e(7152).setTimeout;t({global:!0,bind:!0,forced:r.setTimeout!==o},{setTimeout:o})},2564:(n,i,e)=>{e(6815),e(8417)},3744:(n,i)=>{i.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[o,a]of t)r[o]=a;return r}},7203:n=>{n.exports=l}},y={};function h(n){var i=y[n];if(i!==void 0)return i.exports;var e=y[n]={exports:{}};return f[n](e,e.exports,h),e.exports}h.d=(n,i)=>{for(var e in i)h.o(i,e)&&!h.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},h.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),h.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),h.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},h.p="";var k={};return(()=>{if(h.r(k),h.d(k,{ContextMenu:()=>Cn,ContextMenuGroup:()=>wn,ContextMenuItem:()=>ht,ContextMenuSeparator:()=>ue,MenuBar:()=>So,default:()=>Mo}),typeof window<"u"){var n=window.document.currentScript,i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(h.p=i[1])}var e=h(7203),t=null;function r(m){t&&a(),t=m}function o(m){m===t&&(t=null)}function a(){t&&(t.closeMenu(),t=null)}h(6647),h(3710),h(1539),h(9714);var c={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultAdjustPadding:{x:0,y:10}};function u(m,M){var $=m.offsetTop;return m.offsetParent!=null&&m.offsetParent!=M&&($-=m.offsetParent.scrollTop,$+=u(m.offsetParent,M)),$}function d(m,M){var $=m.offsetLeft;return m.offsetParent!=null&&m.offsetParent!=M&&($-=m.offsetParent.scrollLeft,$+=d(m.offsetParent,M)),$}function v(m,M,$,U){return{x:d(m,U)+M,y:u(m,U)+$}}var b="mx-menu-default-container",g="mx-menu-container-",C=0;function I(m){var M=m.getContainer,$=m.zIndex;if(M){var U=typeof M=="function"?M():M;if(U){var pe=U.getAttribute("id");return pe||(pe=g+C++,U.setAttribute("id",pe)),U.style.zIndex=($==null?void 0:$.toString())||c.defaultZindex.toString(),{eleId:pe,container:U,isNew:!1}}}var ge=document.getElementById(b);return ge||(ge=document.createElement("div"),ge.setAttribute("id",b),ge.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(ge)),ge.style.zIndex=($==null?void 0:$.toString())||c.defaultZindex.toString(),{eleId:b,container:ge,isNew:!0}}function _(m){return typeof m=="number"?"".concat(m,"px"):m}var w=(0,e.defineComponent)({props:{vnode:{type:[Object,Function],default:null},data:{type:Object,default:null}},setup:function(m){var M=(0,e.toRefs)(m),$=M.vnode,U=M.data;return function(){return typeof $.value=="function"?$.value(U.value):$.value}}});function T(m,M,$){return M in m?Object.defineProperty(m,M,{value:$,enumerable:!0,configurable:!0,writable:!0}):m[M]=$,m}function z(m,M){var $=Object.keys(m);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(m);M&&(U=U.filter(function(pe){return Object.getOwnPropertyDescriptor(m,pe).enumerable})),$.push.apply($,U)}return $}function q(m){for(var M=1;M<arguments.length;M++){var $=arguments[M]!=null?arguments[M]:{};M%2?z(Object($),!0).forEach(function(U){T(m,U,$[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors($)):z(Object($)).forEach(function(U){Object.defineProperty(m,U,Object.getOwnPropertyDescriptor($,U))})}return m}h(2564);var F={class:"mx-context-menu-scroll",ref:"scroll"};function Z(m,M,$,U,pe,ge){var oe=(0,e.resolveComponent)("ContextMenuSeparator"),ee=(0,e.resolveComponent)("ContextSubMenu",!0),ce=(0,e.resolveComponent)("ContextMenuItem"),Ie=(0,e.resolveComponent)("ContextMenuIconRight");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)("mx-context-menu "+(m.options.customClass?m.options.customClass:"")+" "+m.globalTheme),style:(0,e.normalizeStyle)({maxWidth:m.maxWidth?m.solveNumberOrStringSize(m.maxWidth):"".concat(m.constOptions.defaultMaxWidth,"px"),minWidth:m.minWidth?m.solveNumberOrStringSize(m.minWidth):"".concat(m.constOptions.defaultMinWidth,"px"),maxHeight:m.overflow&&m.maxHeight>0?"".concat(m.maxHeight,"px"):void 0,zIndex:m.zIndex,left:"".concat(m.position.x,"px"),top:"".concat(m.position.y,"px")}),"data-type":"ContextSubMenu",onClick:M[2]||(M[2]=function(){return m.onSubMenuBodyClick&&m.onSubMenuBodyClick.apply(m,arguments)})},[(0,e.createElementVNode)("div",{class:"mx-context-menu-items",ref:"menu",style:(0,e.normalizeStyle)({top:"".concat(m.scrollValue,"px")})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.items,function(D,Ce){return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:Ce},[D.hidden!==!0&&D.divided==="up"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0})):(0,e.createCommentVNode)("",!0),D.hidden!==!0&&D.divided==="self"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:1})):((0,e.openBlock)(),(0,e.createBlock)(ce,{key:2,clickHandler:D.onClick?function($e){return D.onClick($e)}:void 0,disabled:D.disabled,hidden:D.hidden,icon:D.icon,iconFontClass:D.iconFontClass,svgIcon:D.svgIcon,svgProps:D.svgProps,label:D.label,customRender:D.customRender,customClass:D.customClass,checked:D.checked,shortcut:D.shortcut,clickClose:D.clickClose,clickableWhenHasChildren:D.clickableWhenHasChildren,preserveIconWidth:D.preserveIconWidth!==void 0?D.preserveIconWidth:m.options.preserveIconWidth,showRightArrow:D.children&&D.children.length>0,hasChildren:D.children&&D.children.length>0,rawMenuItem:D,onSubMenuOpen:D.onSubMenuOpen,onSubMenuClose:D.onSubMenuClose},(0,e.createSlots)({_:2},[D.children&&D.children.length>0?{name:"submenu",fn:(0,e.withCtx)(function(){return[(0,e.createVNode)(ee,{items:D.children,maxWidth:D.maxWidth,minWidth:D.minWidth,adjustPosition:D.adjustSubMenuPosition!==void 0?D.adjustSubMenuPosition:m.options.adjustPosition,direction:D.direction!==void 0?D.direction:m.options.direction},null,8,["items","maxWidth","minWidth","adjustPosition","direction"])]}),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),D.hidden===!0||D.divided!=="down"&&D.divided!==!0?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createBlock)(oe,{key:3}))],64)}),128))]})],4),(0,e.createElementVNode)("div",F,[(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable up",onClick:M[0]||(M[0]=function(D){return m.onScroll(!1)})},[(0,e.createVNode)(Ie)],512),[[e.vShow,m.overflow&&m.scrollValue<0]]),(0,e.withDirectives)((0,e.createElementVNode)("div",{class:"mx-context-menu-updown mx-context-no-clickable down",onClick:M[1]||(M[1]=function(D){return m.onScroll(!0)})},[(0,e.createVNode)(Ie)],512),[[e.vShow,m.overflow&&m.scrollValue>-m.scrollHeight]])],512)],6)}h(9653),h(2772),h(9554),h(561),h(6699),h(2023);var V={key:0,class:"mx-context-menu-item-wrapper",ref:"menuItemRef","data-type":"ContextMenuItem"},Q={class:"mx-item-row"},le=["xlink:href"],O={key:1,class:"label"},j={class:"mx-item-row"},re={class:"mx-shortcut"};function ke(m,M,$,U,pe,ge){var oe=(0,e.resolveComponent)("VNodeRender"),ee=(0,e.resolveComponent)("ContextMenuIconCheck"),ce=(0,e.resolveComponent)("ContextMenuIconRight");return m.hidden?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",V,[m.globalHasSlot("itemRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemRender",m.getItemDataForChildren())}},null,8,["vnode"])):m.customRender?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:1,vnode:m.customRender,data:m.getItemDataForChildren()},null,8,["vnode","data"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:(0,e.normalizeClass)(["mx-context-menu-item",m.disabled?"disabled":"",m.keyBoardFocusMenu?"keyboard-focus":"",m.customClass?" "+m.customClass:"",m.showSubMenu?"open":""]),onClick:M[0]||(M[0]=function(){return m.onClick&&m.onClick.apply(m,arguments)}),onMouseenter:M[1]||(M[1]=function(){return m.onMouseEnter&&m.onMouseEnter.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"default",{},function(){return[(0,e.createElementVNode)("div",Q,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["mx-icon-placeholder",m.preserveIconWidth?"preserve-width":""])},[(0,e.renderSlot)(m.$slots,"icon",{},function(){return[m.globalHasSlot("itemIconRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemIconRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.svgIcon=="string"&&m.svgIcon?((0,e.openBlock)(),(0,e.createElementBlock)("svg",(0,e.mergeProps)({key:1,class:"icon svg"},m.svgProps),[(0,e.createElementVNode)("use",{"xlink:href":m.svgIcon},null,8,le)],16)):typeof m.icon!="string"?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:2,vnode:m.icon,data:m.icon},null,8,["vnode","data"])):typeof m.icon=="string"&&m.icon!==""?((0,e.openBlock)(),(0,e.createElementBlock)("i",{key:3,class:(0,e.normalizeClass)(m.icon+" icon "+m.iconFontClass+" "+m.globalIconFontClass)},null,2)):(0,e.createCommentVNode)("",!0)]}),m.checked?(0,e.renderSlot)(m.$slots,"check",{key:0},function(){return[m.globalHasSlot("itemCheckRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemCheckRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(ee)]}):(0,e.createCommentVNode)("",!0)],2),(0,e.renderSlot)(m.$slots,"label",{},function(){return[m.globalHasSlot("itemLabelRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemLabelRender",m.getItemDataForChildren())}},null,8,["vnode"])):typeof m.label=="string"?((0,e.openBlock)(),(0,e.createElementBlock)("span",O,(0,e.toDisplayString)(m.label),1)):((0,e.openBlock)(),(0,e.createBlock)(oe,{key:2,vnode:m.label,data:m.label},null,8,["vnode","data"]))]})]),(0,e.createElementVNode)("div",j,[m.shortcut?(0,e.renderSlot)(m.$slots,"shortcut",{key:0},function(){return[m.globalHasSlot("itemShortcutRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemShortcutRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createElementVNode)("span",re,(0,e.toDisplayString)(m.shortcut),1)]}):(0,e.createCommentVNode)("",!0),m.showRightArrow?(0,e.renderSlot)(m.$slots,"rightArrow",{key:1},function(){return[m.globalHasSlot("itemRightArrowRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("itemRightArrowRender",m.getItemDataForChildren())}},null,8,["vnode"])):(0,e.createCommentVNode)("",!0),(0,e.createVNode)(ce)]}):(0,e.createCommentVNode)("",!0)])]})],34)),m.showSubMenu?(0,e.renderSlot)(m.$slots,"submenu",{key:3}):(0,e.createCommentVNode)("",!0)],512))}var S={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},P=(0,e.createElementVNode)("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),G=[P];function X(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",S,G)}var K=h(3744);const be={},Ee=(0,K.Z)(be,[["render",X]]),he=Ee;var Oe={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Be=(0,e.createElementVNode)("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),ct=[Be];function Se(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",Oe,ct)}const Ye={},Et=(0,K.Z)(Ye,[["render",Se]]),jt=Et,Ot=(0,e.defineComponent)({name:"ContextMenuItem",components:{VNodeRender:w,ContextMenuIconCheck:he,ContextMenuIconRight:jt},props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup:function(m,M){var $=(0,e.toRefs)(m),U=$.clickHandler,pe=$.clickClose,ge=$.clickableWhenHasChildren,oe=$.disabled,ee=$.hidden,ce=$.label,Ie=$.icon,D=$.iconFontClass,Ce=$.showRightArrow,$e=$.shortcut,Ve=$.hasChildren,Ne=(0,e.ref)(!1),te=(0,e.ref)(!1),se=(0,e.ref)(),je=(0,e.inject)("globalHasSlot"),De=(0,e.inject)("globalRenderSlot"),dt=(0,e.inject)("globalTheme"),de=(0,e.inject)("globalIconFontClass"),Fe=(0,e.inject)("globalClickCloseClassName"),Ze=(0,e.inject)("globalIgnoreClickClassName"),Je=(0,e.inject)("globalCloseMenu"),Re=(0,e.inject)("menuContext"),We={showSubMenu:function(){return Ne.value?(Re.markActiveMenuItem(We,!0),!0):!!Ve.value&&(Ke(),!0)},isDisabledOrHidden:function(){return oe.value||ee.value},getElement:function(){return se.value},focus:function(){return te.value=!0},blur:function(){return te.value=!1},click:He};function He(Le){if(!oe.value){if(Le){var Ae=Le.target;if(Ae.classList.contains("mx-context-no-clickable")||Ze&&Ae.classList.contains(Ze))return;if(Fe&&Ae.classList.contains(Fe))return Le.stopPropagation(),void Je(m.rawMenuItem)}Ve.value?ge.value?(typeof U.value=="function"&&U.value(Le),M.emit("click",Le)):Ne.value||Ke():(typeof U.value=="function"&&U.value(Le),M.emit("click",Le),pe.value&&Je(m.rawMenuItem))}}function Ke(Le){te.value=!1,Re.checkCloseOtherSubMenuTimeOut()||Re.closeOtherSubMenu(),oe.value||(Re.markActiveMenuItem(We),Ve.value&&(Le||Re.markThisOpenedByKeyBoard(),Re.addOpenedSubMenu(function(){te.value=!1,Ne.value=!1,M.emit("subMenuClose")}),Ne.value=!0,M.emit("subMenuOpen")))}return(0,e.onMounted)(function(){Re.isMenuItemDataCollectedFlag()?(0,e.nextTick)(function(){var Le=0,Ae=Re.getElement();if(Ae)for(var Me=0,qe=0;qe<Ae.children.length;qe++){var H=Ae.children[qe];if(H.getAttribute("data-type")==="ContextMenuItem"){if(H===se.value){Le=Me;break}Me++}}Re.addChildMenuItem(We,Le)}):Re.addChildMenuItem(We)}),(0,e.onBeforeUnmount)(function(){Re.removeChildMenuItem(We)}),{getItemDataForChildren:function(){return{disabled:oe.value,label:ce.value,icon:Ie.value,iconFontClass:D.value,showRightArrow:Ce.value,clickClose:pe.value,clickableWhenHasChildren:ge.value,shortcut:$e.value,theme:dt,isOpen:Ne,hasChildren:Ve,onClick:He,onMouseEnter:Ke,closeMenu:Je}},showSubMenu:Ne,keyBoardFocusMenu:te,menuItemRef:se,globalHasSlot:je,globalRenderSlot:De,globalIconFontClass:de,onMouseEnter:Ke,onClick:He}}}),Pt=(0,K.Z)(Ot,[["render",ke]]),ht=Pt;var Wt={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function Ht(m,M,$,U,pe,ge){var oe=(0,e.resolveComponent)("VNodeRender");return m.globalHasSlot("separatorRender")?((0,e.openBlock)(),(0,e.createBlock)(oe,{key:0,vnode:function(){return m.globalRenderSlot("separatorRender",{})}},null,8,["vnode"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",Wt))}const Y=(0,e.defineComponent)({name:"ContextMenuSperator",components:{VNodeRender:w},setup:function(){var m=(0,e.inject)("globalHasSlot"),M=(0,e.inject)("globalRenderSlot");return{globalHasSlot:m,globalRenderSlot:M}}}),N=(0,K.Z)(Y,[["render",Ht]]),ue=N,Te=(0,e.defineComponent)({name:"ContextSubMenu",components:{ContextMenuItem:ht,ContextMenuSeparator:ue,ContextMenuIconRight:jt},props:{items:{type:Object,default:null},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"}},setup:function(m){var M=(0,e.inject)("menuContext"),$=(0,e.inject)("globalOptions"),U=(0,e.inject)("globalHasSlot"),pe=(0,e.inject)("globalRenderSlot"),ge=(0,e.inject)("globalTheme"),oe=M.zIndex,ee=M.getParentWidth,ce=M.getParentHeight,Ie=(0,e.toRefs)(m),D=Ie.adjustPosition,Ce=(0,e.ref)(),$e=(0,e.ref)(),Ve=[],Ne=(0,e.inject)("globalSetCurrentSubMenu"),te=[],se=null,je=0;function De(){se&&se.blur()}function dt(H,_e){if(H){for(var Qe=_e!==void 0?_e:0;Qe<te.length;Qe++)if(!te[Qe].isDisabledOrHidden()){de(Qe);break}}else for(var ft=_e!==void 0?_e:te.length-1;ft>=0;ft--)if(!te[ft].isDisabledOrHidden()){de(ft);break}}function de(H){if(se&&De(),H!==void 0&&(se=te[Math.max(0,Math.min(H,te.length-1))]),se&&(se.focus(),Ae.value)){var _e=se.getElement();_e&&(He.value=Math.min(Math.max(-Ke.value,-_e.offsetTop-_e.offsetHeight+qe.value),0))}}function Fe(){Ne(Ze)}var Ze={isTopLevel:function(){return M.getParentContext()===null},closeSelfAndActiveParent:function(){var H=We.getParentContext();if(H){H.closeOtherSubMenu();var _e=H.getSubMenuInstanceContext();if(_e)return _e.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:function(){var H;return(H=We.getParentContext())===null||H===void 0?void 0:H.closeOtherSubMenu()},moveCurrentItemFirst:function(){return dt(!0)},moveCurrentItemLast:function(){return dt(!1)},moveCurrentItemDown:function(){return dt(!0,se?te.indexOf(se)+1:0)},moveCurrentItemUp:function(){return dt(!1,se?te.indexOf(se)-1:0)},focusCurrentItem:function(){return de()},openCurrentItemSubMenu:function(){var H;return!!se&&((H=se)===null||H===void 0?void 0:H.showSubMenu())},triggerCurrentItemClick:function(H){var _e;return(_e=se)===null||_e===void 0?void 0:_e.click(H)}},Je=!1,Re=!1,We={zIndex:oe+1,container:M.container,adjustPadding:$.adjustPadding||c.defaultAdjustPadding,getParentWidth:function(){var H;return((H=Ce.value)===null||H===void 0?void 0:H.offsetWidth)||0},getParentHeight:function(){var H;return((H=Ce.value)===null||H===void 0?void 0:H.offsetHeight)||0},getParentX:function(){return Me.value.x},getParentY:function(){return Me.value.y},getParentAbsX:function(){return Ce.value?d(Ce.value,M.container):0},getParentAbsY:function(){return Ce.value?u(Ce.value,M.container):0},getPositon:function(){return[0,0]},addOpenedSubMenu:function(H){Ve.push(H)},closeOtherSubMenu:function(){Ve.forEach(function(H){return H()}),Ve.splice(0,Ve.length),Ne(Ze)},checkCloseOtherSubMenuTimeOut:function(){return!!je&&(clearTimeout(je),je=0,!0)},closeOtherSubMenuWithTimeOut:function(){var H=this;je=setTimeout(function(){je=0,H.closeOtherSubMenu()},200)},addChildMenuItem:function(H,_e){_e===void 0?te.push(H):te.splice(_e,0,H)},removeChildMenuItem:function(H){te.splice(te.indexOf(H),1)},markActiveMenuItem:function(H){var _e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];De(),se=H,_e&&de()},markThisOpenedByKeyBoard:function(){Je=!0},isOpenedByKeyBoardFlag:function(){return!!Je&&(Je=!1,!0)},isMenuItemDataCollectedFlag:function(){return Re},getElement:function(){return Ce.value||null},getParentContext:function(){return M},getSubMenuInstanceContext:function(){return Ze}};(0,e.provide)("menuContext",We);var He=(0,e.ref)(0),Ke=(0,e.ref)(0);function Le(H){He.value=H?Math.max(He.value-50,-Ke.value):Math.min(He.value+50,0)}var Ae=(0,e.ref)(!1),Me=(0,e.ref)({x:0,y:0}),qe=(0,e.ref)(0);return(0,e.onMounted)(function(){var H,_e,Qe,ft,In=M.getPositon();Me.value={x:(H=(_e=In[0])!==null&&_e!==void 0?_e:$.xOffset)!==null&&H!==void 0?H:0,y:(Qe=(ft=In[1])!==null&&ft!==void 0?ft:$.yOffset)!==null&&Qe!==void 0?Qe:0},Ne(Ze),(0,e.nextTick)(function(){var Pe=Ce.value;if(Pe&&$e.value){var Yt,Zt,Jt,Qt,en,tn,xt=M.container,nn=(Yt=ee==null?void 0:ee())!==null&&Yt!==void 0?Yt:0,Eo=(Zt=ce==null?void 0:ce())!==null&&Zt!==void 0?Zt:0,zt=typeof M.adjustPadding=="number"?M.adjustPadding:(Jt=(Qt=M.adjustPadding)===null||Qt===void 0?void 0:Qt.x)!==null&&Jt!==void 0?Jt:0,At=typeof M.adjustPadding=="number"?M.adjustPadding:(en=(tn=M.adjustPadding)===null||tn===void 0?void 0:tn.y)!==null&&en!==void 0?en:0,Dt=Eo>0?At:0,Oo=document.documentElement.scrollHeight,To=document.documentElement.scrollWidth,$o=Math.min(To,xt.offsetWidth),on=Math.min(Oo,xt.offsetHeight),rn=d(Pe,xt),sn=u(Pe,xt);m.direction.includes("l")?Me.value.x-=Pe.offsetWidth+zt:m.direction.includes("r")?Me.value.x+=nn+zt:(Me.value.x+=nn/2,Me.value.x-=(Pe.offsetWidth+zt)/2),m.direction.includes("t")?Me.value.y-=Pe.offsetHeight+2*At:m.direction.includes("b")?Me.value.y-=At:Me.value.y-=(Pe.offsetHeight+At)/2,D.value&&(0,e.nextTick)(function(){rn=d(Pe,xt),sn=u(Pe,xt);var Ro=rn+Pe.offsetWidth-$o,Mn=sn+Pe.offsetHeight-on;if(Ke.value=Pe.offsetHeight-on-2*Dt,Ae.value=Mn>0,Ro>0){var En=nn+Pe.offsetWidth-zt,On=rn;Me.value.x-=En>On?On:En}if(Ae.value){var Tn=Mn,$n=sn;Me.value.y-=Tn>$n?$n-Dt:Tn-2*Dt,qe.value=on-2*Dt}else qe.value=0})}Pe==null||Pe.focus({preventScroll:!0}),M.isOpenedByKeyBoardFlag()&&dt(!0),Re=!0})}),{menu:Ce,scroll:$e,options:$,zIndex:oe,constOptions:c,scrollValue:He,overflow:Ae,position:Me,scrollHeight:Ke,maxHeight:qe,globalHasSlot:U,globalRenderSlot:pe,globalTheme:ge,onScroll:Le,onSubMenuBodyClick:Fe,solveNumberOrStringSize:_}}}),we=(0,K.Z)(Te,[["render",Z]]),Tt=we,Gt=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},setup:function(m,M){var $,U,pe,ge,oe=(0,e.toRefs)(m),ee=oe.options,ce=oe.show,Ie=oe.container;(0,e.onMounted)(function(){ce&&Ce()}),(0,e.onBeforeUnmount)(function(){Ne()}),(0,e.watch)(ce,function(de){de?Ce():Ne()});var D={closeMenu:$e};function Ce(){Ve(),r(D)}function $e(de){M.emit("update:show",!1),M.emit("close",de),o(D)}function Ve(){setTimeout(function(){document.addEventListener("click",De,!0),document.addEventListener("contextmenu",De,!0),document.addEventListener("scroll",je,!0),!m.isFullScreenContainer&&Ie.value&&Ie.value.addEventListener("scroll",je,!0),ee.value.keyboardControl!==!1&&document.addEventListener("keydown",se)},50)}function Ne(){document.removeEventListener("contextmenu",De,!0),document.removeEventListener("click",De,!0),document.removeEventListener("scroll",je,!0),!m.isFullScreenContainer&&Ie.value&&Ie.value.removeEventListener("scroll",je,!0),ee.value.keyboardControl!==!1&&document.removeEventListener("keydown",se)}M.expose({closeMenu:$e});var te=(0,e.ref)();function se(de){var Fe,Ze,Je,Re,We,He,Ke,Le,Ae=!0;switch(de.key){case"Escape":var Me,qe;((Me=te.value)===null||Me===void 0?void 0:Me.isTopLevel())===!1?(qe=te.value)===null||qe===void 0||qe.closeCurrentSubMenu():$e();break;case"ArrowDown":(Fe=te.value)===null||Fe===void 0||Fe.moveCurrentItemDown();break;case"ArrowUp":(Ze=te.value)===null||Ze===void 0||Ze.moveCurrentItemUp();break;case"Home":(Je=te.value)===null||Je===void 0||Je.moveCurrentItemFirst();break;case"End":(Re=te.value)===null||Re===void 0||Re.moveCurrentItemLast();break;case"ArrowLeft":var H,_e,Qe;(H=te.value)!==null&&H!==void 0&&H.closeSelfAndActiveParent()||(_e=(Qe=ee.value).onKeyFocusMoveLeft)===null||_e===void 0||_e.call(Qe);break;case"ArrowRight":(We=te.value)!==null&&We!==void 0&&We.openCurrentItemSubMenu()||(He=(Ke=ee.value).onKeyFocusMoveRight)===null||He===void 0||He.call(Ke);break;case"Enter":(Le=te.value)===null||Le===void 0||Le.triggerCurrentItemClick(de);break;default:Ae=!1;break}Ae&&te.value&&(de.stopPropagation(),de.preventDefault())}function je(){ee.value.closeWhenScroll!==!1&&$e()}function De(de){dt(de.target)}function dt(de){for(;de;){if(de.classList&&de.classList.contains("mx-menu-host"))return;de=de.parentNode}Ne(),$e()}return(0,e.provide)("globalSetCurrentSubMenu",function(de){return te.value=de}),(0,e.provide)("globalOptions",ee.value),(0,e.provide)("globalCloseMenu",$e),(0,e.provide)("globalTheme",(($=ee.value)===null||$===void 0?void 0:$.theme)||"light"),(0,e.provide)("globalIsFullScreenContainer",m.isFullScreenContainer),(0,e.provide)("globalClickCloseClassName",(U=ee.value)===null||U===void 0?void 0:U.clickCloseClassName),(0,e.provide)("globalIgnoreClickClassName",(pe=ee.value)===null||pe===void 0?void 0:pe.ignoreClickClassName),(0,e.provide)("globalIconFontClass",((ge=ee.value)===null||ge===void 0?void 0:ge.iconFontClass)||"iconfont"),(0,e.provide)("globalHasSlot",function(de){return M.slots[de]!==void 0}),(0,e.provide)("globalRenderSlot",function(de,Fe){return(0,e.renderSlot)(M.slots,de,q({},Fe),function(){return[(0,e.h)("span","Render slot failed")]},!1)}),(0,e.provide)("menuContext",{zIndex:ee.value.zIndex||c.defaultZindex,container:Ie.value,adjustPadding:{x:0,y:0},getParentAbsY:function(){return ee.value.x},getParentAbsX:function(){return ee.value.y},getParentX:function(){return 0},getParentY:function(){return 0},getParentWidth:function(){return 0},getParentHeight:function(){return 0},getPositon:function(){return[ee.value.x,ee.value.y]},closeOtherSubMenuWithTimeOut:function(){},checkCloseOtherSubMenuTimeOut:function(){return!1},addOpenedSubMenu:function(){},closeOtherSubMenu:function(){},getParentContext:function(){return null},getSubMenuInstanceContext:function(){return null},getElement:function(){return null},addChildMenuItem:function(){},removeChildMenuItem:function(){},markActiveMenuItem:function(){},markThisOpenedByKeyBoard:function(){},isOpenedByKeyBoardFlag:function(){return!1},isMenuItemDataCollectedFlag:function(){return!1}}),function(){var de,Fe;return ce.value?[(0,e.h)("div",{class:"mx-menu-ghost-host"},[(0,e.h)(Tt,{class:"mx-menu-host",items:(de=ee.value)===null||de===void 0?void 0:de.items,adjustPosition:(Fe=ee.value)===null||Fe===void 0?void 0:Fe.adjustPosition,maxWidth:ee.value.maxWidth||c.defaultMaxWidth,minWidth:ee.value.minWidth||c.defaultMinWidth,direction:ee.value.direction||c.defaultDirection},{default:M.slots.default})])]:[]}}}),Kt=Gt,ve=Kt,st=(0,e.defineComponent)({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},setup:function(m,M){var $=(0,e.toRefs)(m),U=$.options,pe=$.show;return M.expose({closeMenu:function(){return M.emit("update:show",!1)}}),function(){var ge=I(U.value),oe=ge.isNew,ee=ge.container,ce=ge.eleId,Ie=pe.value?[(0,e.h)(ve,{options:U,show:!0,container:ee,isFullScreenContainer:!oe,"onUpdate:show":function(D){return M.emit("update:show",D)},onClose:function(D){var Ce,$e;M.emit("update:show",!1),M.emit("close"),(Ce=($e=U.value).onClose)===null||Ce===void 0||Ce.call($e,D)}},M.slots)]:[];return[(0,e.h)(e.Teleport,{to:"#".concat(ce)},Ie)]}}}),so=st,Cn=so;function qt(m){return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},qt(m)}const ao=(0,e.defineComponent)({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup:function(m,M){var $=(0,e.inject)("globalOptions"),U=(0,e.toRefs)(m),pe=U.adjustSubMenuPosition,ge=U.maxWidth,oe=U.minWidth,ee=typeof pe.value<"u"?pe.value:$.adjustPosition;return function(){return(0,e.h)(ht,q(q({},m),{},{showRightArrow:!0,maxWidth:void 0,minWidth:void 0,adjustSubMenuPosition:void 0,hasChildren:qt(M.slots.default)!==void 0}),M.slots.default?{submenu:function(){return(0,e.h)(Tt,{maxWidth:ge.value,minWidth:oe.value,adjustPosition:ee},{default:M.slots.default})}}:void 0)}}}),io=ao,wn=io;function lo(m,M,$,U){var pe=(0,e.h)(ve,{options:m,show:!0,container:M,isFullScreenContainer:!$,onClose:function(ge){var oe;(0,e.render)(null,M),(oe=m.onClose)===null||oe===void 0||oe.call(m,ge)}},U);return(0,e.render)(pe,M),pe.component}function Sn(m,M){var $=I(m),U=lo(m,$.container,$.isNew,M);return U.exposed}const Xt={install:function(m){m.config.globalProperties.$contextmenu=Sn,m.component("ContextMenu",Cn),m.component("ContextMenuItem",ht),m.component("ContextMenuGroup",wn),m.component("ContextMenuSperator",ue),m.component("ContextMenuSeparator",ue),m.component("ContextSubMenu",Tt)},showContextMenu:function(m,M){return Sn(m,M)},closeContextMenu:a,transformMenuPosition:v};var uo={key:0,ref:"menuBarContent",class:"mx-menu-bar-content"},co={key:1,ref:"menuBarContent",class:"mx-menu-bar-content"},po=["onClick","onMouseenter"];function fo(m,M,$,U,pe,ge){var oe,ee=(0,e.resolveComponent)("MenuBarIconMenu");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(["mx-menu-bar",(oe=m.options.theme)!==null&&oe!==void 0?oe:"",m.options.mini?"mini":""]),onFocus:M[1]||(M[1]=function(){return m.onFocus&&m.onFocus.apply(m,arguments)}),onBlur:M[2]||(M[2]=function(){return m.onBlur&&m.onBlur.apply(m,arguments)})},[(0,e.renderSlot)(m.$slots,"prefix"),m.options.mini?((0,e.openBlock)(),(0,e.createElementBlock)("div",uo,[(0,e.createElementVNode)("div",{class:"mx-menu-bar-item",onClick:M[0]||(M[0]=function(ce){return m.onItemClick(0,null)})},[(0,e.createVNode)(ee)])],512)):((0,e.openBlock)(),(0,e.createElementBlock)("div",co,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(m.menuItems,function(ce,Ie){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{key:Ie,class:(0,e.normalizeClass)(["mx-menu-bar-item",ce==m.menuActive?"active":""]),onClick:function(D){return m.onItemClick(Ie,ce)},onMouseenter:function(D){return m.onItemEnter(Ie,ce)}},(0,e.toDisplayString)(ce.label),43,po)}),128))],512)),(0,e.renderSlot)(m.$slots,"suffix")],34)}var mo={class:"mx-menu-bar-icon-menu",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200"},vo=(0,e.createElementVNode)("path",{d:"M133.310936 296.552327l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949 0-19.781623-15.997312-35.950949-35.950949-35.950949L133.310936 224.650428c-19.781623 0-35.950949 16.169326-35.950949 35.950949C97.359987 280.383 113.529313 296.552327 133.310936 296.552327z"},null,-1),go=(0,e.createElementVNode)("path",{d:"M890.51705 476.135058 133.310936 476.135058c-19.781623 0-35.950949 16.169326-35.950949 35.950949 0 19.781623 16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-16.169326 35.950949-35.950949C926.467999 492.304384 910.298673 476.135058 890.51705 476.135058z"},null,-1),ho=(0,e.createElementVNode)("path",{d:"M890.51705 727.447673 133.310936 727.447673c-19.781623 0-35.950949 15.997312-35.950949 35.950949s16.169326 35.950949 35.950949 35.950949l757.206115 0c19.781623 0 35.950949-15.997312 35.950949-35.950949S910.298673 727.447673 890.51705 727.447673z"},null,-1),yo=[vo,go,ho];function bo(m,M){return(0,e.openBlock)(),(0,e.createElementBlock)("svg",mo,yo)}const _o={},xo=(0,K.Z)(_o,[["render",bo]]),ko=xo,Co=(0,e.defineComponent)({name:"MenuBar",emits:[],props:{options:{type:Object,default:null}},components:{MenuBarIconMenu:ko},setup:function(m){var M=(0,e.ref)(),$=(0,e.ref)(!1),U=(0,e.ref)([]),pe=(0,e.ref)(null);function ge(){$.value=!0}function oe(){$.value=!1}(0,e.onMounted)(function(){U.value=m.options.items||[]}),(0,e.watch)(function(){return m.options},function(){U.value=m.options.items||[]});var ee=null,ce=-1;function Ie(){ce<U.value.length-1?ce++:ce=0,Ce(ce,U.value[ce])}function D(){ce>0?ce--:ce=U.value.length-1,Ce(ce,U.value[ce])}function Ce(te,se){var je;if(ce=te,se.children){ee&&(ee.closeMenu(),ee=null,$.value=!0),pe.value=se;var De=(je=M.value)===null||je===void 0?void 0:je.children[te];De&&(ee=Xt.showContextMenu(q(q({},m.options),{},{items:se.children,x:d(De),y:u(De)+De.offsetHeight,onKeyFocusMoveLeft:function(){D()},onKeyFocusMoveRight:function(){Ie()},onClose:function(){pe.value==se&&($.value=!1,pe.value=null)}})))}}function $e(){ce=0;var te=M.value;te&&(ee=Xt.showContextMenu(q(q({},m.options),{},{x:d(te),y:u(te)+te.offsetHeight})))}function Ve(te,se){se?($.value=!0,Ce(te,se),se.onClick&&(se.clickableWhenHasChildren===!0&&se.children&&se.children.length>0||!se.children||se.children.length===0)&&se.onClick()):$e()}function Ne(te,se){$.value&&Ce(te,se)}return{menuItems:U,menuActive:pe,menuBarContent:M,menuBarActive:$,onFocus:ge,onBlur:oe,onItemClick:Ve,onItemEnter:Ne}}}),wo=(0,K.Z)(Co,[["render",fo]]),So=wo,Io=Xt,Mo=Io})(),k})())})(Zn);var ze=Zn.exports;const xs=B("span",{class:"icon"},"@",-1),ks=me({__name:"index",props:{uid:{},options:{}},setup(p){var a;const s=p,l=Kn(s.uid),f=(a=Mt())==null?void 0:a.userInfo,y=ut(),h=gn(),k=W(()=>h.countInfo),n=W(()=>(f==null?void 0:f.uid)===l.value),i=W(()=>(f==null?void 0:f.power)===Un.ADMIN),e=(c,u)=>nt.emit("onSelectPerson",{uid:c,ignoreCheck:u}),t=async()=>{const c=s.uid;c&&await lt.blockUser({uid:c}).send()},r=async()=>{y.addFriendModalInfo.show=!0,y.addFriendModalInfo.uid=s.uid},o=async()=>{await lt.removeGroupMember({uid:s.uid,roomId:y.currentSession.roomId}).send(),h.getGroupUserList(!0)};return(c,u)=>{const d=rt,v=pt("login-show"),b=pt("friends");return E(),ie(x(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:J(()=>[xe((E(),ie(x(ze.ContextMenuItem),{label:"艾特Ta",onClick:u[0]||(u[0]=g=>e==null?void 0:e(s.uid,!0))},{icon:J(()=>[xs]),_:1})),[[v]]),i.value?(E(),ie(x(ze.ContextMenuItem),{key:0,label:"拉黑(管理)",onClick:t},{icon:J(()=>[R(d,{icon:"lahei",size:13})]),_:1})):ae("",!0),xe((E(),ie(x(ze.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:r},{icon:J(()=>[R(d,{icon:"tianjia",size:13})]),_:1})),[[b,l.value]]),[x(dn).LORD,x(dn).ADMIN].includes(k.value.role)&&!n.value?(E(),ie(x(ze.ContextMenuItem),{key:1,vLoginShow:"",label:"剔出群聊",onClick:o},{icon:J(()=>[R(d,{icon:"yichu",size:13})]),_:1})):ae("",!0)]),_:1},8,["options"])}}});const Cs=me({__name:"index",props:{user:{}},setup(p){var n;const l=Kn(p.user),f=Ut((n=l.value)==null?void 0:n.uid),y=A(!1),h=A({x:0,y:0}),k=i=>{if(!Mt().isSign)return;const{x:e,y:t}=i;h.value.x=e,h.value.y=t,y.value=!0};return(i,e)=>{var r;const t=bn;return E(),L("li",{class:"user-list-item",tabindex:"0",key:l.value.uid,onContextmenu:e[1]||(e[1]=Ct(o=>k(o),["prevent","stop"]))},[R(t,{src:x(f).avatar,size:24,showStatus:"",online:l.value.activeStatus===x(Ho).ONLINE},null,8,["src","online"]),Ue(" "+fe(x(f).name)+" ",1),R(ks,{show:y.value,"onUpdate:show":e[0]||(e[0]=o=>y.value=o),options:h.value,uid:(r=l.value)==null?void 0:r.uid},null,8,["show","options","uid"])],32)}}});const ws=vt(Cs,[["__scopeId","data-v-40783a4b"]]),Ss={class:"user-list-box"},Is={class:"user-list-header"},Ms={key:0,class:"list-no-data"},Es=me({__name:"index",setup(p){const s=A(),l=gn(),f=ut(),y=Vn(),h=W(()=>l.userList),k=W(()=>l.countInfo);gt(()=>{let e;Vt(()=>{e=new IntersectionObserver(async t=>{var r;(r=t==null?void 0:t[0])!=null&&r.isIntersecting&&(await l.loadMore(),s.value&&e.unobserve(s.value),setTimeout(()=>{s.value&&e.observe(s.value)},500))}),s.value&&e.observe(s.value)}),kn(()=>{s.value&&e.unobserve(s.value)})});const n=()=>l.showGroupList=!1,i=()=>{f.createGroupModalInfo.show=!0,f.createGroupModalInfo.isInvite=!0,console.log("cachedStore.currentAtUsersList",y.currentAtUsersList),f.createGroupModalInfo.selectedUid=y.currentAtUsersList.map(e=>e.uid)};return(e,t)=>{var c,u;const r=Wn,o=pt("login-show"),a=nr;return E(),L("div",Ss,[B("div",{class:ye(["user-list-mask",x(l).showGroupList?"show":""]),onClick:n},null,2),B("div",{class:ye(["user-list-wrapper",x(l).showGroupList?"show":""])},[B("div",Is,[Ue(" 在线人数："+fe(k.value.onlineNum||0)+" ",1),xe(R(r,{type:"primary",icon:x(Go),circle:"",size:"small",onClick:i},null,8,["icon"]),[[o]])]),xe((E(),ie(dr,{tag:"ul",name:"fade",class:"user-list"},{default:J(()=>[(E(!0),L(ot,null,Lt(h.value,d=>(E(),ie(ws,{key:d.uid,user:d},null,8,["user"]))),128)),B("li",{key:"visible_el",ref_key:"groupListLastElRef",ref:s}," ",512)]),_:1})),[[Xe,(c=h.value)==null?void 0:c.length],[a,x(l).userListOptions.loading,void 0,{lock:!0}]]),((u=h.value)==null?void 0:u.length)===0?(E(),L("div",Ms,"暂无成员~")):ae("",!0)],2)])}}});const Os=vt(Es,[["__scopeId","data-v-1252a561"]]),Ts={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},$s=B("path",{fill:"currentColor",d:"M104.704 338.752a64 64 0 0 1 90.496 0l316.8 316.8l316.8-316.8a64 64 0 0 1 90.496 90.496L557.248 791.296a64 64 0 0 1-90.496 0L104.704 429.248a64 64 0 0 1 0-90.496z"},null,-1),Rs=[$s];function Ls(p,s){return E(),L("svg",Ts,Rs)}const Bs={name:"ep-arrow-down-bold",render:Ls},Ns={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},js=B("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Ps=[js];function zs(p,s){return E(),L("svg",Ns,Ps)}const As={name:"ep-loading",render:zs};var Ds=Ko,Fs=function(){return Ds.Date.now()},Us=Fs,Vs=/\s/;function Ws(p){for(var s=p.length;s--&&Vs.test(p.charAt(s)););return s}var Hs=Ws,Gs=Hs,Ks=/^\s+/;function qs(p){return p&&p.slice(0,Gs(p)+1).replace(Ks,"")}var Xs=qs,Ys=qo,Zs=Xo,Js="[object Symbol]";function Qs(p){return typeof p=="symbol"||Zs(p)&&Ys(p)==Js}var ea=Qs,ta=Xs,jn=hn,na=ea,Pn=0/0,oa=/^[-+]0x[0-9a-f]+$/i,ra=/^0b[01]+$/i,sa=/^0o[0-7]+$/i,aa=parseInt;function ia(p){if(typeof p=="number")return p;if(na(p))return Pn;if(jn(p)){var s=typeof p.valueOf=="function"?p.valueOf():p;p=jn(s)?s+"":s}if(typeof p!="string")return p===0?p:+p;p=ta(p);var l=ra.test(p);return l||sa.test(p)?aa(p.slice(2),l?2:8):oa.test(p)?Pn:+p}var la=ia,ua=hn,un=Us,zn=la,ca="Expected a function",da=Math.max,pa=Math.min;function fa(p,s,l){var f,y,h,k,n,i,e=0,t=!1,r=!1,o=!0;if(typeof p!="function")throw new TypeError(ca);s=zn(s)||0,ua(l)&&(t=!!l.leading,r="maxWait"in l,h=r?da(zn(l.maxWait)||0,s):h,o="trailing"in l?!!l.trailing:o);function a(_){var w=f,T=y;return f=y=void 0,e=_,k=p.apply(T,w),k}function c(_){return e=_,n=setTimeout(v,s),t?a(_):k}function u(_){var w=_-i,T=_-e,z=s-w;return r?pa(z,h-T):z}function d(_){var w=_-i,T=_-e;return i===void 0||w>=s||w<0||r&&T>=h}function v(){var _=un();if(d(_))return b(_);n=setTimeout(v,u(_))}function b(_){return n=void 0,o&&f?a(_):(f=y=void 0,k)}function g(){n!==void 0&&clearTimeout(n),e=0,f=i=y=n=void 0}function C(){return n===void 0?k:b(un())}function I(){var _=un(),w=d(_);if(f=arguments,y=this,i=_,w){if(n===void 0)return c(i);if(r)return clearTimeout(n),n=setTimeout(v,s),a(i)}return n===void 0&&(n=setTimeout(v,s)),k}return I.cancel=g,I.flush=C,I}var ma=fa,va=ma,ga=hn,ha="Expected a function";function ya(p,s,l){var f=!0,y=!0;if(typeof p!="function")throw new TypeError(ha);return ga(l)&&(f="leading"in l?!!l.leading:f,y="trailing"in l?!!l.trailing:y),va(p,s,{leading:f,maxWait:s,trailing:y})}var ba=ya;const Jn=wr(ba);class _a{constructor(s,l){an(this,"sizes",new Map);an(this,"offset");this.init(s,l)}init(s,l){this.param=s,this.callUpdate=l,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.lastCalcIndex=0,this.fixedSizeValue=0,this.calcType="INIT",this.offset=0,this.direction="",this.range=Object.create(null),s&&this.checkRange(0,s.keeps-1)}destroy(){this.init(null,null)}getRange(){const s=Object.create(null);return s.start=this.range.start,s.end=this.range.end,s.padFront=this.range.padFront,s.padBehind=this.range.padBehind,s}isBehind(){return this.direction==="BEHIND"}isFront(){return this.direction==="FRONT"}getOffset(s){return(s<1?0:this.getIndexOffset(s))+this.param.slotHeaderSize}updateParam(s,l){this.param&&s in this.param&&(s==="uniqueIds"&&this.sizes.forEach((f,y)=>{l.includes(y)||this.sizes.delete(y)}),this.param[s]=l)}saveSize(s,l){this.sizes.set(s,l),this.calcType==="INIT"?(this.fixedSizeValue=l,this.calcType="FIXED"):this.calcType==="FIXED"&&this.fixedSizeValue!==l&&(this.calcType="DYNAMIC",delete this.fixedSizeValue),this.calcType!=="FIXED"&&typeof this.firstRangeTotalSize<"u"&&(this.sizes.size<Math.min(this.param.keeps,this.param.uniqueIds.length)?(this.firstRangeTotalSize=[...this.sizes.values()].reduce((f,y)=>f+y,0),this.firstRangeAverageSize=Math.round(this.firstRangeTotalSize/this.sizes.size)):delete this.firstRangeTotalSize)}handleDataSourcesChange(){let s=this.range.start;this.isFront()?s=s-2:this.isBehind()&&(s=s+2),s=Math.max(s,0),this.updateRange(this.range.start,this.getEndByStart(s))}handleSlotSizeChange(){this.handleDataSourcesChange()}handleScroll(s){this.direction=s<this.offset?"FRONT":"BEHIND",this.offset=s,this.param&&(this.direction==="FRONT"?this.handleFront():this.direction==="BEHIND"&&this.handleBehind())}handleFront(){const s=this.getScrollOvers();if(s>this.range.start)return;const l=Math.max(s-this.param.buffer,0);this.checkRange(l,this.getEndByStart(l))}handleBehind(){const s=this.getScrollOvers();s<this.range.start+this.param.buffer||this.checkRange(s,this.getEndByStart(s))}getScrollOvers(){const s=this.offset-this.param.slotHeaderSize;if(s<=0)return 0;if(this.isFixedType())return Math.floor(s/this.fixedSizeValue);let l=0,f=0,y=0,h=this.param.uniqueIds.length;for(;l<=h;){if(f=l+Math.floor((h-l)/2),y=this.getIndexOffset(f),y===s)return f;y<s?l=f+1:y>s&&(h=f-1)}return l>0?--l:0}getIndexOffset(s){if(!s)return 0;let l=0,f=0;for(let y=0;y<s;y++)f=this.sizes.get(this.param.uniqueIds[y]),l=l+(typeof f=="number"?f:this.getEstimateSize());return this.lastCalcIndex=Math.max(this.lastCalcIndex,s-1),this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex()),l}isFixedType(){return this.calcType==="FIXED"}getLastIndex(){return this.param.uniqueIds.length-1}checkRange(s,l){const f=this.param.keeps;this.param.uniqueIds.length<=f?(s=0,l=this.getLastIndex()):l-s<f-1&&(s=l-f+1),this.range.start!==s&&this.updateRange(s,l)}updateRange(s,l){this.range.start=s,this.range.end=l,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}getEndByStart(s){const l=s+this.param.keeps-1;return Math.min(l,this.getLastIndex())}getPadFront(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}getPadBehind(){const s=this.range.end,l=this.getLastIndex();return this.isFixedType()?(l-s)*this.fixedSizeValue:this.lastCalcIndex===l?this.getIndexOffset(l)-this.getIndexOffset(s):(l-s)*this.getEstimateSize()}getEstimateSize(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}const xa=me({name:"VirtualListItem",props:{index:{type:Number},source:{type:Object},component:{type:[Object,Function]},uniqueKey:{type:[String,Number]},itemProps:{type:Object,default:()=>{}},dataPropName:{type:String,default:"source"}},emits:["itemResize"],setup(p,{emit:s}){const l=A(null);let f=null;const y=()=>{const{uniqueKey:h}=p,k=l.value?l.value.offsetHeight:0;s("itemResize",h,k)};return gt(()=>{typeof ResizeObserver<"u"&&(f=new ResizeObserver(()=>{y()}),l.value&&f.observe(l.value))}),pr(()=>{y()}),kn(()=>{f&&(f.disconnect(),f=null)}),()=>{const{component:h,index:k,source:n,uniqueKey:i,itemProps:e,dataPropName:t}=p,r={...e,index:k,[t]:n};return R("div",_n({key:i,ref:l},{index:k}),[R(h,r,null)])}}}),Qn=me({name:"VirtualList",props:{data:{type:Array,required:!0,default:()=>[]},dataKey:{type:[String,Function],required:!0},item:{type:[Object,Function],required:!0},keeps:{type:Number,default:30},size:{type:Number,default:50},start:{type:Number,default:0},offset:{type:Number,default:0},topThreshold:{type:Number,default:0},bottomThreshold:{type:Number,default:0},itemProps:{type:Object},dataPropName:{type:String,default:"source"}},setup(p,{emit:s,expose:l}){const f=A(null),y=A(),h=A(null);let k;tt(()=>p.data.length,()=>{k.updateParam("uniqueIds",a()),k.handleDataSourcesChange()}),tt(()=>p.keeps,_=>{k.updateParam("keeps",_),k.handleSlotSizeChange()}),tt(()=>p.start,_=>{d(_)}),tt(()=>p.offset,_=>v(_));const n=_=>k.sizes.get(_),i=()=>y.value?Math.ceil(y.value.scrollTop):0,e=()=>{const _="clientHeight";return y.value?Math.ceil(y.value[_]):0},t=()=>{const _="scrollHeight";return y.value?Math.ceil(y.value[_]):0},r=(_,w,T)=>{s("scroll",{offset:_,clientSize:w,scrollSize:T}),k.isFront()&&p.data.length&&_-p.topThreshold<=0?s("totop"):k.isBehind()&&_+w+p.bottomThreshold>=T&&s("tobottom")},o=()=>{const _=i(),w=e(),T=t();_<0||_+w>T+1||!T||(k.handleScroll(_),r(_,w,T))},a=()=>{const{dataKey:_,data:w=[]}=p;return w.map(T=>typeof _=="function"?_(T):T[_])},c=_=>{f.value=_},u=()=>{k=new _a({slotHeaderSize:0,slotFooterSize:0,keeps:p.keeps,estimateSize:p.size,buffer:Math.round(p.keeps/3),uniqueIds:a()},c),f.value=k.getRange()},d=(_,w,T=0)=>{if(_>=p.data.length-1)C();else{const z=k.getOffset(_)-T;v(z,w)}},v=(_,w=!1)=>{y.value&&y.value.scroll({left:0,top:_,behavior:w?"smooth":"auto"})},b=()=>{const _=[],{start:w,end:T}=f.value,{data:z,dataKey:q,item:F,itemProps:Z,dataPropName:V}=p;for(let Q=w;Q<=T;Q++){const le=z[Q];if(le){const O=typeof q=="function"?q(le):le[q];(typeof O=="string"||typeof O=="number")&&_.push(R(xa,{index:Q,uniqueKey:O,source:le,component:F,itemProps:Z,dataPropName:V,onItemResize:g},null))}}return _},g=(_,w)=>{k.saveSize(_,w),s("resized",_,w)},C=_=>{if(h.value){const w=h.value.offsetTop;v(w,_),setTimeout(()=>{i()+e()<t()&&C(_)},3)}},I=()=>k.sizes.size;return fr(()=>{u()}),mr(()=>{v(k.offset)}),gt(()=>{p.start?d(p.start):p.offset&&v(p.offset),s("ok")}),kn(()=>{k.destroy()}),l({scrollToBottom:C,getSizes:I,getSize:n,getOffset:i,getScrollSize:t,getClientSize:e,scrollToOffset:v,scrollToIndex:d}),()=>{const{padFront:_,padBehind:w}=f.value;return R("div",{ref:y,onScroll:o},[R("div",{style:{padding:`${_}px 0px ${w}px`}},[b()]),R("div",{ref:h,style:{width:"100%",height:"0px"}},null)])}}}),ka=p=>{if(p===0||!p)return"0 B";const s=["B","KB","MB","GB","TB"],l=1024,f=Math.floor(Math.log(p)/Math.log(l));return parseFloat((p/Math.pow(l,f)).toFixed(2))+" "+s[f]},eo=(p,s,l={maxWidth:200,maxHeight:150})=>{const{maxWidth:f,maxHeight:y}=l;return p<f&&s<y?s:p>s?f/p*s:(p===s||p<s,y)},Ca={jpg:"jpg",jpeg:"jpg",png:"jpg",webp:"jpg",mp4:"mp4",mov:"mp4",avi:"mp4",rmvb:"mp4",doc:"doc",docx:"doc",mp3:"mp3",wav:"mp3",aac:"mp3",flac:"mp3",pdf:"pdf",ppt:"ppt",pptx:"ppt",xls:"xls",xlsx:"xls",zip:"zip",rar:"zip","7z":"zip",txt:"txt",log:"log",svg:"svg",sketch:"sketch",exe:"exe",md:"md"},wa=p=>{if(!p)return"other";const s=p.toLowerCase().split(".").pop();return s&&Ca[s]||"other"},An=(p,s,l)=>{const{size:f,width:y,height:h,downloadUrl:k,name:n,second:i,tempUrl:e,thumbWidth:t,thumbHeight:r,thumbUrl:o,thumbSize:a}=p,u={size:f,url:l?e:k};let d={};return s===ne.IMAGE?d={...u,width:y,height:h}:s===ne.VOICE?d={...u,second:i}:s===ne.VIDEO?d={...u,thumbWidth:t,thumbHeight:r,thumbUrl:o,thumbSize:a}:s===ne.FILE&&(d={...u,fileName:n,url:k}),{body:d,type:s}},Sa=async p=>await(await fetch(p)).blob(),Ia=async(p,s)=>{const l=await Sa(p),f=l.type,y=s||Date.now()+"_emoji.png";return new File([l],y,{type:f})},Ma=["src"],Ea=me({__name:"image",props:{body:{}},setup(p){const s=p,l=or(),f=A(!1),y=A(!0),h=W(()=>{const{width:i,height:e}=s.body;return eo(i,e)}),k=()=>{const{width:i,height:e}=s.body;return`width: ${h.value/e*i}px`},n=()=>{y.value=!1,f.value=!0};return(i,e)=>{var r,o;const t=rt;return E(),L("div",{class:"image",style:et({height:h.value+"px"}),onClick:e[1]||(e[1]=a=>{var c;return x(l).show((c=i.body)==null?void 0:c.url)})},[f.value?(E(),L("div",{key:0,class:"image-slot",style:et(k())},[R(t,{icon:"dazed",size:36,colorful:""}),Ue(" 加载失败 ")],4)):(E(),L(ot,{key:1},[(r=i.body)!=null&&r.url?(E(),L("img",{key:0,src:(o=i.body)==null?void 0:o.url,onClick:e[0]||(e[0]=a=>{var c;return x(l).show((c=i.body)==null?void 0:c.url)}),onError:n},null,40,Ma)):ae("",!0)],64))],4)}}}),Oa={class:"saying"},Ta={class:"num"},$a=me({__name:"voice",props:{body:{}},setup(p){const s=p,l=rr(),f=W(()=>l.previewUrl===s.body.url&&l.isPlaying);return(y,h)=>{var n;const k=rt;return E(),L("div",{class:"voice",onClick:h[0]||(h[0]=i=>x(l).open(y.body.url))},[B("div",Oa,[B("span",{class:ye(["shelter",{play:f.value}])},null,2),R(k,{icon:"saying",size:18})]),B("span",Ta,fe((n=y.body)==null?void 0:n.second)+'"',1)])}}});const Ra=()=>{const p=A(0),s=A(!1),{on:l,trigger:f}=bt(),y=n=>{const i=new URL(n).pathname,e=i.lastIndexOf(".");return e===-1?"":i.slice(e+1)},h=n=>{const i=new URL(n).pathname,e=i.lastIndexOf("/");return e===-1?"未知文件":i.slice(e+1)};return{onLoaded:l,downloadFile:(n,i,e)=>{s.value=!0;const t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="blob",t.onprogress=r=>{if(r.lengthComputable){const o=Math.floor(r.loaded/r.total*100);p.value=o}},t.onload=()=>{if(t.status===200){const r=new Blob([t.response],{type:"application/octet-stream"}),o=document.createElement("a");o.href=URL.createObjectURL(r);const a=y(n),c=e||a;if(i)o.download=`${i}${c?".":""}${c}`;else{const u=h(n);o.download=u}o.click(),URL.revokeObjectURL(o.href),f("success")}else f("fail");p.value=0,s.value=!1},t.send()},process:p,isDownloading:s}},La=vr("downloadQuenu",()=>{const s=Bt([]),l=Bt(new Map),f=e=>{s.push(e)},y=e=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},h=()=>{if(!s.length||l.size>=1)return;const e=s.shift();e&&k(e)},k=e=>{const{downloadFile:t,isDownloading:r,process:o,onLoaded:a}=Ra(),c=tt(o,()=>{l.set(e,{url:e,isDownloading:r.value,process:o.value})});a(()=>{c(),l.delete(e),h()}),e&&t(e)};return{quenu:s,addQuenuAction:f,removeQuenuAction:y,dequeue:h,downloadObjMap:l,download:e=>{f(e),h()},cancelDownload:e=>{s.includes(e)&&y(e)}}}),Ba={class:"file"},Na={class:"file-desc"},ja={class:"file-name"},Pa={class:"file-size"},za=me({__name:"file",props:{body:{}},setup(p){const s=p,{downloadObjMap:l,download:f,quenu:y,cancelDownload:h}=La(),k=()=>{f(s.body.url)},n=()=>{h(s.body.url)},i=W(()=>{var r;return((r=l.get(s.body.url))==null?void 0:r.isDownloading)||!1}),e=W(()=>{var r;return((r=l.get(s.body.url))==null?void 0:r.process)||0}),t=W(()=>y.includes(s.body.url));return(r,o)=>{var v,b,g;const a=rt,c=St,u=os,d=Jr;return E(),L("div",Ba,[R(a,{icon:x(wa)((v=r.body)==null?void 0:v.fileName),size:32,colorful:""},null,8,["icon"]),B("div",Na,[B("span",ja,fe(((b=r.body)==null?void 0:b.fileName)||"未知文件"),1),B("span",Pa,fe(x(ka)((g=r.body)==null?void 0:g.size)),1)]),t.value?(E(),ie(u,{key:0,class:"mx-1",size:"small",type:"warning",onClick:n},{default:J(()=>[Ue("等待下载 "),R(c,null,{default:J(()=>[R(x(Dn))]),_:1})]),_:1})):i.value?(E(),ie(d,{key:2,type:"circle",percentage:e.value,width:22,"stroke-width":1,"show-text":!1},null,8,["percentage"])):(E(),ie(a,{key:1,icon:"xiazai",size:22,onClick:k}))])}}}),Aa=["src"],Da=me({__name:"video",props:{body:{}},setup(p){const s=p,l=sr(),f=()=>{const y=s.body.thumbWidth||0,h=s.body.thumbHeight||0;return eo(y,h)};return(y,h)=>{const k=rt;return E(),L("div",{class:"video",style:et(`height:${f()}px`),onClick:h[0]||(h[0]=n=>{var i;return x(l).open((i=y.body)==null?void 0:i.url)})},[R(k,{icon:"bofang",size:30}),B("img",{src:y.body.thumbUrl},null,8,Aa)],4)}}}),Fa={class:"text"},Ua=["onClick"],Va={key:0,class:"text-card-image-wrapper"},Wa=["src"],Ha={class:"text-card-link-content"},Ga={class:"text-card-title ellipsis-1"},Ka={class:"text-card-desc ellipsis-2"},qa=me({__name:"text",props:{body:{}},setup(p){const s=p,l=s.body.urlContentMap||{},f=Object.keys(l),y=W(()=>{let n=s.body.content||"";n=n.replace(/&nbsp;/g," ");const i=new RegExp(`(@\\S+\\s|${f.join("|")}|\\S+\\s)`,"g");return n.split(i)}),h=n=>{n&&window.open(n.startsWith("http")?n:"//"+n,"_blank")};function k(n){const i=n.target;i&&(i.style.opacity="0")}return(n,i)=>(E(),L("div",Fa,[(E(!0),L(ot,null,Lt(y.value,(e,t)=>(E(),L(ot,null,[e.startsWith("@")&&e.trim()!==""&&e.trim()!=="@"?(E(),L("span",{key:e,class:"text-mention"},fe(e),1)):(E(),L(ot,{key:1},[Ue(fe(e),1)],64)),x(f).includes(e)?(E(),L("div",{key:e+t,rel:"noopener noreferrer nofollow",target:"_blank",class:"text-card",onClick:r=>h(e.trim())},[x(l)[e].image?(E(),L("div",Va,[B("img",{class:"text-card-image",src:x(l)[e].image,onError:k},null,40,Wa)])):ae("",!0),B("div",Ha,[B("span",Ga,fe(x(l)[e].title),1),B("span",Ka,fe(x(l)[e].description),1)])],8,Ua)):ae("",!0)],64))),256))]))}}),Xa={class:"image emoji"},Ya={key:0,class:"image-slot"},Za=["src"],Ja=me({__name:"emoji",props:{body:{}},setup(p){const s=A(!1),l=A(!0),f=()=>{l.value=!1,s.value=!0};return(y,h)=>{var n,i;const k=rt;return E(),L("div",Xa,[s.value?(E(),L("div",Ya,[R(k,{icon:"dazed",size:36,colorful:""}),Ue(" 加载失败 ")])):(E(),L(ot,{key:1},[(n=y.body)!=null&&n.url?(E(),L("img",{key:0,src:(i=y.body)==null?void 0:i.url,onError:f},null,40,Za)):ae("",!0)],64))])}}}),Qa=me({__name:"index",props:{message:{}},setup(p){const s={[ne.UNKNOWN]:"",[ne.TEXT]:qa,[ne.RECALL]:"",[ne.SYSTEM]:"",[ne.IMAGE]:Ea,[ne.VOICE]:$a,[ne.FILE]:za,[ne.VIDEO]:Da,[ne.EMOJI]:Ja};return(l,f)=>(E(),ie(xn(s[l.message.type]),{body:l.message.body},null,8,["body"]))}}),ei={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ti=B("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),ni=[ti];function oi(p,s){return E(),L("svg",ei,ni)}const ri={name:"ep-check",render:oi},to=p=>{const s=W(()=>p.messageMark.userLike===mt.YES),l=W(()=>p.messageMark.userDislike===mt.YES),f=W(()=>p.messageMark.likeCount),y=W(()=>p.messageMark.dislikeCount);return{isLike:s,isDisLike:l,likeCount:f,dislikeCount:y,onLike:async()=>{const n=s.value?kt.Cancel:kt.Confirm;await lt.markMsg({actType:n,markType:Rn.LIKE,msgId:p.id}).send();const{likeCount:i}=p.messageMark,e=n===kt.Confirm;p.messageMark.userLike=e?mt.YES:mt.NO,p.messageMark.likeCount=e?i+1:i-1,l.value&&(p.messageMark.userDislike=mt.NO,p.messageMark.dislikeCount=y.value-1)},onDisLike:async()=>{const n=l.value?kt.Cancel:kt.Confirm;await lt.markMsg({actType:n,markType:Rn.DISLIKE,msgId:p.id}).send();const{dislikeCount:i}=p.messageMark,e=n===kt.Confirm;p.messageMark.userDislike=e?mt.YES:mt.NO,p.messageMark.dislikeCount=e?i+1:i-1,s.value&&(p.messageMark.userLike=mt.NO,p.messageMark.likeCount=f.value-1)}}},si={key:0,class:"msg-option"},ai={class:"msg-option-item",title:"回复"},ii={class:"msg-option-item",title:"点赞"},li={class:"msg-option-item",title:"不喜欢"},ui=me({__name:"index",props:{msg:{}},setup(p){const s=p,l=It(),{isLike:f,isDisLike:y,onLike:h,onDisLike:k}=to(s.msg.message),n=async i=>{i&&(l.currentMsgReply=i,nt.emit("focusMsgInput"))};return(i,e)=>{const t=rt,r=pt("login");return i.msg.loading?ae("",!0):(E(),L("div",si,[B("span",ai,[xe(R(t,{icon:"reply",size:14},null,512),[[r,()=>n(i.msg)]])]),B("span",ii,[xe(R(t,{icon:"like",size:14,class:ye([{"like-active":x(f)}])},null,8,["class"]),[[r,()=>x(h)()]])]),B("span",li,[xe(R(t,{icon:"dislike",size:15,class:ye([{"dislike-active":x(y)}])},null,8,["class"]),[[r,()=>x(k)()]])])]))}}});const ci=vt(ui,[["__scopeId","data-v-80260998"]]),di=p=>new Promise((s,l)=>{try{const f=document.createElement("textarea");f.setAttribute("readonly","readonly"),f.value=p,f.style.zIndex="-1",document.body.appendChild(f),f.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(f),s(p)}catch(f){l(f)}}),pi=p=>{const s=document.createElement("canvas"),l=s.getContext("2d"),f=new Image;f.crossOrigin="Anonymous",f.src=p,f.onload=()=>{l&&(s.width=f.width,s.height=f.height,l.clearRect(0,0,l.canvas.width,l.canvas.height),l.drawImage(f,0,0),s.toBlob(async y=>{if(!y)return;const h=[new ClipboardItem({[y.type]:y})];try{await navigator.clipboard.write(h)}catch{}finally{s.remove()}}))}},no=()=>{const p=A(!1),s=A(0),l=yn(),f=bt(),y=bt(),h=bt(),k=async(e,t)=>(p.value=!0,new Promise((r,o)=>{const a=new XMLHttpRequest;a.open("PUT",e,!0),a.setRequestHeader("Content-Type",t.type),a.upload.onprogress=c=>{s.value=Math.round(c.loaded/c.total*100)},a.onload=()=>{p.value=!1,a.status===200?(y.trigger(t),r(!0)):(h.trigger(t),o(!1))},a.onerror=()=>{h.trigger(t),o(!1)},a.send(t)})),n=async e=>new Promise(o=>{if(e.type==="image/gif"){o(e);return}const a=new Image,c=URL.createObjectURL(e);a.src=c,a.onload=()=>{const{height:u,width:d}=a;let v,b;d>u?(v=240,b=Math.round(u/d*240)):(b=240,v=Math.round(d/u*240));const g=document.createElement("canvas"),C=g.getContext("2d");g.height=240,g.width=240,C&&(C.clearRect(0,0,240,240),C.fillStyle="rgba(0, 0, 0, 0)",C.fillRect(0,0,240,240),C.drawImage(a,0,0,d,u,(240-v)/2,(240-b)/2,v,b),g.toBlob(I=>{if(!I)return;const _=Date.now()+"_emoji.png",w=new File([I],_,{type:"image/png"});o(w),URL.revokeObjectURL(c)},"image/png",.9))},a.onerror=()=>{URL.revokeObjectURL(c)}}),i=async e=>{const t=await n(e);if(!t)return;const{downloadUrl:r,uploadUrl:o}=await lt.getUploadUrl({fileName:t.name,scene:"2"}).send();o&&r&&(f.trigger({file:e,downloadUrl:r}),k(o,t).then(a=>{a&&l.addEmoji(r)}))};return{isEmojiUp:p,onStart:f.on,onFail:h.on,onSuccess:y.on,uploadEmoji:i}},fi=me({__name:"index",props:{msg:{},options:{}},setup(p){var c;const s=p,l=yn(),{uploadEmoji:f}=no(),y=(c=Mt())==null?void 0:c.userInfo,h=It(),k=W(()=>{var u;return((u=s.msg)==null?void 0:u.fromUser.uid)===y.uid}),n=W(()=>(y==null?void 0:y.power)===Un.ADMIN),i=async()=>{const{id:u}=s.msg.message;u&&(await lt.recallMsg({roomId:1,msgId:u}).send(),h.updateRecallStatus({msgId:u}))},e=async()=>{const{uid:u}=s.msg.fromUser;u&&await lt.blockUser({uid:u}).send()},t=()=>{var d;const u=s.msg.message;if(u.type===ne.TEXT){const v=(d=u.body)==null?void 0:d.content;di(v),yt.success("复制成功~")}u.type===ne.IMAGE&&(pi(u.body.url),yt.success("复制成功~"))},r=()=>{const{body:u}=s.msg.message,d=u==null?void 0:u.url;if(!d)return;const v=new XMLHttpRequest;v.open("GET",d,!0),v.responseType="blob",v.onreadystatechange=()=>{if(v.status!=200)return yt.error("下载失败~");if(v.readyState===4&&v.status===200){const b=v.response;let g=document.createElement("a");g.href=URL.createObjectURL(b),g.download=u.fileName||"未知文件",g.dispatchEvent(new MouseEvent("click")),g.remove()}},v.send()},o=()=>{const{type:u,body:d}=s.msg.message;u===ne.EMOJI?l.addEmoji(d.url):Ia(d.url).then(v=>{f(v)})},a=()=>h.deleteMsg(s.msg.message.id);return(u,d)=>{const v=rt,b=pt("login-show");return E(),ie(x(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:J(()=>[u.msg.message.type===x(ne).TEXT||u.msg.message.type===x(ne).IMAGE?(E(),ie(x(ze.ContextMenuItem),{key:0,label:"复制",onClick:t},{icon:J(()=>[R(v,{icon:"copy",size:13})]),_:1})):ae("",!0),(u.msg.message.type===x(ne).EMOJI||u.msg.message.type===x(ne).IMAGE)&&!k.value&&x(l).emojiList.length<50?(E(),ie(x(ze.ContextMenuItem),{key:1,label:"添加到表情",onClick:o},{icon:J(()=>[R(v,{icon:"aixin",size:13})]),_:1})):ae("",!0),(k.value||n.value)&&!u.msg.loading?(E(),ie(x(ze.ContextMenuItem),{key:2,label:"撤回消息",onClick:i},{icon:J(()=>[R(v,{icon:"chehui",size:14})]),_:1})):ae("",!0),(u.msg.message.type===x(ne).FILE||u.msg.message.type===x(ne).IMAGE)&&!u.msg.loading?(E(),ie(x(ze.ContextMenuItem),{key:3,label:"下载",onClick:r},{icon:J(()=>[R(v,{icon:"xiazai",size:15})]),_:1})):ae("",!0),xe(R(x(ze.ContextMenuSeparator),null,null,512),[[b]]),xe((E(),ie(x(ze.ContextMenuItem),{label:"删除",onClick:a},{icon:J(()=>[R(v,{icon:"shanchu",size:13})]),_:1})),[[b]]),n.value?(E(),ie(x(ze.ContextMenuItem),{key:4,label:"拉黑(管理)",onClick:e},{icon:J(()=>[R(v,{icon:"lahei",size:13})]),_:1})):ae("",!0)]),_:1},8,["options"])}}});const mi=B("span",{class:"icon"},"@",-1),vi=me({__name:"index",props:{uid:{},options:{}},setup(p){const s=p,l=ut(),f=async()=>{l.addFriendModalInfo.show=!0,l.addFriendModalInfo.uid=s.uid},y=(h,k)=>nt.emit("onSelectPerson",{uid:h,ignoreCheck:k});return(h,k)=>{const n=rt,i=pt("login-show"),e=pt("friends");return E(),ie(x(ze.ContextMenu),{options:{theme:"dark",x:0,y:0,...s.options}},{default:J(()=>[xe((E(),ie(x(ze.ContextMenuItem),{label:"艾特Ta",onClick:k[0]||(k[0]=t=>y==null?void 0:y(s.uid,!0))},{icon:J(()=>[mi]),_:1})),[[i]]),xe((E(),ie(x(ze.ContextMenuItem),{vLoginShow:"",label:"添加好友",onClick:f},{icon:J(()=>[R(n,{icon:"tianjia",size:13})]),_:1})),[[e,h.uid]])]),_:1},8,["options"])}}});const gi={key:0,class:"send-time-block"},hi={key:1,class:"send-time-block"},yi={class:"chat-item-user-info"},bi=["src"],_i={class:"user-ip"},xi={key:0,class:"send-time"},ki={key:0,class:"chat-item-read-count-text"},Ci={class:"ellipsis"},wi={key:1,class:"extra"},Si=me({inheritAttrs:!1,__name:"index",props:{msg:{},isShowTime:{type:Boolean,default:!0},isShowTimeBlock:{type:Boolean,default:!0},bubbleMode:{default:"spread"},tooltipTrigger:{default:()=>"hover"}},setup(p){const s=p,{message:l,fromUser:f}=qn(s.msg),y=Mt(),h=It(),k=ut(),n=Ut(f.value.uid),i=W(()=>{var O;return(O=n==null?void 0:n.value)==null?void 0:O.wearingItemId}),e=er(i),t=W(()=>f.value.uid===(y==null?void 0:y.userInfo.uid)),r=W(()=>({"chat-item":!0,"is-me":t.value,right:t.value&&s.bubbleMode==="spread"||s.bubbleMode==="right"})),o=A(null),a=A(null),c=A(),u=Bt({read:0,unread:null}),d=Ft("virtualListRef"),v=A(!1),b=A(!1),g=A({x:0,y:0}),{isLike:C,isDisLike:I,likeCount:_,dislikeCount:w,onLike:T,onDisLike:z}=to(s.msg.message),q=W(()=>[ne.RECALL,ne.SYSTEM].includes(l.value.type)),F=async O=>{var S,P;const{id:j}=O,{reply:re}=O.body;if(!re||!re.canCallback)return;const ke=h.getMsgIndex(re.id);if(ke>-1)(S=d==null?void 0:d.value)==null||S.scrollToIndex(ke,!0,12);else{const G=h.getMsgIndex(j),X=Math.ceil((re.gapCount-G+1)/Ln)*Ln;await h.loadMore(X),setTimeout((P=d==null?void 0:d.value)==null?void 0:P.scrollToIndex(h.getMsgIndex(re.id),!1,12),0)}},Z=O=>{if(!y.isSign)return;const{x:j,y:re}=O;g.value.x=j,g.value.y=re,v.value=!0},V=O=>{if(!y.isSign||t.value)return;const{x:j,y:re}=O;g.value.x=j,g.value.y=re,b.value=!0},Q=A(null);gt(()=>{Vt(()=>{if(o.value&&a.value){const j=o.value.clientWidth,re=a.value.clientWidth;j+150<=re?c.value="right-start":s.msg.message.body.reply?c.value="top-end":c.value="bottom-end"}const O=gr(Q);t.value&&Q&&tt(O,j=>{j?nt.emit("onAddReadCountTask",{msgId:s.msg.message.id}):nt.emit("onRemoveReadCountTask",{msgId:s.msg.message.id})})}),nt.on("onGetReadCount",O=>{const j=O.get(s.msg.message.id);j&&(u.read=j.readCount,u.unread=j.unReadCount)})});const le=O=>{u.unread!==0&&(k.currentReadUnreadList.msgId=O,k.currentReadUnreadList.show=!0)};return(O,j)=>{const re=bn,ke=Hn,S=ri,P=St,G=rt,X=Qa,K=pt("login");return E(),L(ot,null,[O.isShowTimeBlock&&O.msg.timeBlock?(E(),L("span",gi,fe(O.msg.timeBlock),1)):ae("",!0),q.value?(E(),L("span",hi,fe(x(l).body),1)):ae("",!0),B("div",{ref_key:"msgVisibleEl",ref:Q},[R($t,{name:"remove"},{default:J(()=>{var be,Ee;return[q.value?ae("",!0):(E(),L("div",{key:0,class:ye(r.value)},[R(re,{src:x(n).avatar,onContextmenu:j[0]||(j[0]=Ct(he=>V(he),["prevent","stop"]))},null,8,["src"]),B("div",{class:"chat-item-box",ref_key:"boxRef",ref:a},[B("div",yi,[R(ke,{effect:"dark",content:(be=x(e))==null?void 0:be.describe,placement:t.value?"top-end":"top-start",teleported:!1},{default:J(()=>{var he,Oe;return[xe(B("img",{class:"user-badge",src:(he=x(e))==null?void 0:he.img},null,8,bi),[[Xe,(Oe=x(e))==null?void 0:Oe.img]])]}),_:1},8,["content","placement"]),B("span",{class:"user-name",onContextmenu:j[1]||(j[1]=Ct(he=>V(he),["prevent","stop"]))},fe(x(n).name),33),B("span",_i,"("+fe(x(n).locPlace||"未知")+")",1),O.isShowTime?(E(),L("span",xi,fe(x(Fn)(O.msg.message.sendTime)),1)):ae("",!0)]),R(ke,{effect:"light","popper-class":"option-tooltip",trigger:O.tooltipTrigger,placement:c.value||"bottom-end",offset:2,"show-arrow":!1,teleported:!1},{content:J(()=>[R(ci,{msg:O.msg},null,8,["msg"])]),default:J(()=>{var he,Oe;return[B("div",{ref_key:"renderMsgRef",ref:o,class:ye(["chat-item-content",{uploading:(he=O.msg)==null?void 0:he.loading}]),onContextmenu:j[3]||(j[3]=Ct(Be=>Z(Be),["prevent","stop"]))},[t.value?(E(),L("div",{key:0,onClick:j[2]||(j[2]=Be=>le(O.msg.message.id)),class:ye(["chat-item-read-count",{"is-gray":u.unread===0}])},[u.unread!==0?(E(),L("span",ki,fe(u.read),1)):(E(),ie(P,{key:1},{default:J(()=>[R(S)]),_:1}))],2)):ae("",!0),(Oe=O.msg)!=null&&Oe.loading?(E(),ie(G,{key:1,icon:"loading",size:20,spin:""})):ae("",!0),R(X,{message:x(l)},null,8,["message"])],34)]}),_:1},8,["trigger","placement"]),(Ee=x(l).body)!=null&&Ee.reply?(E(),L("div",{key:0,class:ye(["chat-item-reply",{pointer:x(l).body.reply.canCallback}]),onClick:j[4]||(j[4]=he=>F(x(l)))},[x(l).body.reply.canCallback?(E(),ie(G,{key:0,icon:"totop",size:12})):ae("",!0),B("span",Ci,fe(x(l).body.reply.username)+": "+fe(x(l).body.reply.body),1)],2)):ae("",!0),x(_)+x(w)>0?(E(),L("div",wi,[R($t,{name:"fade"},{default:J(()=>[x(_)>0?xe((E(),L("span",{key:0,class:ye(["extra-item like",{active:x(C)}])},[R(G,{icon:"like"}),R($t,{name:"count-up",mode:"out-in"},{default:J(()=>[(E(),L("span",{class:"count",key:x(_)},fe(x(_)),1))]),_:1})],2)),[[K,x(T)]]):ae("",!0)]),_:1}),R($t,{name:"fade"},{default:J(()=>[x(w)>0?xe((E(),L("span",{key:0,class:ye(["extra-item dlike",{active:x(I)}])},[R(G,{icon:"dislike",size:17}),R($t,{name:"count-up",mode:"out-in"},{default:J(()=>[(E(),L("span",{class:"count",key:x(w)},fe(x(w)),1))]),_:1})],2)),[[K,x(z)]]):ae("",!0)]),_:1})])):ae("",!0)],512)],2))]}),_:1})],512),R(fi,{show:v.value,"onUpdate:show":j[5]||(j[5]=be=>v.value=be),options:g.value,msg:O.msg},null,8,["show","options","msg"]),R(vi,{show:b.value,"onUpdate:show":j[6]||(j[6]=be=>b.value=be),options:g.value,uid:O.msg.fromUser.uid},null,8,["show","options","uid"])],64)}}});const Ii={key:2,class:"empty"},Mi=me({__name:"index",setup(p){const s=It(),l=A(),f=W(()=>s.currentMessageOptions),y=W(()=>s.chatMessageList),h=W(()=>s.currentNewMsgCount),k=()=>{l.value&&(l.value.scrollToBottom(),s.clearNewMsgCount())},n=()=>{var r;l.value.scrollToIndex(y.value.length-(((r=h.value)==null?void 0:r.count)||0)),s.clearNewMsgCount()};Rt("virtualListRef",l),gt(()=>{Vt(()=>{s.chatListToBottomAction=()=>{k()}})});const i=async()=>{var o;if((o=f.value)!=null&&o.isLoading)return;const r=l.value.getSizes();await s.loadMore(),l.value.scrollToIndex(l.value.getSizes()-r)},e=Jn(r=>{const{offset:o,clientSize:a,scrollSize:c}=r;if(!o||!a||!c)return;o+a>=c-a?(h.value&&(h.value.isStart=!1),s.clearNewMsgCount()):h.value&&(h.value.isStart=!0)},100),t=r=>r.message.id;return(r,o)=>{var d,v,b,g,C,I;const a=As,c=St,u=Bs;return E(),L("div",{class:"chat-msg-list",onContextmenu:o[0]||(o[0]=Ct(()=>{},["prevent"]))},[(d=f.value)!=null&&d.isLoading?(E(),ie(c,{key:0,size:14,class:"loading"},{default:J(()=>[R(a),Ue("消息加载中 ")]),_:1})):ae("",!0),(v=y.value)!=null&&v.length?(E(),ie(x(Qn),{key:1,ref_key:"virtualListRef",ref:l,class:"virtual-list scroll-hover",dataPropName:"msg",data:y.value,"data-key":t,item:Si,size:20,onTotop:i,onScroll:x(e),onOk:k},null,8,["data","onScroll"])):ae("",!0),!((b=f.value)!=null&&b.isLoading)&&((g=y.value)==null?void 0:g.length)===0?(E(),L("div",Ii,"暂无消息，快来发送第一条消息吧~")):ae("",!0),xe(B("span",{class:"new-msgs-tips",onClick:n},[Ue(fe((C=h.value)==null?void 0:C.count)+" 条新消息 ",1),R(c,{size:10},{default:J(()=>[R(u)]),_:1})],512),[[Xe,((I=h.value)==null?void 0:I.count)&&h.value.count>0]])],32)}}});const Ei=vt(Mi,[["__scopeId","data-v-9f52c487"]]),Oi={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ti=B("path",{fill:"currentColor",d:"M224 448a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h576a32 32 0 0 0 32-32V480a32 32 0 0 0-32-32H224zm0-64h576a96 96 0 0 1 96 96v384a96 96 0 0 1-96 96H224a96 96 0 0 1-96-96V480a96 96 0 0 1 96-96z"},null,-1),$i=B("path",{fill:"currentColor",d:"M512 544a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V576a32 32 0 0 1 32-32zm192-160v-64a192 192 0 1 0-384 0v64h384zM512 64a256 256 0 0 1 256 256v128H256V320A256 256 0 0 1 512 64z"},null,-1),Ri=[Ti,$i];function Li(p,s){return E(),L("svg",Oi,Ri)}const Bi={name:"ep-lock",render:Li};const Ni={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ji=B("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88L259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512L214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Pi=[ji];function zi(p,s){return E(),L("svg",Ni,Pi)}const Ai={name:"ep-close",render:zi};var Ge=(p=>(p.text="text",p.br="br",p.at="at",p))(Ge||{});const Di=p=>{let s="";const l=[];return p.forEach(f=>{if((f.type===Ge.text||f.type===Ge.br)&&(s+=f.data),f.type===Ge.at){const{uid:y=0,name:h="",avatar:k=""}=f.data;l.push({uid:y,name:h,avatar:k,length:h.length+1,offset:s.length}),s+="@"+h}}),{pureString:s,mentionList:l}},Fi=(p,s)=>{let l=0;const f=[];if(s.length>0){s.forEach(h=>{const{offset:k,length:n}=h,i=p.slice(l,k);i.length>0&&f.push({type:Ge.text,data:i}),f.push({type:Ge.at,data:{uid:h.uid,name:h.name,avatar:h.avatar}}),l=k+n});const y=p.slice(l);y.length>0&&f.push({type:Ge.text,data:y})}else p.length>0&&f.push({type:Ge.text,data:p});return f},cn=()=>{let p=null,s=null;return window.getSelection?(s=window.getSelection(),s&&s.getRangeAt&&s.rangeCount?(p=s.getRangeAt(0),{range:p,selection:s}):null):null},Ui=()=>{const p=window,s=p.document;let l=s.selection,f,y,h,k=0,n=0;if(l)l.type!=="Control"&&(f=l.createRange(),f.collapse(!0),k=f.boundingLeft,n=f.boundingTop);else if(p.getSelection&&(l=p.getSelection(),l.rangeCount&&(f=l.getRangeAt(0).cloneRange(),f.getClientRects&&(f.collapse(!0),y=f.getClientRects(),y.length>0&&(h=y[0]),h&&(k=h.left,n=h.top)),k===0&&n===0||h===void 0))){const i=s.createElement("span");if(i.getClientRects){i.appendChild(s.createTextNode("​")),f.insertNode(i),h=i.getClientRects()[0],k=h.left,n=h.top;const e=i.parentNode;e==null||e.removeChild(i),e==null||e.normalize()}}return{x:k,y:n}},fn=({content:p,selection:s,range:l})=>{if(!(!s||!l||!p)&&s.getRangeAt(0)&&s.rangeCount){l.deleteContents();const f=document.createElement("div"),y=document.createTextNode(p);f.appendChild(y);const h=document.createDocumentFragment();let k,n;for(;k=f.firstChild;)n=h.appendChild(k);if(l.insertNode(h),n){const i=l.cloneRange();if(!i)return;i.setStartAfter(n),i.collapse(!0),s.removeAllRanges(),s.addRange(i)}}},Vi={class:"person-item__name"},Wi=me({__name:"item",props:{item:{},activeIndex:{},index:{},onSelect:{type:Function}},setup(p){const s=p,l=()=>{var f;(f=s.onSelect)==null||f.call(s,s.item.uid)};return(f,y)=>{const h=bn;return E(),L("div",{class:ye(["person-item",{"person-item--active":f.activeIndex===f.index}]),onClick:l},[R(h,{class:"avatar",src:f.item.avatar,size:26},null,8,["src"]),B("div",Vi,fe(f.item.name),1)],2)}}});const Hi=["src"],Gi={class:"dialog-footer"},Ki=me({__name:"index",setup(p){const s=A({url:""}),l=A(),f=A(!1),y=Mt(),h=Ft("onChangeMsgType"),k=Ft("onChangeFile");hr(window,"paste",e=>{var t;if(e.preventDefault(),!y.isSign)return!1;if(e.clipboardData&&((t=e.clipboardData.files)!=null&&t.length)){const r=e.clipboardData.files[0];r!=null&&r.type.includes("image")&&(l.value=r)}return!1}),Xn(()=>{l!=null&&l.value?(f.value=!0,s.value={url:URL.createObjectURL(l==null?void 0:l.value)}):f.value=!1});const n=()=>{s.value.url&&URL.revokeObjectURL(s.value.url),l.value=void 0,s.value={url:""}},i=async()=>{l!=null&&l.value&&(h==null||h(ne.IMAGE),await(k==null?void 0:k([l==null?void 0:l.value])),f.value=!1,n())};return(e,t)=>{const r=Wn,o=ar;return E(),ie(o,{class:"image-paste-modal",title:"粘贴图片",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),"close-on-click-modal":!1,center:"",onClose:n},{footer:J(()=>[B("span",Gi,[R(r,{onClick:t[0]||(t[0]=a=>f.value=!1)},{default:J(()=>[Ue("取消")]),_:1}),R(r,{type:"primary",onClick:i},{default:J(()=>[Ue(" 发送 ")]),_:1})])]),default:J(()=>[s.value.url?(E(),L("img",{key:0,src:s.value.url},null,8,Hi)):ae("",!0)]),_:1},8,["modelValue"])}}});const qi=["text","contenteditable"],Xi=me({inheritAttrs:!1,__name:"index",props:{disabled:{type:Boolean,default:!1},modelValue:{default:""},mentions:{default:()=>[]},maxLength:{default:-1},className:{},style:{}},emits:["update:modelValue","change","focus","blur","callBackRefAndRange","send"],setup(p,{expose:s,emit:l}){const f=p,{modelValue:y,mentions:h,maxLength:k,disabled:n}=qn(f),i=A(),e=A(),t=Vn(),r=ut(),o=A(!1),a=A([]),c=Bt({x:0,y:0}),u=A(0),d=A(""),v=A(!1),b=A(null),g=A(""),C=W(()=>r.currentSession.roomId);g.value=y.value;const I=()=>{const S=Fi(y==null?void 0:y.value,h.value);i.value&&(S.forEach(P=>{var G,X;if(P.type===Ge.text){const K=document.createTextNode(P.data);(G=i.value)==null||G.appendChild(K)}if(P.type===Ge.at){const K=document.createElement("button");K.dataset.person=JSON.stringify(P.data),K.textContent=`@${P.data.name}`,K.className="at_member",K.contentEditable="false",K.addEventListener("click",()=>!1,!1),K.tabIndex=0,(X=i.value)==null||X.appendChild(K)}}),v.value=!0)};Xn(()=>{var S;if(y.value&&y.value.length>0&&!v.value&&I(),!(y.value&&y.value.length>0)&&!v.value&&setTimeout(()=>{I()},500),!(y.value&&y.value.length>0)&&v&&i.value)for(;(S=i.value)!=null&&S.firstChild;)i.value.removeChild(i.value.firstChild);g.value=y.value}),tt(d,()=>{a.value=t.filterUsers(d.value)}),tt(C,(S,P)=>{S!==P&&(g.value="",a.value=t.currentAtUsersList)},{immediate:!0}),tt(o,()=>{o.value||(u.value=0)}),tt(o,()=>{if(o.value){const{x:S,y:P}=Ui();if(i.value){const G=i.value.offsetWidth,K=i.value.getBoundingClientRect().left+G,be=300;S+be>K?(c.x=K-be,c.y=P):(c.x=S,c.y=P)}else c.x=S,c.y=P}}),tt(n,S=>{S||setTimeout(()=>{var P;(P=i.value)==null||P.focus()})}),gt(()=>{Vt(()=>{var S;(S=i.value)==null||S.focus()})});const _=()=>{if(i.value){const S=[],P=[].slice.call(i.value.childNodes);P.length>0&&P.forEach(K=>{if(K.nodeName==="#text"){const be=K;be.data&&be.data.length>0&&S.push({type:Ge.text,data:be.data})}if(K.nodeName==="BR"&&S.push({type:Ge.br,data:`
`}),K.nodeName==="BUTTON"){const Ee=JSON.parse(K.dataset.person);S.push({type:Ge.at,data:Ee})}});const{pureString:G,mentionList:X}=Di(S);G.length>0&&G.charAt(G.length-1)===`
`?l("change",G.substring(0,G.length-1),X):l("change",G,X)}},w=()=>{const S=cn();if(!S||!S.range||!S.selection){o.value=!1;return}const P=S.range.endContainer;if(!P||!P.textContent||P.nodeName!=="#text"){o.value=!1;return}const G=P.textContent.slice(0,S.selection.focusOffset),X=/@([^@]*)$/.exec(G);if(X&&X.length>=2){const[,K]=X;if(K&&K.length>20){o.value=!1,d.value="",a.value=[];return}o.value=!0,d.value=K,b.value=S}else d.value="",o.value=!1},T=([S,P],G,X)=>{var K,be;if(G.getRangeAt(0)&&G.rangeCount){if(((be=(K=G.focusNode)==null?void 0:K.parentNode)==null?void 0:be.nodeName)==="BUTTON")return;X.deleteContents();const Ee=document.createElement("div");Ee.appendChild(S),P&&Ee.appendChild(P);const he=document.createDocumentFragment();let Oe,Be;for(;Oe=Ee.firstChild;)Be=he.appendChild(Oe);X.insertNode(he),Be&&(X=X.cloneRange(),X.setStartAfter(Be),X.collapse(!0),G.removeAllRanges(),G.addRange(X))}},z=(S,P=!1)=>{var X,K,be,Ee;o.value=!1,(X=e.value)==null||X.scrollToIndex(0);const G=i.value;if(G){G.focus();const he=(K=b==null?void 0:b.value)==null?void 0:K.range;if(!he)return;const Oe=he.endContainer,Be=he.endOffset,ct=Oe.nodeValue,Se=/@([^@]*)$/.exec(ct);if(Se&&Se.length>1||P){!P&&(Se!=null&&Se.length)&&(he.setStart(Oe,Se.index),he.setEnd(Oe,Be),he.deleteContents());const Ye=document.createElement("button");Ye.dataset.person=JSON.stringify(S),Ye.textContent=`@${S.name}`,Ye.className="at_member",Ye.contentEditable="false",Ye.addEventListener("click",()=>!1,!1),Ye.tabIndex=0;const Et=document.createTextNode(" ");T([Ye,Et],(be=b==null?void 0:b.value)==null?void 0:be.selection,(Ee=b==null?void 0:b.value)==null?void 0:Ee.range)}_()}},q=S=>{S.key==="2"&&S.shiftKey?o.value=!0:w()},F=S=>{if(!e.value)return;let P=0;if(S==="up"){if(P=u.value-1,P<0)return;P<e.value.getOffset()/34&&e.value.scrollToIndex(P)}if(S==="down"){if(P=u.value+1,P>a.value.length+1)return;P>6&&e.value.scrollToIndex(P-6)}u.value=P},Z=S=>{if(k.value&&k.value>0&&S.target.innerText.length>=k.value&&(S.key==="Backspace"||S.key==="Delete"||S.preventDefault()),o.value&&a.value.length>0)S.key==="ArrowDown"&&(S.preventDefault(),F("down")),S.key==="ArrowUp"&&(S.preventDefault(),F("up")),S.key==="Enter"&&(S.preventDefault(),z(a.value[u.value]),V());else{if(S.ctrlKey&&S.key==="Enter"||S.shiftKey&&S.key==="Enter"||S.metaKey&&S.key==="Enter"){S.preventDefault(),le();return}if(S.isComposing)return S.preventDefault();S.key==="Enter"&&(S.preventDefault(),l("send",S))}if(S.ctrlKey||S.metaKey)switch(S.key){case"B":case"2":case"I":case"9":case"U":case"F6":{S.preventDefault();break}}S.key==="Tab"&&(S.preventDefault(),document.execCommand("insertHTML",!1,"  "))},V=()=>{if(i.value){const S=i.value.innerText;g.value=S,l("update:modelValue",S)}_()},Q=()=>{l("blur"),b.value=cn(),l("callBackRefAndRange",i.value,b.value),setTimeout(()=>{var S;o.value=!1,(S=e.value)==null||S.scrollToIndex(0),setTimeout(()=>{d.value=""},0)},300)},le=()=>{const S=cn();!S||!S.range||!S.selection||fn({content:`
`,selection:S.selection,range:S.range})},O=()=>{l("focus"),w()},j=S=>{S.preventDefault();let P;return window.clipboardData&&window.clipboardData.getData?P=window.clipboardData.getData("Text"):S.clipboardData&&S.clipboardData.getData&&(P=S.clipboardData.getData("text/plain")),document.execCommand("insertHTML",!1,P),!1},re=(S,P=!1)=>{S&&(nt.emit("focusMsgInput"),setTimeout(()=>{const G=t.userCachedList[S];G&&(z==null||z(G,P))},10))};s({input:i,range:b,onSelectPerson:re});const ke=S=>S.uid;return(S,P)=>{var G;return E(),L("div",{class:ye(["input-wrapper",[S.className,S.$attrs.class]]),style:et([S.style,S.$attrs.style])},[B("div",_n({ref_key:"editorRef",ref:i},S.$attrs,{class:"input",id:"at-mentions-input",text:S.modelValue,contenteditable:!x(n),onInput:V,onKeyup:q,onKeydown:Z,onBlur:Q,onFocus:O,onMouseup:w,onPaste:j}),null,16,qi),xe(B("div",{className:"at-mentions__dialog",style:et({top:`${c.y-14}px`,left:`${c.x||0}px`})},[(G=a.value)!=null&&G.length?(E(),ie(x(Qn),{key:0,ref_key:"scrollRef",ref:e,class:"person-wrapper",dataPropName:"item",itemProps:{activeIndex:u.value,onSelect:re},data:a.value,"data-key":ke,item:Wi,size:20},null,8,["itemProps","data"])):ae("",!0)],4),[[Xe,o.value]]),R(Ki)],6)}}});const Yi=vt(Xi,[["__scopeId","data-v-84756aeb"]]),Zi=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","😏","😒","😞","😔","😟","😕","🙁","😣","😖","😫","😩","😢","😭","😮","💨","😤","😠","😡","🤬","🤯","😳","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","🌫️","😐","😑","😬","🙄","😯","😦","😧","😮","😲","😴","🤤","😪","😵","💫","🤐","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🐶"],oo=100,Ji=oo*1024*1024,Qi=()=>{const p=A(!1),s=A(0),l=A(null),{on:f,trigger:y}=bt(),h=bt(),k=async(o,a,c)=>{p.value=!0;const u=new XMLHttpRequest;u.open("PUT",o,!0),u.setRequestHeader("Content-Type",a.type),u.upload.onprogress=function(d){c||(s.value=Math.round(d.loaded/d.total*100))},u.onload=function(){p.value=!1,!c&&(u.status===200?y("success"):y("fail"))},u.send(a)},n=o=>new Promise((a,c)=>{const u=document.createElement("video"),d=URL.createObjectURL(o);u.src=d,u.crossOrigin="anonymous",u.currentTime=2,u.oncanplay=()=>{var b;const v=document.createElement("canvas");v.width=u.videoWidth,v.height=u.videoHeight,(b=v.getContext("2d"))==null||b.drawImage(u,0,0,v.width,v.height),v.toBlob(g=>{if(!g)return;const C=Date.now()+"thumb.jpg",I=new File([g],C,{type:"image/jpeg"});lt.getUploadUrl({fileName:C,scene:"1"}).send().then(_=>{if(_.uploadUrl&&_.downloadUrl){k(_.uploadUrl,I,!0);const w=setInterval(()=>{p.value||(clearInterval(w),a({thumbWidth:v.width,thumbHeight:v.height,thumbUrl:_.downloadUrl,thumbSize:I.size,tempUrl:d}))})}})})},u.onerror=function(){URL.revokeObjectURL(d),c({width:0,height:0,url:null})}}),i=o=>{const a=new Image,c=URL.createObjectURL(o);return a.src=c,new Promise((u,d)=>{a.onload=function(){u({width:a.width,height:a.height,tempUrl:c})},a.onerror=function(){URL.revokeObjectURL(c),d({width:0,height:0,url:null})}})},e=o=>new Promise((a,c)=>{const u=new Audio,d=URL.createObjectURL(o);u.src=d,(async()=>{for(;isNaN(u.duration)||u.duration===1/0;)await new Promise(g=>setTimeout(g,100)),u.currentTime=1e5*Math.random();const b=Math.round(u.duration||0);a({second:b,tempUrl:d})})(),u.onerror=function(){c({second:0,tempUrl:d})}}),t=async(o,a={})=>{var g;const{name:c,size:u,type:d}=o,v=((g=c.split(".").pop())==null?void 0:g.trim().toLowerCase())||"",b={name:c,size:u,type:d,suffix:v,...a};if(d.includes("image")){const{width:C,height:I,tempUrl:_}=await i(o);return{...b,width:C,height:I,tempUrl:_}}if(d.includes("audio")){const{second:C,tempUrl:I}=await e(o);return{second:C,tempUrl:I,...b}}if(d.includes("video")){const{thumbWidth:C,thumbHeight:I,tempUrl:_,thumbTempUrl:w,thumbUrl:T,thumbSize:z}=await n(o);return{...b,thumbWidth:C,thumbHeight:I,tempUrl:_,thumbTempUrl:w,thumbUrl:T,thumbSize:z}}return b},r=async(o,a)=>{if(p.value||!o)return;const c=await t(o,a);if(c.size>Ji){yt.warning(`文件不得大于 ${oo} MB`);return}const{downloadUrl:u,uploadUrl:d}=await lt.getUploadUrl({fileName:c.name,scene:"1"}).send();d&&u?(l.value={...c,downloadUrl:u},h.trigger(l),k(d,o)):y("fail")};return{fileInfo:l,isUploading:p,progress:s,onStart:h.on,onChange:f,uploadFile:r}},el=()=>{const p=A(!1),s=A(null),l=A(0),f=A(null),y=bt(),{isSupported:h,stream:k,start:n,stop:i}=yr({constraints:{audio:!0}}),e=()=>{p.value=!1,l.value=0,f.value=null,s.value&&clearInterval(s.value)},t=async()=>{if(!h.value){yt.warning("当前环境不支持录音");return}if(e(),await n(),!k.value)return;f.value=new MediaRecorder(k.value),f.value.start(),p.value=!0,s.value=setInterval(()=>{l.value++,l.value>=59&&r()},1e3);const o=[];f.value.addEventListener("dataavailable",a=>{o.push(a.data)}),f.value.addEventListener("stop",()=>{s.value&&clearInterval(s.value);const a=new Blob(o,{type:"audio/wav"}),c=new File([a],`${Date.now()}.wav`,{type:"audio/wav"});if(l.value<2){yt.warning("录制时间太短");return}y.trigger(c),e()})},r=()=>{f.value&&(f.value.stop(),i())};return{isRecording:p,second:l,start:t,stop:r,reset:e,onEnd:y.on}},tl=()=>{const p=ut(),s=W(()=>JSON.parse(localStorage.getItem("USER_INFO")||"{}")),l=W(()=>p.currentSession.roomId);return{mockMessage:(y,h,k)=>{const n=Date.now(),i=Math.floor(Math.random()*15),e=Number(String(n).slice(-7)+i),t=y===1?h.content:null,{uid:r,name:o,avatar:a}=s.value;return{fromUser:{username:o,uid:r,avatar:a,locPlace:"XX"},message:{id:e,roomId:l.value,sendTime:Number(n),content:t,urlContentMap:{},type:y,body:h,messageMark:{likeCount:0,userLike:0,dislikeCount:0,userDislike:0,...k}},sendTime:String(n),loading:!0}}}},ro=p=>(_r("data-v-5994826c"),p=p(),xr(),p),nl={class:"chat-edit"},ol={class:"reply-msg-wrapper"},rl={class:"msg-input"},sl={class:"recorded-tips"},al={class:"emoji-panel"},il={class:"emoji-panel-content"},ll={class:"emoji-list"},ul={class:"emoji-panel-content"},cl=["onClick","onContextmenu"],dl=["src"],pl={key:1,class:"item-add"},fl={class:"footer"},ml=ro(()=>B("div",{class:"divider"},null,-1)),vl=ro(()=>B("span",{class:"tips-text"},"登录",-1)),gl={key:1,class:"tips"},hl=me({__name:"index",setup(p){const s=ir(),l=It(),f=ut(),y=A(!1),h=A(""),k=A(),n=A([]),i=A(!1),e=A(!1),t=A(0),r=A(!1),o=A(ne.FILE),a=A(0),c=A(!1),u=A(-1),d=()=>{setTimeout(()=>{var N,ue,Te,we;if(!k.value)return;(ue=(N=k.value)==null?void 0:N.focus)==null||ue.call(N);const Y=(we=(Te=k.value)==null?void 0:Te.range)==null?void 0:we.selection;Y==null||Y.selectAllChildren(k.value.input),Y==null||Y.collapseToEnd()})},v=({uid:Y,ignoreCheck:N})=>{var ue,Te;(Te=(ue=k.value)==null?void 0:ue.onSelectPerson)==null||Te.call(ue,Y,N),i.value=!1};gt(()=>{nt.on("onSelectPerson",v),nt.on("focusMsgInput",d)}),Gn(()=>{nt.off("onSelectPerson",v),nt.off("focusMsgInput",d)});const b=(Y,N)=>{lt.sendMsg({roomId:f.currentSession.roomId,msgType:Y,body:N}).send().then(ue=>{ue.message.type===ne.TEXT?l.pushMsg(ue):l.updateMsg(t.value,ue),h.value="",le(),l.updateSessionLastActiveTime(f.currentSession.roomId)}).finally(()=>{var ue;y.value=!1,d(),(ue=l.chatListToBottomAction)==null||ue.call(l)})},g=()=>{var Y,N;!((Y=h.value)!=null&&Y.trim().length)||y.value||(y.value=!0,b(ne.TEXT,{content:h.value,replyMsgId:(N=z.value.message)==null?void 0:N.id,atUidList:n.value.map(ue=>ue.uid)}))},C=Yo(),I=Mt(),_=yn(),w=gn(),T=W(()=>I.isSign),z=W(()=>I.isSign&&l.currentMsgReply||{}),q=W(()=>{var Y;return(Y=z==null?void 0:z.value.fromUser)==null?void 0:Y.uid}),F=Ut(q),Z=W(()=>_.emojiList),V=W(()=>w.countInfo.role===dn.REMOVED),Q=()=>{var ue,Te,we;const Y=F==null?void 0:F.value.name,N=(ue=z==null?void 0:z.value.message)==null?void 0:ue.type;return Yn(Y,N,(we=(Te=z==null?void 0:z.value.message)==null?void 0:Te.body)==null?void 0:we.content)},le=()=>l.currentMsgReply={},O=Y=>{var Te,we;const N=(Te=k.value)==null?void 0:Te.input,ue=(we=k.value)==null?void 0:we.range;!N||!ue||(fn({content:Y,...ue}),h.value=N.innerText,r.value=!1,d())},j=(Y,N)=>{n.value=N},re=Bt({multiple:!1,accept:".jpg,.png"}),{open:ke,reset:S,onChange:P}=br(re),{isUploading:G,fileInfo:X,uploadFile:K,onStart:be,onChange:Ee}=Qi(),{uploadEmoji:he,isEmojiUp:Oe}=no(),{isRecording:Be,start:ct,stop:Se,onEnd:Ye,second:Et}=el(),{mockMessage:jt}=tl(),Ot=(Y,N=!1)=>{Y==="img"&&(o.value=ne.IMAGE,re.accept=".jpg,.png,.gif,.jpeg,.webp"),Y==="file"&&(o.value=ne.FILE,re.accept="*"),c.value=N,ke()},Pt=async Y=>{if(!(Y!=null&&Y.length))return;const N=Y[0];if(o.value===ne.IMAGE&&!N.type.includes("image"))return yt.error("请选择图片文件");c.value?await he(N):await K(N)};Rt("onChangeFile",Pt),Rt("onChangeMsgType",Y=>{o.value=Y}),P(Pt),be(()=>{var Te;if(!X.value)return;X.value.type.includes("video")&&(o.value=ne.VIDEO);const{type:Y,body:N}=An(X.value,o.value,!0),ue=jt(Y,N);t.value=ue.message.id,l.pushMsg(ue),(Te=l.chatListToBottomAction)==null||Te.call(l)}),Ee(Y=>{if(Y==="success"){if(!X.value)return;const{body:N,type:ue}=An(X.value,o.value);b(ue,N)}S()}),Ye(Y=>K(Y));const ht=()=>{o.value=ne.VOICE,ct()},Wt=(Y,N)=>{Y.preventDefault(),u.value=u.value===N?-1:N},Ht=Jn(Y=>{b(ne.EMOJI,{url:Y}),r.value=!1},1e3);return(Y,N)=>{const ue=Ai,Te=St,we=rt,Tt=Ur,Gt=Bi,Kt=pt("login");return E(),L("div",nl,[xe(B("div",ol,[B("span",null,fe(Q()),1),R(Te,{class:"reply-msg-icon",size:14,onClick:le},{default:J(()=>[R(ue)]),_:1})],512),[[Xe,Object.keys(z.value).length]]),B("div",rl,[B("div",{class:"action",onClick:N[0]||(N[0]=ve=>i.value=!i.value)},[xe(R(we,{icon:"voice",class:"audio"},null,512),[[Xe,!i.value]]),xe(R(we,{icon:"jianpan"},null,512),[[Xe,i.value]])]),xe(B("div",{class:"recorded",onMousedown:N[1]||(N[1]=ve=>ht()),onMouseup:N[2]||(N[2]=ve=>x(Se)()),onTouchstartPassive:N[3]||(N[3]=ve=>ht()),onTouchendPassive:N[4]||(N[4]=ve=>x(Se)())},[B("div",sl,fe(x(Be)?`录制中 ${x(Et)}s`:"按住说话"),1)],544),[[Xe,i.value]]),xe(R(Yi,{class:"m-input",modelValue:h.value,"onUpdate:modelValue":N[5]||(N[5]=ve=>h.value=ve),ref_key:"mentionRef",ref:k,autofocus:"",tabindex:!T.value||y.value,disabled:!T.value||y.value,placeholder:T.value?y.value?"消息发送中":"来聊点什么吧~":"",mentions:n.value,onChange:j,onSend:g},null,8,["modelValue","tabindex","disabled","placeholder","mentions"]),[[Xe,!i.value]]),R(Tt,{placement:"top",effect:"dark",title:"",visible:r.value,"onUpdate:visible":N[11]||(N[11]=ve=>r.value=ve),"popper-class":"emoji-warpper","show-arrow":!1,width:x(s)==="PC"?385:"95%",trigger:"click"},{reference:J(()=>[B("div",{class:"action",onMouseover:N[6]||(N[6]=ve=>e.value=!0),onMouseleave:N[7]||(N[7]=ve=>e.value=!1)},[e.value?(E(),ie(we,{key:0,icon:"shocked",size:18,colorful:""})):(E(),ie(we,{key:1,icon:"happy1",size:18,colorful:""}))],32)]),default:J(()=>[B("div",al,[xe(B("div",il,[B("ul",ll,[(E(!0),L(ot,null,Lt(x(Zi),(ve,st)=>xe((E(),L("li",{class:"emoji-item",key:st},[Ue(fe(ve),1)])),[[Kt,()=>O(ve)]])),128))])],512),[[Xe,a.value===0]]),xe(B("div",ul,[(E(!0),L(ot,null,Lt(Z.value,ve=>(E(),L("div",{key:ve.id,class:"item",onClick:st=>x(Ht)(ve.expressionUrl),onContextmenu:st=>Wt(st,ve.id)},[B("img",{src:ve.expressionUrl},null,8,dl),ve.id===u.value?(E(),ie(we,{key:0,icon:"guanbi1",class:"del",onClick:Ct(st=>x(_).deleteEmoji(ve.id),["stop"])},null,8,["onClick"])):ae("",!0)],40,cl))),128)),Z.value.length<50&&!x(Oe)?(E(),ie(we,{key:0,class:"cursor-pointer item-add",icon:"tianjia",size:30,onClick:N[8]||(N[8]=ve=>Ot("img",!0))})):(E(),L("div",pl,[R(we,{icon:"loading",spin:"",size:30})]))],512),[[Xe,a.value===1]]),B("div",fl,[R(we,{class:ye(["cursor-pointer","footer-act",{active:a.value===0}]),icon:"biaoqing",size:18,onClick:N[9]||(N[9]=ve=>a.value=0)},null,8,["class"]),R(we,{class:ye(["cursor-pointer","footer-act",{active:a.value===1}]),icon:"aixin",size:18,onClick:N[10]||(N[10]=ve=>a.value=1)},null,8,["class"])])])]),_:1},8,["visible","width"]),R(we,{class:"action",icon:"at",size:20,colorful:"",onClick:N[12]||(N[12]=ve=>{var st;return x(fn)({content:"@",...(st=k.value)==null?void 0:st.range})})}),R(we,{class:ye(["action",{disabled:x(G)}]),icon:"tupian",size:18,colorful:"",onClick:N[13]||(N[13]=ve=>Ot("img"))},null,8,["class"]),R(we,{class:"action",icon:"wenjianjia2",size:20,colorful:"",onClick:N[14]||(N[14]=ve=>Ot("file"))}),ml,B("div",{class:ye(["action",{"is-edit":h.value.length,disabled:!h.value.length}]),onClick:g},[R(we,{class:"send",icon:"huojian",size:20})],2)]),T.value?ae("",!0):(E(),L("span",{key:0,class:"tips",onClick:N[15]||(N[15]=ve=>x(C).showLogin=!0)},[R(Te,{class:"icon-lock"},{default:J(()=>[R(Gt)]),_:1}),Ue(" 点我"),vl,Ue("之后再发言~ ")])),T.value&&V.value?(E(),L("span",gl," 您已被踢出群聊，无法再发送消息 ")):ae("",!0)])}}});const yl=vt(hl,[["__scopeId","data-v-5994826c"]]),bl={class:"chat-box"},_l={class:"chat-wrapper"},xl={key:1,class:"chat"},kl=me({__name:"index",setup(p){const s=A(!1),l=ut(),f=W(()=>l.currentSession);return(y,h)=>{const k=bs,n=St;return E(),L("div",bl,[B("div",_l,[s.value?(E(),ie(n,{key:0,size:160,color:"var(--font-light)"},{default:J(()=>[R(k)]),_:1})):(E(),L("div",xl,[R(Ei),R(yl)]))]),xe(R(Os,null,null,512),[[Xe,f.value.type===x(Zo).Group]])])}}});const Cl=vt(kl,[["__scopeId","data-v-18afe9df"]]),$l=me({__name:"index",setup(p){const s=ut();return s.unReadMark.newMsgUnreadCount=0,(l,f)=>(E(),L(ot,null,[R(fs),R(Cl)],64))}});export{$l as default};
